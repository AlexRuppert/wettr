import{S as t,i as e,n,e as r,a as l,b as a,l as i,c as o,d as s,f as c,g as u,t as d,s as f,m,h as p,j as h,k as g,o as $,p as w,q as x,r as v,u as y,v as b,w as k,x as M,y as C,z as B,A as D,B as T,C as L,D as z,E as S,F as H,G as N,H as P,I as E,J as j,K as G,L as F,M as O,N as A,O as R,P as V,Q as W,R as I,T as U,U as q,V as _,W as Y,X as K,Y as X,Z as J,_ as Q,$ as Z,a0 as tt,a1 as et,a2 as nt,a3 as rt,a4 as lt,a5 as at,a6 as it,a7 as ot,a8 as st,a9 as ct,aa as ut,ab as dt,ac as ft}from"./vendor.510734fa.js";function mt(t){let e,n,d,f,m;return{c(){e=r("button"),e.textContent="Als App installieren",l(e,"class","border border-solid rounded-md border-gray-400 mb-4 p-2 inline-block dark:bg-dark-400 dark:text-gray-300 light:text-gray-800 ")},m(n,r){a(n,e,r),d=!0,f||(m=i(e,"click",t[2]),f=!0)},p:o,i(t){d||(s((()=>{n||(n=c(e,y,{},!0)),n.run(1)})),d=!0)},o(t){n||(n=c(e,y,{},!1)),n.run(0),d=!1},d(t){t&&u(e),t&&n&&n.end(),f=!1,m()}}}function pt(t){let e,n,h,g,$,w,x,v,y,k,M,C,B,D;return{c(){e=r("div"),n=r("div"),h=d("Zum "),g=r("strong"),g.textContent="Home Screen",$=d(" hinzufügen:\r\n      "),w=r("span"),w.innerHTML='<svg viewBox="0 0 22 22" stroke="#0a67c9" stroke-width="2" fill="transparent" width="100%" height="100%" stroke-linecap="round"><path d="M8,7H7a2,2 0 0,0 -2,2V16a2,2 0 0,0 2,2H14a2,2 0 0,0 2,-2V9a2,2 0 0,0 -2,-2H13M10.5,13V1l3,3M10.5,1l-3,3"></path></svg>',x=d("\r\n      und\r\n      "),v=r("span"),y=f("svg"),k=f("path"),l(w,"class","h-5 w-5 inline-block align-middle"),l(k,"d",m),l(y,"viewBox","0 0 22 22"),l(y,"fill","#0a67c9"),l(y,"width","100%"),l(y,"height","100%"),l(v,"class","h-5 -mt-1 w-5 inline-block align-middle"),l(n,"class","rounded bg-light-100 shadow-md p-2 text-dark-400 helper relative"),l(e,"class","flex w-full right-0 bottom-1 left-0 justify-center fixed")},m(r,l){a(r,e,l),p(e,n),p(n,h),p(n,g),p(n,$),p(n,w),p(n,x),p(n,v),p(v,y),p(y,k),C=!0,B||(D=i(n,"click",t[3]),B=!0)},p:o,i(t){C||(s((()=>{M||(M=c(e,b,{},!0)),M.run(1)})),C=!0)},o(t){M||(M=c(e,b,{},!1)),M.run(0),C=!1},d(t){t&&u(e),t&&M&&M.end(),B=!1,D()}}}function ht(t){let e,n,r,l=t[0]&&mt(t),i=t[0]&&t[1]&&pt(t);return{c(){l&&l.c(),e=h(),i&&i.c(),n=g()},m(t,o){l&&l.m(t,o),a(t,e,o),i&&i.m(t,o),a(t,n,o),r=!0},p(t,[r]){t[0]?l?(l.p(t,r),1&r&&$(l,1)):(l=mt(t),l.c(),$(l,1),l.m(e.parentNode,e)):l&&(w(),x(l,1,1,(()=>{l=null})),v()),t[0]&&t[1]?i?(i.p(t,r),3&r&&$(i,1)):(i=pt(t),i.c(),$(i,1),i.m(n.parentNode,n)):i&&(w(),x(i,1,1,(()=>{i=null})),v())},i(t){r||($(l),$(i),r=!0)},o(t){x(l),x(i),r=!1},d(t){l&&l.d(t),t&&u(e),i&&i.d(t),t&&u(n)}}}function gt(t,e,n){let r,l=/iPad|iPhone|iPod/.test(navigator.userAgent),a=!1,i=!1,o=!1;const s="standalone"in window.navigator,c=!0===window.navigator.standalone;return window.addEventListener("beforeinstallprompt",(t=>{r=t,window.matchMedia("(display-mode: standalone)").matches||navigator.standalone||n(0,a=!0)})),window.addEventListener("appinstalled",(()=>{n(0,a=!1),o=!0})),!o&&s&&(c||(a=!0)),[a,i,async()=>{l?n(1,i=!i):(r.prompt(),"accepted"===r.userChoice.outcome&&(n(0,a=!1),o=!0))},()=>n(1,i=!1)]}!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const n of t)if("childList"===n.type)for(const t of n.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerpolicy&&(e.referrerPolicy=t.referrerpolicy),e.credentials="use-credentials"===t.crossorigin?"include":"anonymous"===t.crossorigin?"omit":"same-origin",e}(t);fetch(t.href,e)}}();class $t extends t{constructor(t){super(),e(this,t,gt,ht,n,{})}}function wt(t){let e,n,r,i,s,c,d,m,h,g,$,w,x,v,y,b,k,M,C,B,D,T;return{c(){e=f("svg"),n=f("defs"),r=f("path"),i=f("path"),s=f("path"),c=f("path"),d=f("path"),m=f("path"),h=f("path"),g=f("path"),$=f("path"),w=f("path"),x=f("path"),v=f("path"),y=f("path"),b=f("path"),k=f("use"),C=f("use"),D=f("use"),l(r,"id","sun"),l(r,"d","M15 10.5a4.5 4.5 0 10.001 0"),l(i,"id","sun-rays"),l(i,"d","M15 5v2m0 18v-2M5 15h2m18 0h-2M7.75 7.75l1.4 1.4m13.1 13.1l-1.4-1.4m1.4-13.1l-1.4 1.4m-13.1 13.1l1.4-1.4"),l(s,"id","cloud-open"),l(s,"d","M7 20a4 4 0 110-8h1a4 4 0 1110-0h1.5a4 4 0 110 8"),l(c,"id","cloud"),l(c,"d","M7 20a4 4 0 110-8h1a4 4 0 1110-0h1.5a4 4 0 110 8z"),l(d,"id","sun-part"),l(d,"d","M18 7a3.8 3.8 0 116 4.5"),l(m,"id","sun-part-rays"),l(m,"d","M21.5 1.2l0 1.5M27.5 8.8l1.5 0M25.8 4.6l1.1-1.1M17 4.6l-1.1-1.1M25.8 13l1.1 1.1"),l(h,"id","cloud-part"),l(h,"d","M18.2 7.1a4 4 0 016.7 2.9h1a3.1 3 0 010 6.4h-0.2"),l(g,"id","fog"),l(g,"d","M8 13h15M10 16h16M6 19h16"),l($,"id","wind"),l($,"d","M8 13h13a2.5 2.5 0 10-2-4M6 16h17a2.5 2.5 0 11-2 4"),l(w,"id","rain"),l(w,"d","M10 20l-1 5M13.3 20l-1.4 7M16.5 20l-.8 4.2"),l(x,"id","sleet"),l(x,"d","M10 20l-.03.15m-.4 2l-.4 2M13.3 20l-.4 2m-.4 2l-.03.15m-.4 2l-.03.15M16.5 20l-.03.25m-.4 2l-.4 2"),l(v,"id","snow"),l(v,"d","M10.5 21.5l0 0m0 3l0 0M13.3 20l0 0m0 3l0 0m0 3l0 0M16 21.5l0 0m0 3l0 0"),l(y,"id","hail"),l(y,"d","M10 20l-.4 2m-.4 2l-.03.15M13.3 20l-.8 4m-.4 2l-.03.15M16.5 20l-.4 2m-.4 2l-.03.15"),l(b,"id","thunderstorm"),l(b,"stroke-width","0.3"),l(b,"d","M12.6 17h3.5l-2.5 4h1.8l-5 6.9l2-5.3h-2.5z"),l(b,"fill",t[0]),l(k,"href",M="#"+t[1][0]),l(C,"href",B="#"+t[1][1]),l(D,"href",T="#"+t[1][2]),l(e,"viewBox","0 0 30 30"),l(e,"xmlns","http://www.w3.org/2000/svg"),l(e,"stroke-linejoin","round"),l(e,"stroke-linecap","round"),l(e,"fill","none"),l(e,"stroke-width","1.5"),l(e,"stroke",t[0])},m(t,l){a(t,e,l),p(e,n),p(n,r),p(n,i),p(n,s),p(n,c),p(n,d),p(n,m),p(n,h),p(n,g),p(n,$),p(n,w),p(n,x),p(n,v),p(n,y),p(n,b),p(e,k),p(e,C),p(e,D)},p(t,[n]){1&n&&l(b,"fill",t[0]),2&n&&M!==(M="#"+t[1][0])&&l(k,"href",M),2&n&&B!==(B="#"+t[1][1])&&l(C,"href",B),2&n&&T!==(T="#"+t[1][2])&&l(D,"href",T),1&n&&l(e,"stroke",t[0])},i:o,o:o,d(t){t&&u(e)}}}const xt={clearDay:["sun","sun-rays"],clearNight:["sun"],partlyCloudyDay:["cloud","sun-part","sun-part-rays"],partlyCloudyNight:["cloud","sun-part"],cloudy:["cloud","cloud-part"],fog:["fog"],hail:["cloud-open","hail"],rain:["cloud-open","rain"],sleet:["cloud-open","sleet"],snow:["cloud-open","snow"],thunderstorm:["cloud-open","thunderstorm"],wind:["wind"]};function vt(t,e,n){let r,{icon:l}=e,{color:a="#444"}=e;return t.$$set=t=>{"icon"in t&&n(2,l=t.icon),"color"in t&&n(0,a=t.color)},t.$$.update=()=>{4&t.$$.dirty&&n(1,r=xt[l])},[a,r,l]}class yt extends t{constructor(t){super(),e(this,t,vt,wt,n,{icon:2,color:0})}}function bt(t,e){return e?t.dark:t.light}const kt={light:"#444444",dark:"#9ca3aa"},Mt={light:"#0066ED",dark:"#2784FF"},Ct={light:"#FFB901",dark:"#FFC637"},Bt={light:"#EA580C",dark:"#EA580C"},Dt=t=>{switch(t){case"rain":case"sleet":case"hail":case"snow":case"thunderstorm":return Mt;case"clearDay":case"clearNight":case"partlyCloudyDay":case"partlyCloudyNight":return Ct;default:return kt}},Tt=Math.PI/180;function Lt(t){return Math.log(Math.tan(zt(t)/2+Math.PI/4))}function zt(t){return t*Tt}function St({lon:t,lat:e},n=8){const r=n/70;return{lb:{lat:e-r,lon:t-r},rt:{lat:e+r,lon:t+r}}}function Ht(t){if(0>=t.length)return{index:-1,time:void 0};const e=(new Date).getTime(),n=t.map((t=>t.getTime())).reduce(((t,n,r,l)=>Math.abs(n-e)<Math.abs(l[t]-e)?r:t),0);return{index:n,time:t[n]}}let Nt,Pt=0;async function Et(t=!1){jt||(document.addEventListener("visibilitychange",(()=>Et())),document.addEventListener("pagehide",(()=>Et())),jt=!0),setTimeout((()=>{const e=document.visibilityState;(t||"visible"===e&&Date.now()>Pt&&k(Rt))&&async function(){try{const t=k(Rt),e=k(Wt);e.postMessage({type:"currentWeatherData",data:t}),e.postMessage({type:"weatherData",data:{...t,days:6}}),e.postMessage({type:"currentCloudData",data:{bounds:St(t),onlyNow:!0}}),e.postMessage({type:"weatherWarningData",data:t})}catch(t){console.error(t)}Pt=Date.now()+6e5,clearTimeout(Nt),Nt=setTimeout(Et,6e5)}()}),0)}let jt=!1;async function Gt(t,e=1e6){let n=await caches.match(t);if(n&&n.headers.get("x--cache-timestamp")&&+n.headers.get("x--cache-timestamp")+6e4*e>Date.now())return console.log("cached "+t),n;n=await fetch(t);const r=new Headers(n.headers);r.set("x--cache-timestamp",Date.now().toString());const l=n.clone(),a=new Response(l.body,{status:l.status,statusText:l.statusText,headers:r});return(await caches.open("v1")).put(t,a),n}const Ft=(async()=>(await(await Gt("/wettr/assets/locations.f4d31e90.json",1440)).json()).map((t=>({...t,search:t.name.split(/,|(\s(bei|am|in)\s)/)[0].trim().toLowerCase()}))))();async function Ot(t){let e="",n=1/0;for(let a of await Ft){const i=(r=t.lon,l=+a.lon,Math.pow(t.lat-+a.lat,2)+Math.pow(r-l,2));n>i&&(n=i,e=a.name)}var r,l;return e}function At({lat:t,lon:e}){return void 0!==t&&void 0!==e&&0!==t&&0!==e}const Rt=M({lat:0,lon:0}),Vt=new function(){return new Worker("/wettr/assets/worker.ccbc7883.js",{type:"module"})};Vt.onmessage=function({data:{type:t,data:e}}){switch(t){case"currentWeatherData":qt.set(e);break;case"weatherData":_t.set(e);break;case"cloudData":Xt.set(e);break;case"currentCloudData":Kt.set(e);break;case"weatherWarningData":Yt.set(e)}};const Wt=C(Vt),It=M(!1),Ut=M(!1),qt=M({}),_t=M([]),Yt=M([]),Kt=M({times:[],clouds:[],viewBounds:{}}),Xt=M({times:[],clouds:[],viewBounds:{}});function Jt(t){let e,n,r,i,s;return{c(){e=f("svg"),n=f("path"),l(n,"d",t[0]),l(e,"viewBox",r="0 0 "+t[3]+" "+t[3]),l(e,"fill",i=t[1]?"none":t[2]),l(e,"width","100%"),l(e,"height","100%"),l(e,"stroke",s=t[1]?t[2]:"none"),l(e,"stroke-linejoin","round"),l(e,"stroke-linecap","round")},m(t,r){a(t,e,r),p(e,n)},p(t,[a]){1&a&&l(n,"d",t[0]),8&a&&r!==(r="0 0 "+t[3]+" "+t[3])&&l(e,"viewBox",r),6&a&&i!==(i=t[1]?"none":t[2])&&l(e,"fill",i),6&a&&s!==(s=t[1]?t[2]:"none")&&l(e,"stroke",s)},i:o,o:o,d(t){t&&u(e)}}}function Qt(t,e,n){let{d:r}=e,{fill:l=null}=e,{outline:a=!1}=e,i="#444";It.subscribe((t=>{n(5,i=bt(kt,t))}));let o=i,s=5;return t.$$set=t=>{"d"in t&&n(0,r=t.d),"fill"in t&&n(4,l=t.fill),"outline"in t&&n(1,a=t.outline)},t.$$.update=()=>{48&t.$$.dirty&&n(2,o=null!=l?l:i),3&t.$$.dirty&&r&&n(3,s=a||r.endsWith("z")?30:24)},[r,a,o,s,l,i]}Rt.subscribe((async({lat:t,lon:e})=>{At({lat:t,lon:e})&&Et(!0)}));class Zt extends t{constructor(t){super(),e(this,t,Qt,Jt,n,{d:0,fill:4,outline:1})}}function te(t){let e,n,i;return n=new Zt({props:{d:"M8 12h13a2.5 2.5 0 10-2-4M10 14h10.5q4 0 4 -2M6 16h17a2.5 2.5 0 11-2 4",outline:!0}}),{c(){e=r("div"),B(n.$$.fragment),l(e,"class","outlined-path"),D(e,"transform","rotate("+(t[0]+90)+"deg)"),D(e,"transform-origin","center")},m(t,r){a(t,e,r),T(n,e,null),i=!0},p(t,[n]){(!i||1&n)&&D(e,"transform","rotate("+(t[0]+90)+"deg)")},i(t){i||($(n.$$.fragment,t),i=!0)},o(t){x(n.$$.fragment,t),i=!1},d(t){t&&u(e),L(n)}}}function ee(t,e,n){let{direction:r=0}=e;return t.$$set=t=>{"direction"in t&&n(0,r=t.direction)},[r]}class ne extends t{constructor(t){super(),e(this,t,ee,te,n,{direction:0})}}function re(t,e){const n=e.toISOString();return t.filter((t=>t.time===n))}let le=[];function ae(t,e,n,r,l){t.fillStyle=l,t.beginPath(),t.arc(e,n,r,0,2*Math.PI),t.closePath(),t.fill()}function ie(t,e=!0,n=(()=>{})){t.clearRect(0,0,t.canvas.width,t.canvas.height),t.globalCompositeOperation="darken",t.save(),function(t,e){e&&(function(t,e,n,r,l,a){t.beginPath(),t.moveTo(21,0),t.lineTo(0+r-a,0),t.quadraticCurveTo(0+r,0,0+r,21),t.lineTo(0+r,0+l-a),t.quadraticCurveTo(0+r,0+l,0+r-a,0+l),t.lineTo(21,0+l),t.quadraticCurveTo(0,0+l,0,0+l-a),t.lineTo(0,21),t.quadraticCurveTo(0,0,21,0),t.closePath()}(t,0,0,t.canvas.width,t.canvas.height,21),t.clip())}(t,e),n(),t.restore()}function oe(t){let e,n;return{c(){e=r("canvas"),l(e,"class","h-full w-full opacity-70 inset-0 z-10 absolute"),s((()=>t[7].call(e)))},m(r,l){a(r,e,l),n=z(e,t[7].bind(e)),t[8](e)},p:o,i:o,o:o,d(r){r&&u(e),n(),t[8](null)}}}function se(t,e,n){let r,l,a,i;S(t,It,(t=>n(6,r=t)));let o=!1,{clouds:s}=e,{viewBounds:c}=e,{mini:u=!1}=e;function d(){!function(t,e="#fff",n="#fff",r=3){t.globalCompositeOperation="source-over",ae(t,t.canvas.width/2,t.canvas.height/2,2*r,e),ae(t,t.canvas.width/2,t.canvas.height/2,r,n)}(i,u?"transparent":"#a30",u?"transparent":bt(Ct,r),6)}async function f(t,e){!function(t,e,n,r=!1){const l=function(t){const{x:e,y:n}=function(t,{lon:e,lat:n}){return{x:zt(e-t.lb.lon),y:Lt(n)-Lt(t.lb.lat)}}(t,t.rt);return{x:1/e,y:1/n}}(e),a=function(t,e){return e.canvas.height/(34.8*(t.rt.lat-t.lb.lat))}(e,n)/2+(r?1.5:0);ie(n,r,(()=>{for(const e of t)ae(n,e.projected.x*n.canvas.width*l.x|0,e.projected.y*n.canvas.height*l.y|0,0|a,le[100*e.value])}))}(t,e,i,u),d()}return H((async()=>{await N(),n(5,o=!0),i=function(t,e){t.width=3*e,t.height=3*e;const n=t.getContext("2d",{alpha:!1});return n.translate(0,n.canvas.height),n.scale(1,-1),function(){for(let e=0;100>=e;e++)le.push(`hsla(${200+80*(t=e/100)},${80+20*t}%,58%,1`);var t}(),n}(a,l),ie(i),d()})),t.$$set=t=>{"clouds"in t&&n(2,s=t.clouds),"viewBounds"in t&&n(3,c=t.viewBounds),"mini"in t&&n(4,u=t.mini)},t.$$.update=()=>{108&t.$$.dirty&&s&&(null==c?void 0:c.lb)&&(o?f(s,c):setTimeout((()=>{f(s,c)}),2e3))},[l,a,s,c,u,o,r,function(){l=this.clientWidth,n(0,l)},function(t){P[t?"unshift":"push"]((()=>{a=t,n(1,a)}))}]}class ce extends t{constructor(t){super(),e(this,t,se,oe,n,{clouds:2,viewBounds:3,mini:4})}}function ue(t){let e,n,o,d,f,m;return n=new ce({props:{clouds:t[0],viewBounds:t[1],mini:!0}}),{c(){e=r("div"),B(n.$$.fragment),l(e,"class","rounded-md cursor-pointer h-full w-full relative clickable")},m(r,l){a(r,e,l),T(n,e,null),d=!0,f||(m=i(e,"click",t[4]),f=!0)},p(t,[e]){const r={};1&e&&(r.clouds=t[0]),2&e&&(r.viewBounds=t[1]),n.$set(r)},i(t){d||($(n.$$.fragment,t),s((()=>{o||(o=c(e,y,{},!0)),o.run(1)})),d=!0)},o(t){x(n.$$.fragment,t),o||(o=c(e,y,{},!1)),o.run(0),d=!1},d(t){t&&u(e),L(n),t&&o&&o.end(),f=!1,m()}}}function de(t,e,n){let r,l,a,i;return S(t,Kt,(t=>n(3,r=t))),S(t,Ut,(t=>n(2,l=t))),t.$$.update=()=>{8&t.$$.dirty&&r.times.length>0&&(n(1,i=r.viewBounds),n(0,a=re(r.clouds,Ht(r.times).time)))},[a,i,l,r,()=>E(Ut,l=!0,l)]}class fe extends t{constructor(t){super(),e(this,t,de,ue,n,{})}}function me(t){let e,n,i,o,f,m,g,k,M,C,D,z,S,H,N,P,E,j=ve(t[0].windSpeed)+"";n=new fe({}),k=new ne({props:{direction:t[0].windDirection}});let F=t[0].precipitation>.5&&pe(t);return{c(){e=r("div"),B(n.$$.fragment),o=h(),f=r("div"),m=r("div"),g=r("div"),B(k.$$.fragment),C=h(),D=r("div"),z=d(j),S=h(),H=r("span"),H.innerHTML="<sup>km</sup>/<sub>h</sub>",P=h(),F&&F.c(),l(e,"class","inset-0 absolute"),l(g,"class","h-full -mt-[0.30rem] -ml-[0.10rem] w-full"),l(m,"class","h-7 -mt-3 -ml-3 top-1/2 left-1/2 w-7"),l(H,"class","text-xs text-size-[0.5rem]"),l(D,"class","right-1 bottom-2"),l(f,"class","text-shadow-light inset-0 absolute pointer-events-none children:z-10 children:absolute children:pointer-events-none ")},m(t,r){a(t,e,r),T(n,e,null),a(t,o,r),a(t,f,r),p(f,m),p(m,g),T(k,g,null),p(f,C),p(f,D),p(D,z),p(D,S),p(D,H),p(f,P),F&&F.m(f,null),E=!0},p(e,n){t=e;const r={};1&n&&(r.direction=t[0].windDirection),k.$set(r),(!E||1&n)&&j!==(j=ve(t[0].windSpeed)+"")&&G(z,j),t[0].precipitation>.5?F?(F.p(t,n),1&n&&$(F,1)):(F=pe(t),F.c(),$(F,1),F.m(f,null)):F&&(w(),x(F,1,1,(()=>{F=null})),v())},i(t){E||($(n.$$.fragment,t),s((()=>{i||(i=c(e,y,{duration:xe},!0)),i.run(1)})),$(k.$$.fragment,t),s((()=>{M||(M=c(m,b,{duration:xe},!0)),M.run(1)})),s((()=>{N||(N=c(D,b,{duration:xe},!0)),N.run(1)})),$(F),E=!0)},o(t){x(n.$$.fragment,t),i||(i=c(e,y,{duration:xe},!1)),i.run(0),x(k.$$.fragment,t),M||(M=c(m,b,{duration:xe},!1)),M.run(0),N||(N=c(D,b,{duration:xe},!1)),N.run(0),x(F),E=!1},d(t){t&&u(e),L(n),t&&i&&i.end(),t&&u(o),t&&u(f),L(k),t&&M&&M.end(),t&&N&&N.end(),F&&F.d()}}}function pe(t){let e,n,i,o,f,m,h=ve(t[0].precipitation,t[0].precipitation%1===t[0].precipitation?0:1)+"";return{c(){e=r("div"),n=r("span"),i=d(h),o=r("span"),o.innerHTML="<sup>mm</sup>/<sub>h</sub>",l(o,"class","pl-1 text-size-[0.5rem]"),l(e,"class","flex bottom-2 left-1")},m(t,r){a(t,e,r),p(e,n),p(n,i),p(n,o),m=!0},p(e,n){t=e,(!m||1&n)&&h!==(h=ve(t[0].precipitation,t[0].precipitation%1===t[0].precipitation?0:1)+"")&&G(i,h)},i(t){m||(s((()=>{f||(f=c(e,b,{duration:xe},!0)),f.run(1)})),m=!0)},o(t){f||(f=c(e,b,{duration:xe},!1)),f.run(0),m=!1},d(t){t&&u(e),t&&f&&f.end()}}}function he(t){let e,n,r=t[0].icon,l=ge(t);return{c(){l.c(),e=g()},m(t,r){l.m(t,r),a(t,e,r),n=!0},p(t,n){1&n&&j(r,r=t[0].icon)?(w(),x(l,1,1,o),v(),l=ge(t),l.c(),$(l),l.m(e.parentNode,e)):l.p(t,n)},i(t){n||($(l),n=!0)},o(t){x(l),n=!1},d(t){t&&u(e),l.d(t)}}}function ge(t){let e,n,i,o;return n=new yt({props:{icon:t[0].icon,color:bt(Dt(t[0].icon),t[1])}}),{c(){e=r("div"),B(n.$$.fragment),l(e,"class","inset-2 absolute")},m(t,r){a(t,e,r),T(n,e,null),o=!0},p(e,r){t=e;const l={};1&r&&(l.icon=t[0].icon),3&r&&(l.color=bt(Dt(t[0].icon),t[1])),n.$set(l)},i(t){o||($(n.$$.fragment,t),s((()=>{i||(i=c(e,b,{duration:xe},!0)),i.run(1)})),o=!0)},o(t){x(n.$$.fragment,t),i||(i=c(e,b,{duration:xe},!1)),i.run(0),o=!1},d(t){t&&u(e),L(n),t&&i&&i.end()}}}function $e(t){let e,n,i,o,f,m,g,w,v,y,k,M,C,D,z,S,H,N,P,E=Math.abs(t[0].temperature)+"",j=t[0].relativeHumidity+"";return M=new Zt({props:{d:"M5 9c5 5 15-5 20 0M5 13c1 .7 1.8 1.8 5.2 1.32M5 17c1 .85 1.8 1.5 3.9 1.43M25 13c-1-.7-1.8-1.8-5.2-1.32M25 17c-1-.85-1.8-1.5-3.9-1.43M15.5 12c-13 14 13 14 0 0",outline:!0}}),{c(){e=r("div"),n=r("div"),i=r("span"),o=r("span"),o.textContent="-",f=d(E),m=h(),g=r("span"),g.textContent="°",v=h(),y=r("div"),k=r("div"),B(M.$$.fragment),C=h(),D=r("div"),z=d(j),S=h(),H=r("span"),H.textContent="%",l(o,"class","max-w-4 inline-flex overflow-hidden"),F(o,"hidden",t[0].temperature>=0),l(i,"class","text-right"),l(g,"class","font-light text-sm leading-[2.2]"),l(n,"class","flex font-light h-full mt-3 text-right text-7xl"),l(k,"class","h-4 w-4 self-center"),l(H,"class","ml-[.1rem] text-size-[0.5rem] leading-[2.1]"),l(y,"class","flex right-2 bottom-2 absolute"),l(e,"class","")},m(t,r){a(t,e,r),p(e,n),p(n,i),p(i,o),p(i,f),p(i,m),p(n,g),p(e,v),p(e,y),p(y,k),T(M,k,null),p(y,C),p(y,D),p(D,z),p(y,S),p(y,H),P=!0},p(e,n){t=e,1&n&&F(o,"hidden",t[0].temperature>=0),(!P||1&n)&&E!==(E=Math.abs(t[0].temperature)+"")&&G(f,E),(!P||1&n)&&j!==(j=t[0].relativeHumidity+"")&&G(z,j)},i(t){P||(s((()=>{w||(w=c(n,b,{duration:xe},!0)),w.run(1)})),$(M.$$.fragment,t),s((()=>{N||(N=c(y,b,{duration:xe},!0)),N.run(1)})),P=!0)},o(t){w||(w=c(n,b,{duration:xe},!1)),w.run(0),x(M.$$.fragment,t),N||(N=c(y,b,{duration:xe},!1)),N.run(0),P=!1},d(t){t&&u(e),t&&w&&w.end(),L(M),t&&N&&N.end()}}}function we(t){let e,n,i,o,s,c,d,f=t[0]&&t[0].timestamp&&me(t),m=t[0]&&t[0].timestamp&&he(t),g=t[0]&&t[0].timestamp&&$e(t);return{c(){e=r("div"),n=r("div"),f&&f.c(),i=h(),o=r("div"),m&&m.c(),s=h(),c=r("div"),g&&g.c(),l(n,"class","dark:bg-dark-600"),l(o,"class","h-32 w-32 dark:bg-dark-600"),l(c,"class","flex p-2 box-border justify-end dark:bg-dark-600"),l(e,"class","flex space-x-1 h-32 mx-1 relative tabular-nums children:shadow-md children:rounded-md children:bg-white children:w-32 children:relative ")},m(t,r){a(t,e,r),p(e,n),f&&f.m(n,null),p(e,i),p(e,o),m&&m.m(o,null),p(e,s),p(e,c),g&&g.m(c,null),d=!0},p(t,[e]){t[0]&&t[0].timestamp?f?(f.p(t,e),1&e&&$(f,1)):(f=me(t),f.c(),$(f,1),f.m(n,null)):f&&(w(),x(f,1,1,(()=>{f=null})),v()),t[0]&&t[0].timestamp?m?(m.p(t,e),1&e&&$(m,1)):(m=he(t),m.c(),$(m,1),m.m(o,null)):m&&(w(),x(m,1,1,(()=>{m=null})),v()),t[0]&&t[0].timestamp?g?(g.p(t,e),1&e&&$(g,1)):(g=$e(t),g.c(),$(g,1),g.m(c,null)):g&&(w(),x(g,1,1,(()=>{g=null})),v())},i(t){d||($(f),$(m),$(g),d=!0)},o(t){x(f),x(m),x(g),d=!1},d(t){t&&u(e),f&&f.d(),m&&m.d(),g&&g.d()}}}const xe=150;function ve(t,e=0){return Number.parseFloat(t).toFixed(e).toLocaleString()}function ye(t,e,n){let r,l,a;return S(t,qt,(t=>n(2,r=t))),S(t,It,(t=>n(1,l=t))),t.$$.update=()=>{4&t.$$.dirty&&n(0,a=r)},[a,l,r]}class be extends t{constructor(t){super(),e(this,t,ye,we,j,{})}}function ke(t,e,n,r,l,a){const i=function(t,e){const n=e.y-t.y,r=e.x-t.x;return{length:Math.hypot(n,r),angle:Math.atan2(n,r)}}(t,n),o=i.angle+r,s=.1*i.length,c=e.x+Math.cos(o)*s;let u=e.y+Math.sin(o)*s;return e.y==l-a&&(u=l-a),{x:c,y:u}}function Me(t,e,n,r){const l=t.length-1>e?1:0,a=ke(t[e-(e>1?2:1)],t[e-1],t[e],0,n,r),i=ke(t[e-1],t[e],t[e+l],Math.PI,n,r);return`C${a.x},${a.y} ${i.x},${i.y} ${t[e].x},${t[e].y}`}function Ce(t,e,n){if(t.length>0){let r="";for(let l=1;t.length>l;l++)r+=Me(t,l,e,n);return`M${t[0].x},${t[0].y}${r}`}return""}function Be(t,e,n){const r=t.slice();return r[22]=e[n],r[24]=n,r}function De(t,e,n){const r=t.slice();return r[25]=e[n],r[24]=n,r}function Te(t){let e,n,r,i,o,s,c,d,m,h,$,w,x,v,y,b,k,M,C,B,D,T,L,z,S,H,N,P,E=t[11],j=[];for(let l=0;E.length>l;l+=1)j[l]=Le(De(t,E,l));let G=t[6],F=[];for(let l=0;G.length>l;l+=1)F[l]=ze(Be(t,G,l));let A=t[5]>0&&Se(t);return{c(){e=f("defs"),n=f("clipPath"),r=f("rect"),s=f("g"),c=f("path"),m=f("path"),w=f("g");for(let t=0;j.length>t;t+=1)j[t].c();v=f("g"),y=f("path"),M=f("path"),B=f("path"),L=f("path"),S=f("path"),N=f("g");for(let t=0;F.length>t;t+=1)F[t].c();A&&A.c(),P=g(),l(r,"x","0"),l(r,"y",i=0),l(r,"width","100%"),l(r,"height",o=t[2]-1),l(n,"id","cut-off-bottom"),l(c,"d",d=`M${t[14](t[12])},${t[2]-1}a5 5 0 1 0 0 14h${t[4][0]-t[14](t[12])}v-14z`),l(m,"d",h=`M${t[4][1]},${t[2]-1}v14h${t[14](t[13])-t[4][1]+2}a-5 5 0 1 0 0 -14z`),l(s,"fill",$=t[10].night),l(w,"stroke-width","0"),l(w,"fill",x=t[10].tick),l(w,"text-anchor","middle"),l(w,"font-size","12"),l(w,"font-weight","300"),l(y,"fill",b=t[10].sunniness+"10"),l(y,"d",k=t[7]+`V${t[2]+1}H${t[14](4)}z`),l(M,"stroke",C=t[10].sunniness),l(M,"d",t[7]),l(B,"fill",D=t[10].precipitation+"20"),l(B,"d",T=t[9]+`V${t[2]+1}H${t[14](4)}z`),l(L,"stroke",z=t[10].precipitation),l(L,"stroke-dasharray","4, 5"),l(L,"d",t[9]),l(S,"stroke",H=t[10].temperature+"70"),l(S,"d",t[8]),l(v,"clip-path","url(#cut-off-bottom)"),l(N,"font-size","10"),l(N,"font-weight","400"),l(N,"text-anchor","middle")},m(t,l){a(t,e,l),p(e,n),p(n,r),a(t,s,l),p(s,c),p(s,m),a(t,w,l);for(let e=0;j.length>e;e+=1)j[e].m(w,null);a(t,v,l),p(v,y),p(v,M),p(v,B),p(v,L),p(v,S),a(t,N,l);for(let e=0;F.length>e;e+=1)F[e].m(N,null);A&&A.m(t,l),a(t,P,l)},p(t,e){if(4&e&&o!==(o=t[2]-1)&&l(r,"height",o),20&e&&d!==(d=`M${t[14](t[12])},${t[2]-1}a5 5 0 1 0 0 14h${t[4][0]-t[14](t[12])}v-14z`)&&l(c,"d",d),20&e&&h!==(h=`M${t[4][1]},${t[2]-1}v14h${t[14](t[13])-t[4][1]+2}a-5 5 0 1 0 0 -14z`)&&l(m,"d",h),1024&e&&$!==($=t[10].night)&&l(s,"fill",$),18432&e){let n;for(E=t[11],n=0;E.length>n;n+=1){const r=De(t,E,n);j[n]?j[n].p(r,e):(j[n]=Le(r),j[n].c(),j[n].m(w,null))}for(;j.length>n;n+=1)j[n].d(1);j.length=E.length}if(1024&e&&x!==(x=t[10].tick)&&l(w,"fill",x),1024&e&&b!==(b=t[10].sunniness+"10")&&l(y,"fill",b),132&e&&k!==(k=t[7]+`V${t[2]+1}H${t[14](4)}z`)&&l(y,"d",k),1024&e&&C!==(C=t[10].sunniness)&&l(M,"stroke",C),128&e&&l(M,"d",t[7]),1024&e&&D!==(D=t[10].precipitation+"20")&&l(B,"fill",D),516&e&&T!==(T=t[9]+`V${t[2]+1}H${t[14](4)}z`)&&l(B,"d",T),1024&e&&z!==(z=t[10].precipitation)&&l(L,"stroke",z),512&e&&l(L,"d",t[9]),1024&e&&H!==(H=t[10].temperature+"70")&&l(S,"stroke",H),256&e&&l(S,"d",t[8]),1092&e){let n;for(G=t[6],n=0;G.length>n;n+=1){const r=Be(t,G,n);F[n]?F[n].p(r,e):(F[n]=ze(r),F[n].c(),F[n].m(N,null))}for(;F.length>n;n+=1)F[n].d(1);F.length=G.length}t[5]>0?A?A.p(t,e):(A=Se(t),A.c(),A.m(P.parentNode,P)):A&&(A.d(1),A=null)},d(t){t&&u(e),t&&u(s),t&&u(w),O(j,t),t&&u(v),t&&u(N),O(F,t),A&&A.d(t),t&&u(P)}}}function Le(t){let e,n,r,i=t[25]+"";return{c(){e=f("text"),n=d(i),l(e,"x",r=t[14](t[25])),l(e,"y","96%")},m(t,r){a(t,e,r),p(e,n)},p:o,d(t){t&&u(e)}}}function ze(t){let e,n,r,i,o,s,c,m,h,g,$,w,x,v,y=t[22].temperature+"",b=t[22].temperature+"";return{c(){e=f("circle"),s=f("g"),c=f("text"),m=d(y),$=f("text"),w=d(b),l(e,"stroke",n=t[10].temperature),l(e,"stroke-width","0.7"),l(e,"cx",r=t[22].x),l(e,"cy",i=Math.min(t[22].y,t[2]-2)),l(e,"r","1.2"),l(e,"fill",o=t[10].pointBackgroundColor),l(c,"fill",h=t[10].dataLabelBackgroundColor),l(c,"stroke",g=t[10].dataLabelBackgroundColor),l(c,"stroke-width","3"),l($,"fill",x=t[10].temperature),l(s,"transform",v=`translate(${t[22].x+(0===t[24]?2:-7)} ${t[22].y+(t[22].flipY?-3:8)})`)},m(t,n){a(t,e,n),a(t,s,n),p(s,c),p(c,m),p(s,$),p($,w)},p(t,a){1024&a&&n!==(n=t[10].temperature)&&l(e,"stroke",n),64&a&&r!==(r=t[22].x)&&l(e,"cx",r),68&a&&i!==(i=Math.min(t[22].y,t[2]-2))&&l(e,"cy",i),1024&a&&o!==(o=t[10].pointBackgroundColor)&&l(e,"fill",o),64&a&&y!==(y=t[22].temperature+"")&&G(m,y),1024&a&&h!==(h=t[10].dataLabelBackgroundColor)&&l(c,"fill",h),1024&a&&g!==(g=t[10].dataLabelBackgroundColor)&&l(c,"stroke",g),64&a&&b!==(b=t[22].temperature+"")&&G(w,b),1024&a&&x!==(x=t[10].temperature)&&l($,"fill",x),64&a&&v!==(v=`translate(${t[22].x+(0===t[24]?2:-7)} ${t[22].y+(t[22].flipY?-3:8)})`)&&l(s,"transform",v)},d(t){t&&u(e),t&&u(s)}}}function Se(t){let e,n;return{c(){e=f("line"),l(e,"x1",t[5]),l(e,"x2",t[5]),l(e,"y2",t[2]),l(e,"stroke",n=t[10].currentTime),l(e,"stroke-width","0.5")},m(t,n){a(t,e,n)},p(t,r){32&r&&l(e,"x1",t[5]),32&r&&l(e,"x2",t[5]),4&r&&l(e,"y2",t[2]),1024&r&&n!==(n=t[10].currentTime)&&l(e,"stroke",n)},d(t){t&&u(e)}}}function He(t){let e,n=t[0]&&t[1]&&Te(t);return{c(){e=f("svg"),n&&n.c(),l(e,"width","100%"),l(e,"height","100%"),l(e,"fill","none"),l(e,"stroke","none"),l(e,"stroke-linecap","round"),l(e,"stroke-linejoin","round")},m(r,l){a(r,e,l),n&&n.m(e,null),t[16](e)},p(t,[r]){t[0]&&t[1]?n?n.p(t,r):(n=Te(t),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},i:o,o:o,d(r){r&&u(e),n&&n.d(),t[16](null)}}}function Ne(t){return(60*t.getHours()+t.getMinutes())/60}function Pe(t,e){const n=t.min.temperature;return n+e*(t.max.temperature-n)}function Ee(t,e,n){let r;S(t,It,(t=>n(17,r=t)));let l,a,i,o,{weather:s}=e,c=[4,6,8,10,12,14,16,18,20,22],u=c[0],d=c[c.length-1],f=d-u+1,m=[0,100],p=-5,h=[],g="",$="",w="";const x=t=>t?{dataLabelBackgroundColor:"#22222270",pointBackgroundColor:"#222",currentTime:"#f66",tick:kt.dark+"f0",night:"#00000032",temperature:kt.dark,precipitation:Mt.dark,sunniness:Ct.dark}:{dataLabelBackgroundColor:"#ffffffa0",pointBackgroundColor:"#fff",currentTime:"#a00",tick:kt.light+"c0",night:"#44446410",temperature:kt.light,precipitation:Mt.light,sunniness:Ct.light};let v=x(r);function y(t){return l*(t-u)+l/2}function b(t){return.01>t?i:function(t){return Math.max(5,Math.min((1-t)*i,i-2.5))}(t)}return It.subscribe((async t=>{n(10,v=x(t))})),t.$$set=t=>{"weather"in t&&n(0,s=t.weather)},t.$$.update=()=>{if(32776&t.$$.dirty&&o){const t=o.getBoundingClientRect();n(15,a=t.width),n(2,i=t.height-13),n(1,l=a/f)}if(7&t.$$.dirty&&s&&l){const{sunrise:t,sunset:e}=s.dayLight;n(4,m=[t,e].map((t=>y(Ne(t)))));const r=new Date;new Date(s.dayGraph[0].timestamp)<r&&new Date(s.dayGraph[s.dayGraph.length-1].timestamp)>r&&n(5,p=y(Ne(r)));const l=s.dayGraph.map((t=>({x:y(Ne(new Date(t.timestamp))),y:b(t.sunniness)}))),a=s.dayGraph.map((t=>({x:y(Ne(new Date(t.timestamp))),y:b(t.precipitation)}))),o=s.dayGraph.map((t=>{const e=new Date(t.timestamp);return{x:y(Ne(e)),y:b(t.temperature),flipY:.2>t.temperature,temperature:Pe(s,t.temperature),hour:e.getHours()}})).filter((({hour:t,temperature:e})=>e>=s.max.temperature||s.min.temperature>=e||t%2==0));n(6,h=o.filter(((t,e,n)=>function(t,e){var n,r;return e[t].y!==(null!=(r=null==(n=e[t-1])?void 0:n.y)?r:void 0)}(e,n)))),n(7,g=Ce(l,i,2.5)),n(8,$=Ce(o,i,2.5)),n(9,w=Ce(a,i,2.5))}},[s,l,i,o,m,p,h,g,$,w,v,c,u,d,y,a,function(t){P[t?"unshift":"push"]((()=>{o=t,n(3,o)}))}]}class je extends t{constructor(t){super(),e(this,t,Ee,He,n,{weather:0})}}function Ge(t,e,n){const r=t.slice();return r[5]=e[n],r[7]=n,r}function Fe(t,e,n){const r=t.slice();return r[8]=e[n].icon,r[9]=e[n].colors,r[11]=n,r}function Oe(t){let e,n,i,o,f,m,g,y,k,M,C,D,z,S,H,N,P,E,j,O,W,I,U,q,_,Y,K=t[1][t[7]].day+"",X=t[1][t[7]].weekday+"",J=[],Q=new Map,Z=t[0][t[5]].min.temperature+"",tt=t[0][t[5]].max.temperature+"",et=t[0][t[5]].dayParts;const nt=t=>t[7]+""+t[11];for(let r=0;et.length>r;r+=1){let e=Fe(t,et,r),n=nt(e);Q.set(n,J[r]=Re(n,e))}return q=new je({props:{weather:t[0][t[5]]}}),{c(){e=r("div"),n=r("div"),i=r("span"),o=d(K),f=h(),m=r("span"),g=d(X),k=h(),M=r("div");for(let t=0;J.length>t;t+=1)J[t].c();C=h(),D=r("div"),z=r("span"),S=d(Z),H=r("span"),H.textContent="°",N=h(),P=r("span"),E=d(tt),j=r("span"),j.textContent="°",I=h(),U=r("div"),B(q.$$.fragment),l(m,"class","text-lg -ml-1"),l(n,"class","pl-1 text-3xl w-28"),l(M,"class","flex space-x-4 "),l(H,"class","text-sm align-text-top"),l(z,"class","text-lg"),F(z,"cold",0>t[0][t[5]].min.temperature),l(j,"class","text-sm ml-[0.1rem] leading-[1.8] align-top"),F(P,"cold",0>t[0][t[5]].max.temperature),l(D,"class","text-right text-3xl w-28"),l(e,"class","flex justify-between"),l(U,"class","h-20")},m(t,r){a(t,e,r),p(e,n),p(n,i),p(i,o),p(n,f),p(n,m),p(m,g),p(e,k),p(e,M);for(let e=0;J.length>e;e+=1)J[e].m(M,null);p(e,C),p(e,D),p(D,z),p(z,S),p(z,H),p(D,N),p(D,P),p(P,E),p(P,j),a(t,I,r),a(t,U,r),T(q,U,null),Y=!0},p(t,e){(!Y||2&e)&&K!==(K=t[1][t[7]].day+"")&&G(o,K),(!Y||2&e)&&X!==(X=t[1][t[7]].weekday+"")&&G(g,X),13&e&&(et=t[0][t[5]].dayParts,w(),J=A(J,e,nt,1,t,et,Q,M,R,Re,null,Fe),v()),(!Y||1&e)&&Z!==(Z=t[0][t[5]].min.temperature+"")&&G(S,Z),9&e&&F(z,"cold",0>t[0][t[5]].min.temperature),(!Y||1&e)&&tt!==(tt=t[0][t[5]].max.temperature+"")&&G(E,tt),9&e&&F(P,"cold",0>t[0][t[5]].max.temperature);const n={};1&e&&(n.weather=t[0][t[5]]),q.$set(n)},i(t){if(!Y){s((()=>{y||(y=c(n,b,{},!0)),y.run(1)}));for(let t=0;et.length>t;t+=1)$(J[t]);s((()=>{O||(O=c(P,b,{},!0)),O.run(1)})),s((()=>{W||(W=c(D,b,{},!0)),W.run(1)})),$(q.$$.fragment,t),s((()=>{_||(_=c(U,V,{y:15},!0)),_.run(1)})),Y=!0}},o(t){y||(y=c(n,b,{},!1)),y.run(0);for(let e=0;J.length>e;e+=1)x(J[e]);O||(O=c(P,b,{},!1)),O.run(0),W||(W=c(D,b,{},!1)),W.run(0),x(q.$$.fragment,t),_||(_=c(U,V,{y:15},!1)),_.run(0),Y=!1},d(t){t&&u(e),t&&y&&y.end();for(let e=0;J.length>e;e+=1)J[e].d();t&&O&&O.end(),t&&W&&W.end(),t&&u(I),t&&u(U),L(q),t&&_&&_.end()}}}function Ae(t){let e,n,i,o;return n=new yt({props:{icon:t[8],color:bt(t[9],t[2])}}),{c(){e=r("div"),B(n.$$.fragment),l(e,"class","inset-0 absolute")},m(t,r){a(t,e,r),T(n,e,null),o=!0},p(e,r){t=e;const l={};1&r&&(l.icon=t[8]),5&r&&(l.color=bt(t[9],t[2])),n.$set(l)},i(r){o||($(n.$$.fragment,r),s((()=>{i||(i=c(e,b,{delay:50*t[11]},!0)),i.run(1)})),o=!0)},o(r){x(n.$$.fragment,r),i||(i=c(e,b,{delay:50*t[11]},!1)),i.run(0),o=!1},d(t){t&&u(e),L(n),t&&i&&i.end()}}}function Re(t,e){let n,i,s,c=e[0][e[5]].dayParts,d=Ae(e);return{key:t,first:null,c(){n=r("div"),d.c(),i=h(),l(n,"class","flex h-8 pt-1.5 w-8 items-center relative"),this.first=n},m(t,e){a(t,n,e),d.m(n,null),p(n,i),s=!0},p(t,r){e=t,1&r&&j(c,c=e[0][e[5]].dayParts)?(w(),x(d,1,1,o),v(),d=Ae(e),d.c(),$(d),d.m(n,i)):d.p(e,r)},i(t){s||($(d),s=!0)},o(t){x(d),s=!1},d(t){t&&u(n),d.d(t)}}}function Ve(t,e){let n,i,o,d,f=e[0]&&e[0].length>0&&Oe(e);return{key:t,first:null,c(){n=r("div"),f&&f.c(),i=h(),l(n,"class","bg-white rounded-md h-30 shadow-md py-1 px-2 dark:bg-dark-600"),this.first=n},m(t,e){a(t,n,e),f&&f.m(n,null),p(n,i),d=!0},p(t,r){(e=t)[0]&&e[0].length>0?f?(f.p(e,r),1&r&&$(f,1)):(f=Oe(e),f.c(),$(f,1),f.m(n,i)):f&&(w(),x(f,1,1,(()=>{f=null})),v())},i(t){d||($(f),s((()=>{o||(o=c(n,y,{duration:250},!0)),o.run(1)})),d=!0)},o(t){x(f),o||(o=c(n,y,{duration:250},!1)),o.run(0),d=!1},d(t){t&&u(n),f&&f.d(),t&&o&&o.end()}}}function We(t){let e,n,i=[],o=new Map,s=t[3];const c=t=>t[5];for(let r=0;s.length>r;r+=1){let e=Ge(t,s,r),n=c(e);o.set(n,i[r]=Ve(n,e))}return{c(){e=r("div");for(let t=0;i.length>t;t+=1)i[t].c();l(e,"class","flex flex-col flex-nowrap font-light space-y-1 mx-1 transition-opacity duration-700 tabular-nums")},m(t,r){a(t,e,r);for(let n=0;i.length>n;n+=1)i[n].m(e,null);n=!0},p(t,[n]){15&n&&(s=t[3],w(),i=A(i,n,c,1,t,s,o,e,R,Ve,null,Ge),v())},i(t){if(!n){for(let t=0;s.length>t;t+=1)$(i[t]);n=!0}},o(t){for(let e=0;i.length>e;e+=1)x(i[e]);n=!1},d(t){t&&u(e);for(let e=0;i.length>e;e+=1)i[e].d()}}}function Ie(t,e,n){let r,l,a,i;S(t,_t,(t=>n(4,r=t))),S(t,It,(t=>n(2,l=t)));let o=[...Array(6).keys()];return t.$$.update=()=>{16&t.$$.dirty&&n(0,a=r),1&t.$$.dirty&&n(1,i=a.map((t=>{const e=new Intl.DateTimeFormat("de-DE",{day:"2-digit",weekday:"short"}).formatToParts(t.day);return{day:e.find((t=>"day"===t.type)).value,weekday:e.find((t=>"weekday"===t.type)).value.replace(/\./g,"")}})))},[a,i,l,o,r]}class Ue extends t{constructor(t){super(),e(this,t,Ie,We,j,{})}}let qe=[];function _e(){return qe}function Ye(t){let e,n,d,f,m;return{c(){e=r("div"),l(e,"class","bg-dark-800/90 inset-0 z-11 fixed backdrop-filter backdrop-grayscale-100")},m(n,r){a(n,e,r),d=!0,f||(m=i(e,"click",W(t[1])),f=!0)},p:o,i(t){d||(s((()=>{n||(n=c(e,y,{duration:200},!0)),n.run(1)})),d=!0)},o(t){n||(n=c(e,y,{duration:200},!1)),n.run(0),d=!1},d(t){t&&u(e),t&&n&&n.end(),f=!1,m()}}}function Ke(t){let e,n,r=t[0]&&Ye(t);return{c(){r&&r.c(),e=g()},m(t,l){r&&r.m(t,l),a(t,e,l),n=!0},p(t,[n]){t[0]?r?(r.p(t,n),1&n&&$(r,1)):(r=Ye(t),r.c(),$(r,1),r.m(e.parentNode,e)):r&&(w(),x(r,1,1,(()=>{r=null})),v())},i(t){n||($(r),n=!0)},o(t){x(r),n=!1},d(t){r&&r.d(t),t&&u(e)}}}function Xe(t,e,n){const r=I();let{show:l=!1}=e;return t.$$set=t=>{"show"in t&&n(0,l=t.show)},[l,function(){r("close")}]}qe=JSON.parse(localStorage.history||"[]");class Je extends t{constructor(t){super(),e(this,t,Xe,Ke,n,{show:0})}}function Qe(t){let e,n,o,s;const c=t[2].default,d=U(c,t,t[1],null);return{c(){e=r("button"),d&&d.c(),l(e,"class","bg-transparent border-none rounded cursor-pointer flex h-10 p-1 w-10 appearance-none clickable items-center"),l(e,"aria-label",t[0])},m(r,l){a(r,e,l),d&&d.m(e,null),n=!0,o||(s=i(e,"click",t[3]),o=!0)},p(t,[r]){d&&d.p&&(!n||2&r)&&q(d,c,t,t[1],n?Y(c,t[1],r,null):_(t[1]),null),(!n||1&r)&&l(e,"aria-label",t[0])},i(t){n||($(d,t),n=!0)},o(t){x(d,t),n=!1},d(t){t&&u(e),d&&d.d(t),o=!1,s()}}}function Ze(t,e,n){let{$$slots:r={},$$scope:l}=e,{label:a="Button"}=e;return t.$$set=t=>{"label"in t&&n(0,a=t.label),"$$scope"in t&&n(1,l=t.$$scope)},[a,l,r,function(e){K.call(this,t,e)}]}class tn extends t{constructor(t){super(),e(this,t,Ze,Qe,j,{label:0})}}function en(t){let e,n;return e=new Zt({props:{d:t[0]}}),{c(){B(e.$$.fragment)},m(t,r){T(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.d=t[0]),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){x(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function nn(t){let e,n;return e=new tn({props:{label:t[1],$$slots:{default:[en]},$$scope:{ctx:t}}}),e.$on("click",t[2]),{c(){B(e.$$.fragment)},m(t,r){T(e,t,r),n=!0},p(t,[n]){const r={};2&n&&(r.label=t[1]),9&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){x(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function rn(t,e,n){let{icon:r}=e,{label:l="Button"}=e;return t.$$set=t=>{"icon"in t&&n(0,r=t.icon),"label"in t&&n(1,l=t.label)},[r,l,function(e){K.call(this,t,e)}]}class ln extends t{constructor(t){super(),e(this,t,rn,nn,j,{icon:0,label:1})}}function an(t,e,n){const r=t.slice();return r[18]=e[n],r[20]=n,r}function on(t){let e,n,i,o;return n=new ln({props:{label:"Get Current Location",icon:Q}}),n.$on("click",t[10]),{c(){e=r("div"),B(n.$$.fragment),l(e,"class","z-20 absolute")},m(t,r){a(t,e,r),T(n,e,null),o=!0},p(e,n){t=e},i(t){o||($(n.$$.fragment,t),s((()=>{i||(i=c(e,y,{duration:dn},!0)),i.run(1)})),o=!0)},o(t){x(n.$$.fragment,t),i||(i=c(e,y,{duration:dn},!1)),i.run(0),o=!1},d(t){t&&u(e),L(n),t&&i&&i.end()}}}function sn(t){let e,n,i,o,d=t[3],f=[];for(let r=0;d.length>r;r+=1)f[r]=cn(an(t,d,r));return{c(){e=r("div"),n=r("div");for(let t=0;f.length>t;t+=1)f[t].c();l(n,"class","shadow-lg py-1"),l(e,"class","rounded-md outline-none bg-gray-100 shadow-lg w-full transform origin-top-right origin-top transition-transform left-0 z-20 absolute m1-2 dark:bg-dark-800")},m(t,r){a(t,e,r),p(e,n);for(let e=0;f.length>e;e+=1)f[e].m(n,null);o=!0},p(e,r){if(t=e,296&r){let e;for(d=t[3],e=0;d.length>e;e+=1){const l=an(t,d,e);f[e]?f[e].p(l,r):(f[e]=cn(l),f[e].c(),f[e].m(n,null))}for(;f.length>e;e+=1)f[e].d(1);f.length=d.length}},i(t){o||(s((()=>{i||(i=c(e,V,{duration:dn,y:-50},!0)),i.run(1)})),o=!0)},o(t){i||(i=c(e,V,{duration:dn,y:-50},!1)),i.run(0),o=!1},d(t){t&&u(e),O(f,t),t&&i&&i.end()}}}function cn(t){let e,n,o,s,c,f=t[18]+"";function m(){return t[13](t[18])}function h(){return t[14](t[20])}return{c(){e=r("a"),n=d(f),l(e,"href",o="#"),l(e,"class","font-semibold text-sm text-lg py-2 px-4 text-gray-700 block no-underline dark:text-gray-400"),F(e,"selected",t[20]===t[5])},m(t,r){a(t,e,r),p(e,n),s||(c=[i(e,"click",m),i(e,"mouseenter",h)],s=!0)},p(r,l){t=r,8&l&&f!==(f=t[18]+"")&&G(n,f),32&l&&F(e,"selected",t[20]===t[5])},d(t){t&&u(e),s=!1,X(c)}}}function un(t){let e,n,o,s,c,f,m,g,y,b,k,M,C,D,z;e=new Je({props:{show:t[4]}}),e.$on("close",t[7]);let S=t[4]&&on(t),H=t[4]&&sn(t);return{c(){B(e.$$.fragment),n=h(),o=r("div"),S&&S.c(),s=h(),c=r("div"),f=r("input"),m=h(),g=r("div"),y=d(t[2]),b=h(),k=r("label"),k.textContent="Ort",M=h(),H&&H.c(),l(f,"id","location"),l(f,"type","text"),l(f,"class","bg-transparent border-none h-full outline-none flex-1 text-center text-xl w-full text-gray-800 dark:text-gray-400"),l(f,"placeholder","Ort"),l(f,"autocomplete","off"),l(g,"class","text-center text-xs right-0 -bottom-1 left-0 text-gray-500 absolute pointer-events-none"),l(k,"for","location"),l(k,"class","hidden"),l(c,"class","h-full relative"),l(o,"class","bg-white rounded-md h-10 shadow-md mx-1 mt-1 relative dark:bg-dark-600"),F(o,"z-50",t[4])},m(r,l){T(e,r,l),a(r,n,l),a(r,o,l),S&&S.m(o,null),p(o,s),p(o,c),p(c,f),t[11](f),J(f,t[0]),p(c,m),p(c,g),p(g,y),p(c,b),p(c,k),p(o,M),H&&H.m(o,null),C=!0,D||(z=[i(f,"input",t[12]),i(f,"keydown",t[6]),i(f,"focus",t[9]),i(f,"click",t[9])],D=!0)},p(t,[n]){const r={};16&n&&(r.show=t[4]),e.$set(r),t[4]?S?(S.p(t,n),16&n&&$(S,1)):(S=on(t),S.c(),$(S,1),S.m(o,s)):S&&(w(),x(S,1,1,(()=>{S=null})),v()),1&n&&f.value!==t[0]&&J(f,t[0]),(!C||4&n)&&G(y,t[2]),t[4]?H?(H.p(t,n),16&n&&$(H,1)):(H=sn(t),H.c(),$(H,1),H.m(o,null)):H&&(w(),x(H,1,1,(()=>{H=null})),v()),16&n&&F(o,"z-50",t[4])},i(t){C||($(e.$$.fragment,t),$(S),$(H),C=!0)},o(t){x(e.$$.fragment,t),x(S),x(H),C=!1},d(r){L(e,r),r&&u(n),r&&u(o),S&&S.d(),t[11](null),H&&H.d(),D=!1,X(z)}}}const dn=250;function fn(t,e,n){let r,l;S(t,Rt,(t=>n(15,r=t)));let a="",i="",o=[];const s=t=>async function(t,e=5){return t=t.trim().toLowerCase(),(await Ft).filter((e=>e.search.includes(t))).slice(0,e).map((t=>t.name))}(t).then((t=>n(3,o=t)));let c=!1,u=0;function d(){!a&&r&&Ot(r).then((t=>n(0,a=t))),n(4,c=!1),l.blur()}function f(t,e){E(Rt,r=e,r),function(t){qe=[t,...qe.filter((e=>e!==t)).slice(0,2)],localStorage.history=JSON.stringify(qe)}(t);const n=new URLSearchParams(window.location.search);n.set("location",t);const l=window.location.origin+window.location.pathname+"?"+n.toString()+"#"+window.location.hash;l!==window.location.toString()&&window.history.pushState({},"",l)}async function m(t){n(0,a=t),d(),l.blur();const e=await async function(t){if(0===t.trim().length)return null;const e=(await Ft).find((e=>e.name===t));return e?{lat:+e.lat,lon:+e.lon}:null}(t);e&&f(a,e)}return H((()=>{var t,e;const n=new URLSearchParams(window.location.search),r=Object.fromEntries(n.entries());m(r.location?r.location:null!=(e=null==(t=_e())?void 0:t[0])?e:"")})),t.$$.update=()=>{if(1&t.$$.dirty){if(a.length>0)s(a);else{const t=_e();t.length>0?n(3,o=t):s(a)}n(5,u=0)}},[a,l,i,o,c,u,function(t){switch(t.code){case"ArrowUp":n(5,u=Math.max(0,u-1)),t.preventDefault();break;case"ArrowDown":n(5,u=Math.min(o.length-1,u+1)),t.preventDefault();break;case"Enter":m(o[u]);break;case"Escape":d()}},d,m,function(){n(4,c=!0),n(5,u=0),n(0,a=""),n(2,i="")},function(){d(),async function(){navigator.geolocation.getCurrentPosition((async t=>{const{latitude:e,longitude:r}=t.coords,l=+e.toFixed(3),i=+r.toFixed(3);(({closestCity:t,coordinates:e})=>{n(0,a=`Nahe ${t}`),f(t,e)})({closestCity:await Ot({lat:l,lon:i}),coordinates:{lat:l,lon:i}})}),(()=>alert("Ort konte nicht ermittelt werden")))}()},function(t){P[t?"unshift":"push"]((()=>{l=t,n(1,l)}))},function(){a=this.value,n(0,a)},t=>m(t),t=>n(5,u=t)]}class mn extends t{constructor(t){super(),e(this,t,fn,un,j,{})}}function pn(t){let e,n,i,o,d,f,m;return{c(){e=r("img"),i=h(),o=r("img"),l(e,"class","sharpen2"),Z(e.src,n=t[2])||l(e,"src",n),l(e,"alt",""),l(e,"aria-hidden","true"),Z(o.src,d=t[2])||l(o,"src",d),l(o,"alt","")},m(t,n){a(t,e,n),a(t,i,n),a(t,o,n),m=!0},p(t,r){(!m||4&r&&!Z(e.src,n=t[2]))&&l(e,"src",n),(!m||4&r&&!Z(o.src,d=t[2]))&&l(o,"src",d)},i(t){m||(s((()=>{f||(f=c(o,y,{duration:150},!0)),f.run(1)})),m=!0)},o(t){f||(f=c(o,y,{duration:150},!1)),f.run(0),m=!1},d(t){t&&u(e),t&&u(i),t&&u(o),t&&f&&f.end()}}}function hn(t){let e,n,i,o,s=t[2]&&pn(t);return i=new ce({props:{clouds:t[0],viewBounds:t[1]}}),{c(){e=r("div"),s&&s.c(),n=h(),B(i.$$.fragment),l(e,"class","relative children:w-full children:rounded-md "),l(e,"style",`min-height:${gn-22}px`)},m(t,r){a(t,e,r),s&&s.m(e,null),p(e,n),T(i,e,null),o=!0},p(t,[r]){t[2]?s?(s.p(t,r),4&r&&$(s,1)):(s=pn(t),s.c(),$(s,1),s.m(e,n)):s&&(w(),x(s,1,1,(()=>{s=null})),v());const l={};1&r&&(l.clouds=t[0]),2&r&&(l.viewBounds=t[1]),i.$set(l)},i(t){o||($(s),$(i.$$.fragment,t),o=!0)},o(t){x(s),x(i.$$.fragment,t),o=!1},d(t){t&&u(e),s&&s.d(),L(i)}}}const gn=350;function $n(t,e,n){let r;S(t,Rt,(t=>n(3,r=t)));let l,{clouds:a}=e,{viewBounds:i}=e;return t.$$set=t=>{"clouds"in t&&n(0,a=t.clouds),"viewBounds"in t&&n(1,i=t.viewBounds)},t.$$.update=()=>{8&t.$$.dirty&&(async()=>{if(At(r)){const t=function(t,e){return`https://sgx.geodatenzentrum.de/wms_topplus_open?service=wms&version=1.3.0&request=GetMap&Layers=p25&STYLES=default&BBOX=${[t.lb.lat,t.lb.lon,t.rt.lat,t.rt.lon].map((t=>Number.parseFloat(t).toFixed(3))).join(",")}&CRS=EPSG:4326&width=${2*e}&Height=${2*e}&Format=image/jpeg`}(St(r),gn),e=await(await Gt(t)).blob();n(2,l=URL.createObjectURL(e))}})()},[a,i,l,r]}class wn extends t{constructor(t){super(),e(this,t,$n,hn,n,{clouds:0,viewBounds:1})}}function xn(t){let e,n,o,s,c,m,g,w,v,y,b,k,M,C,D,z,S,H,N,P,E=yn(t[1][t[0]])+"";return n=new ln({props:{label:"Go Back",icon:tt}}),n.$on("click",t[9]),g=new ln({props:{label:"Go Forward",icon:et}}),g.$on("click",t[12]),{c(){e=r("div"),B(n.$$.fragment),o=h(),s=r("span"),c=r("input"),m=h(),B(g.$$.fragment),w=h(),v=r("div"),y=r("div"),b=d(E),k=h(),M=r("div"),C=f("svg"),D=f("path"),l(c,"type","range"),l(c,"min",vn),l(c,"max",t[2]),l(s,"class","flex-grow mx-5 mt-1 w-full"),l(D,"d","m0 0h24c-12 6-12 18 0 24h-24c12 -6 12-18 0-24z"),l(C,"width","100%"),l(C,"class","h-6 w-[20px] "),l(C,"viewBox","0 0 24 24"),l(C,"fill","#2663eb"),l(C,"stroke","none"),l(C,"preserveAspectRatio","none"),l(M,"class","-mt-0.5 absolute"),l(M,"style",z=`left:${t[5]/2-10}px`),l(y,"class","rounded-md bg-blue-600 text-center text-xl text-white w-full px-1 time-label relative tabular-nums"),l(y,"style",S=`transform: translateX(${t[6]}px)`),l(v,"class","-top-10 left-0 z-20 absolute"),l(e,"class","flex my-2 relative")},m(r,l){a(r,e,l),T(n,e,null),p(e,o),p(e,s),p(s,c),t[10](c),J(c,t[0]),p(e,m),T(g,e,null),p(e,w),p(e,v),p(v,y),p(y,b),p(y,k),p(y,M),p(M,C),p(C,D),t[13](y),H=!0,N||(P=[i(c,"change",t[11]),i(c,"input",t[11])],N=!0)},p(t,[e]){(!H||4&e)&&l(c,"max",t[2]),1&e&&J(c,t[0]),(!H||3&e)&&E!==(E=yn(t[1][t[0]])+"")&&G(b,E),(!H||32&e&&z!==(z=`left:${t[5]/2-10}px`))&&l(M,"style",z),(!H||64&e&&S!==(S=`transform: translateX(${t[6]}px)`))&&l(y,"style",S)},i(t){H||($(n.$$.fragment,t),$(g.$$.fragment,t),H=!0)},o(t){x(n.$$.fragment,t),x(g.$$.fragment,t),H=!1},d(r){r&&u(e),L(n),t[10](null),L(g),t[13](null),N=!1,X(P)}}}let vn=0;function yn(t){return new Intl.DateTimeFormat("default",{hourCycle:"h23",hour:"numeric",minute:"numeric"}).format(t)}function bn(t,e,n){let{sliderValue:r=0}=e,{times:l=[]}=e,a=100;const i=I();let o,s,c=1,u=1,d=0,f=0;return t.$$set=t=>{"sliderValue"in t&&n(0,r=t.sliderValue),"times"in t&&n(1,l=t.times)},t.$$.update=()=>{var e,m,p;if(2&t.$$.dirty&&(n(2,a=l.length-1),p=null!=(m=null==(e=Ht(l))?void 0:e.index)?m:0,n(0,r=p)),24&t.$$.dirty&&(o&&(n(7,c=o.offsetWidth),n(8,d=o.offsetLeft)),s&&n(5,u=s.offsetWidth)),423&t.$$.dirty){const t=l[r];t&&i("timeSelected",t),n(6,f=d+16-u/2+r*((c-32)/a))}},[r,l,a,o,s,u,f,c,d,()=>n(0,r=Math.max(0,r-1)),function(t){P[t?"unshift":"push"]((()=>{o=t,n(3,o)}))},function(){r=nt(this.value),n(0,r)},()=>n(0,r=Math.min(a,r+1)),function(t){P[t?"unshift":"push"]((()=>{s=t,n(4,s)}))}]}class kn extends t{constructor(t){super(),e(this,t,bn,xn,n,{sliderValue:0,times:1})}}function Mn(t){let e,n,o,f,m,g,w,v,y,b,k,M,C,D,z,S,H,N,P,E,j,G,F,O;return v=new wn({props:{clouds:t[2],viewBounds:t[3]}}),k=new kn({props:{times:t[1]}}),k.$on("timeSelected",t[12]),{c(){e=r("div"),n=r("div"),o=r("div"),f=r("span"),f.textContent="Regenradar",m=h(),g=r("span"),g.textContent="×",w=h(),B(v.$$.fragment),y=h(),b=r("div"),B(k.$$.fragment),M=h(),C=r("div"),D=r("a"),z=d(t[4]),S=r("span"),S.textContent=",",H=h(),N=r("a"),P=d(t[6]),l(g,"class","cursor-pointer font-extralight text-lg px-3 right-5 absolute"),l(g,"role","button"),l(o,"class","text-size-xl text-center pt-2 pb-4"),l(n,"class","flex-col mt-2 dark:bg-dark-600"),l(D,"class","source-link"),l(D,"href",t[5]),l(N,"class","source-link"),l(N,"href",t[7]),l(C,"class","text-center leading-3 dark:bg-dark-600 dark:text-gray-500"),l(e,"class","flex flex-col space-y-2 top-0 right-0 left-0 z-20 absolute select-none children:shadow-md children:rounded-md children:max-w-sm children:p-2 children:bg-white children:mx-5 children:z-20 ")},m(r,l){a(r,e,l),p(e,n),p(n,o),p(o,f),p(o,m),p(o,g),p(n,w),T(v,n,null),p(n,y),p(n,b),T(k,b,null),p(e,M),p(e,C),p(C,D),p(D,z),p(C,S),p(C,H),p(C,N),p(N,P),G=!0,F||(O=[i(g,"click",t[9]),i(o,"click",t[9]),rt(E=lt.call(null,e,{timeframe:500,minSwipeDistance:35,touchAction:"none"})),i(e,"swipe",t[13])],F=!0)},p(t,e){const n={};4&e&&(n.clouds=t[2]),8&e&&(n.viewBounds=t[3]),v.$set(n);const r={};2&e&&(r.times=t[1]),k.$set(r)},i(t){G||($(v.$$.fragment,t),$(k.$$.fragment,t),s((()=>{j||(j=c(e,V,{y:-300},!0)),j.run(1)})),G=!0)},o(t){x(v.$$.fragment,t),x(k.$$.fragment,t),j||(j=c(e,V,{y:-300},!1)),j.run(0),G=!1},d(t){t&&u(e),L(v),L(k),t&&j&&j.end(),F=!1,X(O)}}}function Cn(t){let e,n,r,l;e=new Je({props:{show:t[0]}}),e.$on("close",t[9]);let i=t[0]&&Mn(t);return{c(){B(e.$$.fragment),n=h(),i&&i.c(),r=g()},m(t,o){T(e,t,o),a(t,n,o),i&&i.m(t,o),a(t,r,o),l=!0},p(t,[n]){const l={};1&n&&(l.show=t[0]),e.$set(l),t[0]?i?(i.p(t,n),1&n&&$(i,1)):(i=Mn(t),i.c(),$(i,1),i.m(r.parentNode,r)):i&&(w(),x(i,1,1,(()=>{i=null})),v())},i(t){l||($(e.$$.fragment,t),$(i),l=!0)},o(t){x(e.$$.fragment,t),x(i),l=!1},d(t){L(e,t),t&&u(n),i&&i.d(t),t&&u(r)}}}function Bn(t,e,n){let r,l,a;S(t,Ut,(t=>n(0,r=t))),S(t,Xt,(t=>n(10,l=t))),S(t,Rt,(t=>n(11,a=t)));let i,o=[],s=[],c=[],u=new Map;function d(t){n(2,c=u.get(t))}function f(){E(Ut,r=!1,r)}return t.$$.update=()=>{var e,c;2049&t.$$.dirty&&r&&At(a)&&async function(){try{k(Wt).postMessage({type:"cloudData",data:{bounds:St(k(Rt)),onlyNow:!1}})}catch(t){console.error(t)}}(),1024&t.$$.dirty&&(null==(e=null==l?void 0:l.viewBounds)?void 0:e.lb)&&(n(3,i=(c=l).viewBounds),n(1,o=c.times),s=c.clouds,o.forEach((t=>{u.set(t,re(s,t))})))},[r,o,c,i,"Kartendarstellung: © Bundesamt für Kartographie und Geodäsie (2021)","http://www.bkg.bund.de/","Datenquellen","https://sg.geodatenzentrum.de/web_public/Datenquellen_TopPlus_Open.pdf",d,f,l,a,t=>d(t.detail),({detail:t})=>"top"===t.direction?f():null]}class Dn extends t{constructor(t){super(),e(this,t,Bn,Cn,j,{})}}function Tn(t,e,n){const r=t.slice();return r[8]=e[n],r}function Ln(t){var e;let n,o,c,f,m,g,b,k,M,C,D,z,S,H,N,P,E,j,A,R,V,W,I,U,q,_,Y,K,X,J,Q,Z=t[2].title+"",tt=t[2].time+"",et=t[2].description+"";f=new Zt({props:{d:null!=(e=jn[t[2].icon])?e:jn.default,fill:bt(Bt,t[4])}});let nt=t[0].length>1&&zn(t);N=new Zt({props:{d:ut,fill:t[1]?null:bt(Bt,t[4])}});let rt=!!t[2].instruction&&Sn(t),lt=t[3],it=[];for(let r=0;lt.length>r;r+=1)it[r]=Nn(Tn(t,lt,r));const ot=t=>x(it[t],1,1,(()=>{it[t]=null}));return{c(){n=r("div"),o=r("div"),c=r("div"),B(f.$$.fragment),m=h(),g=r("div"),b=d(Z),k=r("span"),k.textContent="!",M=h(),nt&&nt.c(),C=h(),D=r("div"),z=d(tt),S=h(),H=r("div"),B(N.$$.fragment),P=h(),E=r("div"),j=r("div"),A=r("div"),R=h(),V=r("div"),W=r("div"),I=r("div"),U=d(et),q=h(),rt&&rt.c(),_=h(),Y=r("div");for(let t=0;it.length>t;t+=1)it[t].c();l(c,"class","flex h-5 px-3 w-5 self-center"),l(k,"class","ml-[0.15rem] text-orange-600"),l(g,"class","flex flex-grow font-semibold flex-shrink-0 self-center overflow-hidden overflow-ellipsis"),l(D,"class","flex font-light text-xs self-center"),l(H,"class","p-2 pt-3 transition-transform w-8 self-center"),F(H,"mirrored-y",!t[1]),l(o,"class","rounded-md flex space-x-1 h-14 w-full clickable"),F(o,"shadow-md",!t[1]),l(A,"class","h-7 w-full bottom-0 linear-fade absolute"),F(A,"dark",t[4]),l(W,"class","children:px-2"),l(Y,"class","py-5 children:px-2"),l(V,"class","h-full text-sm py-2 leading-5 overflow-y-auto box-border custom-scrollbar"),l(E,"class","rounded-md max-h-60 transform origin-top transition-all relative height-transition overflow-hidden dark:bg-dark-800"),F(E,"max-h-0",t[1]),F(E,"pb-2",!t[1]),l(n,"class","bg-white rounded-md shadow-md mx-1 dark:bg-dark-600")},m(e,r){a(e,n,r),p(n,o),p(o,c),T(f,c,null),p(o,m),p(o,g),p(g,b),p(g,k),p(g,M),nt&&nt.m(g,null),p(o,C),p(o,D),p(D,z),p(o,S),p(o,H),T(N,H,null),p(n,P),p(n,E),p(E,j),p(j,A),p(j,R),p(j,V),p(V,W),p(W,I),p(I,U),p(W,q),rt&&rt.m(W,null),p(V,_),p(V,Y);for(let t=0;it.length>t;t+=1)it[t].m(Y,null);X=!0,J||(Q=i(o,"click",t[5]),J=!0)},p(t,e){var n;const r={};4&e&&(r.d=null!=(n=jn[t[2].icon])?n:jn.default),16&e&&(r.fill=bt(Bt,t[4])),f.$set(r),(!X||4&e)&&Z!==(Z=t[2].title+"")&&G(b,Z),t[0].length>1?nt?nt.p(t,e):(nt=zn(t),nt.c(),nt.m(g,null)):nt&&(nt.d(1),nt=null),(!X||4&e)&&tt!==(tt=t[2].time+"")&&G(z,tt);const l={};if(18&e&&(l.fill=t[1]?null:bt(Bt,t[4])),N.$set(l),2&e&&F(H,"mirrored-y",!t[1]),2&e&&F(o,"shadow-md",!t[1]),16&e&&F(A,"dark",t[4]),(!X||4&e)&&et!==(et=t[2].description+"")&&G(U,et),t[2].instruction?rt?rt.p(t,e):(rt=Sn(t),rt.c(),rt.m(W,null)):rt&&(rt.d(1),rt=null),8&e){let n;for(lt=t[3],n=0;lt.length>n;n+=1){const r=Tn(t,lt,n);it[n]?(it[n].p(r,e),$(it[n],1)):(it[n]=Nn(r),it[n].c(),$(it[n],1),it[n].m(Y,null))}for(w(),n=lt.length;it.length>n;n+=1)ot(n);v()}2&e&&F(E,"max-h-0",t[1]),2&e&&F(E,"pb-2",!t[1])},i(t){if(!X){$(f.$$.fragment,t),$(N.$$.fragment,t);for(let t=0;lt.length>t;t+=1)$(it[t]);K||s((()=>{K=at(n,y,{duration:150}),K.start()})),X=!0}},o(t){x(f.$$.fragment,t),x(N.$$.fragment,t),it=it.filter(Boolean);for(let e=0;it.length>e;e+=1)x(it[e]);X=!1},d(t){t&&u(n),L(f),nt&&nt.d(),L(N),rt&&rt.d(),O(it,t),J=!1,Q()}}}function zn(t){let e,n,i=`+(${t[0].length-1})`;return{c(){e=r("span"),n=d(i),l(e,"class","font-light text-xs ml-2 tracking-wide tabular-nums self-center")},m(t,r){a(t,e,r),p(e,n)},p(t,e){1&e&&i!==(i=`+(${t[0].length-1})`)&&G(n,i)},d(t){t&&u(e)}}}function Sn(t){let e,n,i,o,s,c=t[2].instruction+"";return{c(){e=r("div"),n=r("div"),n.textContent="ACHTUNG! Hinweis auf mögliche Gefahren:",i=h(),o=r("div"),s=d(c),l(n,"class","font-semibold"),l(e,"class","mt-2")},m(t,r){a(t,e,r),p(e,n),p(e,i),p(e,o),p(o,s)},p(t,e){4&e&&c!==(c=t[2].instruction+"")&&G(s,c)},d(t){t&&u(e)}}}function Hn(t){let e,n,i,o,s,c,f=t[8].instruction+"";return{c(){e=r("div"),n=r("div"),n.textContent="ACHTUNG! Hinweis auf mögliche Gefahren:",i=h(),o=r("div"),s=d(f),c=h(),l(n,"class","font-semibold"),l(e,"class","mt-2")},m(t,r){a(t,e,r),p(e,n),p(e,i),p(e,o),p(o,s),p(e,c)},p(t,e){8&e&&f!==(f=t[8].instruction+"")&&G(s,f)},d(t){t&&u(e)}}}function Nn(t){var e;let n,i,o,s,c,f,m,w,v,y,b,k,M,C,D,z=t[8].title+"",S=t[8].time+"",H=t[8].description+"";o=new Zt({props:{d:null!=(e=jn[t[8].icon])?e:jn.default}});let N=!!t[8].instruction&&Hn(t);return{c(){n=r("div"),i=r("div"),B(o.$$.fragment),s=h(),c=r("div"),f=d(z),m=h(),w=r("div"),v=d(S),y=h(),b=r("div"),k=d(H),M=h(),N&&N.c(),C=g(),l(i,"class","flex h-5 mr-2 ml-1 w-5 self-center"),l(c,"class","flex flex-grow font-semibold self-center overflow-hidden overflow-ellipsis"),l(w,"class","flex font-light text-xs pr-2 self-center tabular-nums "),l(n,"class","flex space-x-1 bg-light-400 h-8 mt-5 mb-2 dark:bg-dark-500")},m(t,e){a(t,n,e),p(n,i),T(o,i,null),p(n,s),p(n,c),p(c,f),p(n,m),p(n,w),p(w,v),a(t,y,e),a(t,b,e),p(b,k),a(t,M,e),N&&N.m(t,e),a(t,C,e),D=!0},p(t,e){var n;const r={};8&e&&(r.d=null!=(n=jn[t[8].icon])?n:jn.default),o.$set(r),(!D||8&e)&&z!==(z=t[8].title+"")&&G(f,z),(!D||8&e)&&S!==(S=t[8].time+"")&&G(v,S),(!D||8&e)&&H!==(H=t[8].description+"")&&G(k,H),t[8].instruction?N?N.p(t,e):(N=Hn(t),N.c(),N.m(C.parentNode,C)):N&&(N.d(1),N=null)},i(t){D||($(o.$$.fragment,t),D=!0)},o(t){x(o.$$.fragment,t),D=!1},d(t){t&&u(n),L(o),t&&u(y),t&&u(b),t&&u(M),N&&N.d(t),t&&u(C)}}}function Pn(t){let e,n,r=t[0].length>0&&Ln(t);return{c(){r&&r.c(),e=g()},m(t,l){r&&r.m(t,l),a(t,e,l),n=!0},p(t,[n]){t[0].length>0?r?(r.p(t,n),1&n&&$(r,1)):(r=Ln(t),r.c(),$(r,1),r.m(e.parentNode,e)):r&&(w(),x(r,1,1,(()=>{r=null})),v())},i(t){n||($(r),n=!0)},o(t){x(r),n=!1},d(t){r&&r.d(t),t&&u(e)}}}const En={icon:st,title:"",description:"",time:"",instruction:""},jn={1:it,3:ot,default:st};function Gn(t,e){const n=t.getDay()===e.getDay();return{...Object.fromEntries(new Intl.DateTimeFormat("de-DE",{hour:"numeric",day:"2-digit",weekday:"short"}).formatToParts(e).map((({type:t,value:e})=>[t,e.replace(/\./g,"")]))),today:n}}function Fn(t,{start:e,end:n}){const r=e.getDay()===n.getDay(),l=Gn(t,e),a=Gn(t,n);return(t>e?"bis ":(l.today?"":l.weekday+" ")+l.hour+" - ")+(a.today||r?"":a.weekday+" ")+a.hour+" Uhr"}function On(t,e,n){let r,l,a;S(t,Yt,(t=>n(6,r=t))),S(t,Rt,(t=>n(7,l=t))),S(t,It,(t=>n(4,a=t)));let i=!0,o=En,s=[],c=[];return t.$$.update=()=>{var e;if(193&t.$$.dirty){let t=l,a=[t.lon,t.lat];if(r.length>0){const l=new Date;n(0,s=r.map((t=>({time:Fn(l,t.time),level:t.level,icon:t.type,title:t.event,description:t.description,instruction:t.instruction.replace("ACHTUNG! Hinweis auf mögliche Gefahren: ",""),regions:t.regions}))).filter((e=>e.regions.some((e=>function({lon:t,lat:e},n){const r=.02;return!(n.lb.lon>t+r||t-r>n.rt.lon||n.lb.lat>e+r||e-r>n.rt.lat)}(t,e.bounds)&&ct(a,e.polygon)))))),n(2,o=null!=(e=null==s?void 0:s[0])?e:En),n(3,c=s.slice(1))}}},[s,i,o,c,a,function(){n(1,i=!i)},r,l]}class An extends t{constructor(t){super(),e(this,t,On,Pn,n,{})}}const{document:Rn}=dt;function Vn(t){let e,n,i,o,s,c,d,f,m,g,w,v,y,b,k,M,C,D,z,S,H,N;return s=new mn({}),d=new be({}),m=new An({}),w=new Ue({}),y=new Dn({}),C=new $t({}),{c(){e=r("meta"),i=h(),o=r("main"),B(s.$$.fragment),c=h(),B(d.$$.fragment),f=h(),B(m.$$.fragment),g=h(),B(w.$$.fragment),v=h(),B(y.$$.fragment),b=h(),k=r("footer"),M=r("span"),B(C.$$.fragment),D=h(),z=r("span"),z.innerHTML='Quelle:\n    <a class="footer-link" href="https://www.dwd.de">Deutscher Wetterdienst</a>',S=h(),H=r("span"),H.innerHTML='via\n    <a class="footer-link" href="https://brightsky.dev">brightsky.dev</a>',l(e,"name","theme-color"),l(e,"content",n=t[0]?"#000":"#fff"),l(o,"class","m-auto max-w-sm mt-0 w-full grid gap-1 grid-cols-1 relative"),l(M,"class","self-center"),l(k,"class","space-y-2 bg-gray-200 mt-5 text-sm text-center py-10 dark:bg-dark-800 children:block")},m(t,n){p(Rn.head,e),a(t,i,n),a(t,o,n),T(s,o,null),p(o,c),T(d,o,null),p(o,f),T(m,o,null),p(o,g),T(w,o,null),p(o,v),T(y,o,null),a(t,b,n),a(t,k,n),p(k,M),T(C,M,null),p(k,D),p(k,z),p(k,S),p(k,H),N=!0},p(t,[r]){(!N||1&r&&n!==(n=t[0]?"#000":"#fff"))&&l(e,"content",n)},i(t){N||($(s.$$.fragment,t),$(d.$$.fragment,t),$(m.$$.fragment,t),$(w.$$.fragment,t),$(y.$$.fragment,t),$(C.$$.fragment,t),N=!0)},o(t){x(s.$$.fragment,t),x(d.$$.fragment,t),x(m.$$.fragment,t),x(w.$$.fragment,t),x(y.$$.fragment,t),x(C.$$.fragment,t),N=!1},d(t){u(e),t&&u(i),t&&u(o),L(s),L(d),L(m),L(w),L(y),t&&u(b),t&&u(k),L(C)}}}function Wn(t,e,n){let r;S(t,It,(t=>n(0,r=t)));let l=window.matchMedia("(prefers-color-scheme: dark)");const a=t=>{t.matches?(document.documentElement.classList.add("dark"),E(It,r=!0,r)):(document.documentElement.classList.remove("dark"),E(It,r=!1,r))};return a(l),l.addEventListener("change",a),[r]}!function(t={}){const{immediate:e=!1,onOfflineReady:n,onRegistered:r,onRegisterError:l}=t;let a;"serviceWorker"in navigator&&(a=new ft("/wettr/sw.js",{scope:"/wettr/"}),a.addEventListener("activated",(t=>{t.isUpdate?window.location.reload():null==n||n()})),a.register({immediate:e}).then((t=>{null==r||r(t)})).catch((t=>{null==l||l(t)})))}({onOfflineReady(){}}),new class extends t{constructor(t){super(),e(this,t,Wn,Vn,j,{})}}({target:document.getElementById("app")});
