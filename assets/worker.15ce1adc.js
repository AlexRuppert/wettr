(function(){"use strict";function yt(t,n,e){const i=new Date(t.toISOString().substr(0,10)+"T12:00Z");function r(b){return Math.sin(b*(Math.PI/180))}function a(b){return Math.asin(b)*(180/Math.PI)}function f(b){return Math.cos(b*(Math.PI/180))}function l(b){return Math.acos(b)*(180/Math.PI)}function h(b){return new Date((b-24405875e-1)*864e5)}const _=Math.floor(i.getTime()/864e5+24405875e-1)-2451545+8e-4-e/360,d=(357.5291+.98560028*_)%360,c=1.9148*r(d)+.02*r(2*d)+3e-4*r(3*d),w=(d+c+180+102.9372)%360,E=2451545+_+.0053*r(d)-.0069*r(2*w),k=a(r(w)*r(23.44)),p=l((r(-.83)-r(n)*r(k))/(f(n)*f(k)));return{sunrise:h(E-p/360),sunset:h(E+p/360)}}const Q={foreground:{light:"#444444",dark:"#9ca3aa"},rain:{light:"#0066ED",dark:"#2784FF"},sun:{light:"#FFB901",dark:"#FFC637"},warning:{light:"#EA580C",dark:"#EA580C"}},St=t=>{switch(t){case"rain":case"sleet":case"hail":case"snow":case"thunderstorm":return Q.rain;case"clearDay":case"clearNight":case"partlyCloudyDay":case"partlyCloudyNight":return Q.sun;default:return Q.foreground}};function Dt(t,n){const e=t.slice();return e.sort(n),e}const ee="x--cache-timestamp";async function H(t,n=1e6){let e=await caches.match(t);if(e&&e.headers.get(ee)&&+e.headers.get(ee)+n*60*1e3>Date.now())return console.log("cached "+t),e;e=await fetch(t);const i=new Headers(e.headers);i.set(ee,Date.now().toString());const r=e.clone(),a=new Response(r.body,{status:r.status,statusText:r.statusText,headers:i});return(await caches.open("v1")).put(t,a),e}const ge="https://api.brightsky.dev/",At=1e3*60*60;let pe=new URL(ge+"current_weather"),be=new URL(ge+"weather");function ke(t){return t.replace(/-\w/g,n=>n.replace(/-/,"").toUpperCase())}async function Rt(t,n){return pe.search=new URLSearchParams({lat:t.toFixed(3),lon:n.toFixed(3),tz:"Europe/Berlin"}).toString(),Mt(await(await H(pe.toString(),9)).json())}function Tt(t=new Date){let n=-t.getTimezoneOffset(),e=n>=0?"+":"-";const i=r=>{const a=Math.floor(Math.abs(r));return(a<10?"0":"")+a};return e+i(n/60)+":"+i(n%60)}function Ct(t=new Date,n=!1){return(n?"T23:59:00":"T00:00:00")+Tt(t)}function me(t=new Date,n=!1){return new Intl.DateTimeFormat("eu").format(t).replace(/\//g,"-")+Ct(t,n)}async function It(t,n,e=3){const i=new Date,r=new Date(i.getTime()+At*24*e-10);return be.search=new URLSearchParams({lat:t.toFixed(3),lon:n.toFixed(3),days:e.toString(),date:me(i),last_date:me(r,!0)}).toString(),Zt(await(await H(be.toString(),9)).json(),t,n)}function Mt(t){const n=t.weather;return{timestamp:n.timestamp,cloudCover:n.cloud_cover,condition:n.condition,dewPoint:n.dew_point,precipitation:n.precipitation_60,pressureMsl:n.pressure_msl,relativeHumidity:n.relative_humidity,visibility:n.visibility,windDirection:n.wind_direction_10,windSpeed:n.wind_speed_10,windGustDirection:n.wind_gust_direction_10,windGustSpeed:n.wind_gust_speed_10,sunshine:n.sunshine_30,temperature:Math.round(n.temperature),icon:ke(n.icon)}}function Zt(t,n,e){const i=t.weather.map(_=>({timestamp:_.timestamp,cloudCover:_.cloud_cover,condition:_.condition,dewPoint:_.dew_point,precipitation:_.precipitation,pressureMsl:_.pressure_msl,relativeHumidity:_.relative_humidity,visibility:_.visibility,windDirection:_.wind_direction,windSpeed:_.wind_speed,windGustDirection:_.wind_gust_direction,windGustSpeed:_.wind_gust_speed,sunshine:_.sunshine,temperature:Math.round(_.temperature),icon:ke(_.icon)})),r={};i.forEach(_=>{const d=_.timestamp.split("T")[0];r[d]||(r[d]=[]),r[d].push(_)});let a={};const f=(_,d,c)=>_>=d&&_<=c,l=_=>new Date(_).getHours(),h=_=>{const d=c=>{switch(c){case"thunderstorm":case"hail":return 12;default:return 1}};return a={},_.forEach(c=>a[c.icon]=d(c.icon)+(a[c.icon]??0)),Object.entries(a).reduce((c,[w,E])=>E>c[1]?[w,E]:c,["clear-day",0])[0].replace("Night","Day")},o=_=>{let d=-1/0,c=1/0;_.forEach(E=>{E.temperature>d&&(d=E.temperature),E.temperature<c&&(c=E.temperature)});const w=d-c;return{min:{temperature:c},max:{temperature:d},dayGraph:_.map(E=>({timestamp:E.timestamp,temperature:Math.abs((E.temperature-c)/w),precipitation:Math.min(Math.pow(Math.sqrt(E.precipitation)*1.7,2),6)/6,sunniness:1-E.cloudCover/100}))}};return Object.entries(r).map(([_,d])=>{d=d.map(x=>({...x,hours:l(x.timestamp)}));const c=new Date(_),w=[],E=[],k=[],p=[],b=yt(c,n,e);return d.forEach(x=>{f(x.hours,4,22)&&w.push(x),f(x.hours,4,9)&&E.push(x),f(x.hours,10,17)&&k.push(x),f(x.hours,18,22)&&p.push(x)}),{day:c,dayLight:b,dayParts:[E,k,p].map(x=>{const u=h(x);return{icon:u,colors:St(u)}}),...o(w),data:d}})}var C={},Ot=(t,n,e,i)=>{let r=t&65535|0,a=t>>>16&65535|0,f=0;for(;e!==0;){f=e>2e3?2e3:e,e-=f;do r=r+n[i++]|0,a=a+r|0;while(--f);r%=65521,a%=65521}return r|a<<16|0};const Lt=()=>{let t,n=[];for(var e=0;e<256;e++){t=e;for(var i=0;i<8;i++)t=t&1?3988292384^t>>>1:t>>>1;n[e]=t}return n},Nt=new Uint32Array(Lt());var Pt=(t,n,e,i)=>{const r=Nt,a=i+e;t^=-1;for(let f=i;f<a;f++)t=t>>>8^r[(t^n[f])&255];return t^-1};const B=30,Ut=12;var Ft=function(n,e){let i,r,a,f,l,h,o,s,_,d,c,w,E,k,p,b,x,u,y,R,g,D,S,m;const v=n.state;i=n.next_in,S=n.input,r=i+(n.avail_in-5),a=n.next_out,m=n.output,f=a-(e-n.avail_out),l=a+(n.avail_out-257),h=v.dmax,o=v.wsize,s=v.whave,_=v.wnext,d=v.window,c=v.hold,w=v.bits,E=v.lencode,k=v.distcode,p=(1<<v.lenbits)-1,b=(1<<v.distbits)-1;e:do{w<15&&(c+=S[i++]<<w,w+=8,c+=S[i++]<<w,w+=8),x=E[c&p];t:for(;;){if(u=x>>>24,c>>>=u,w-=u,u=x>>>16&255,u===0)m[a++]=x&65535;else if(u&16){y=x&65535,u&=15,u&&(w<u&&(c+=S[i++]<<w,w+=8),y+=c&(1<<u)-1,c>>>=u,w-=u),w<15&&(c+=S[i++]<<w,w+=8,c+=S[i++]<<w,w+=8),x=k[c&b];n:for(;;){if(u=x>>>24,c>>>=u,w-=u,u=x>>>16&255,u&16){if(R=x&65535,u&=15,w<u&&(c+=S[i++]<<w,w+=8,w<u&&(c+=S[i++]<<w,w+=8)),R+=c&(1<<u)-1,R>h){n.msg="invalid distance too far back",v.mode=B;break e}if(c>>>=u,w-=u,u=a-f,R>u){if(u=R-u,u>s&&v.sane){n.msg="invalid distance too far back",v.mode=B;break e}if(g=0,D=d,_===0){if(g+=o-u,u<y){y-=u;do m[a++]=d[g++];while(--u);g=a-R,D=m}}else if(_<u){if(g+=o+_-u,u-=_,u<y){y-=u;do m[a++]=d[g++];while(--u);if(g=0,_<y){u=_,y-=u;do m[a++]=d[g++];while(--u);g=a-R,D=m}}}else if(g+=_-u,u<y){y-=u;do m[a++]=d[g++];while(--u);g=a-R,D=m}for(;y>2;)m[a++]=D[g++],m[a++]=D[g++],m[a++]=D[g++],y-=3;y&&(m[a++]=D[g++],y>1&&(m[a++]=D[g++]))}else{g=a-R;do m[a++]=m[g++],m[a++]=m[g++],m[a++]=m[g++],y-=3;while(y>2);y&&(m[a++]=m[g++],y>1&&(m[a++]=m[g++]))}}else if((u&64)==0){x=k[(x&65535)+(c&(1<<u)-1)];continue n}else{n.msg="invalid distance code",v.mode=B;break e}break}}else if((u&64)==0){x=E[(x&65535)+(c&(1<<u)-1)];continue t}else if(u&32){v.mode=Ut;break e}else{n.msg="invalid literal/length code",v.mode=B;break e}break}}while(i<r&&a<l);y=w>>3,i-=y,w-=y<<3,c&=(1<<w)-1,n.next_in=i,n.next_out=a,n.avail_in=i<r?5+(r-i):5-(i-r),n.avail_out=a<l?257+(l-a):257-(a-l),v.hold=c,v.bits=w};const P=15,ve=852,Ee=592,ye=0,te=1,Se=2,$t=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Ht=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Bt=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Xt=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var zt=(t,n,e,i,r,a,f,l)=>{const h=l.bits;let o=0,s=0,_=0,d=0,c=0,w=0,E=0,k=0,p=0,b=0,x,u,y,R,g,D=null,S=0,m;const v=new Uint16Array(P+1),N=new Uint16Array(P+1);let q=null,vt=0,Et,V,J;for(o=0;o<=P;o++)v[o]=0;for(s=0;s<i;s++)v[n[e+s]]++;for(c=h,d=P;d>=1&&v[d]===0;d--);if(c>d&&(c=d),d===0)return r[a++]=1<<24|64<<16|0,r[a++]=1<<24|64<<16|0,l.bits=1,0;for(_=1;_<d&&v[_]===0;_++);for(c<_&&(c=_),k=1,o=1;o<=P;o++)if(k<<=1,k-=v[o],k<0)return-1;if(k>0&&(t===ye||d!==1))return-1;for(N[1]=0,o=1;o<P;o++)N[o+1]=N[o]+v[o];for(s=0;s<i;s++)n[e+s]!==0&&(f[N[n[e+s]]++]=s);if(t===ye?(D=q=f,m=19):t===te?(D=$t,S-=257,q=Ht,vt-=257,m=256):(D=Bt,q=Xt,m=-1),b=0,s=0,o=_,g=a,w=c,E=0,y=-1,p=1<<c,R=p-1,t===te&&p>ve||t===Se&&p>Ee)return 1;for(;;){Et=o-E,f[s]<m?(V=0,J=f[s]):f[s]>m?(V=q[vt+f[s]],J=D[S+f[s]]):(V=32+64,J=0),x=1<<o-E,u=1<<w,_=u;do u-=x,r[g+(b>>E)+u]=Et<<24|V<<16|J|0;while(u!==0);for(x=1<<o-1;b&x;)x>>=1;if(x!==0?(b&=x-1,b+=x):b=0,s++,--v[o]==0){if(o===d)break;o=n[e+f[s]]}if(o>c&&(b&R)!==y){for(E===0&&(E=c),g+=_,w=o-E,k=1<<w;w+E<d&&(k-=v[w+E],!(k<=0));)w++,k<<=1;if(p+=1<<w,t===te&&p>ve||t===Se&&p>Ee)return 1;y=b&R,r[y]=c<<24|w<<16|g-a|0}}return b!==0&&(r[g+b]=o-E<<24|64<<16|0),l.bits=c,0},De={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const ne=Ot,I=Pt,Yt=Ft,U=zt,Gt=0,Ae=1,Re=2,{Z_FINISH:Te,Z_BLOCK:jt,Z_TREES:X,Z_OK:L,Z_STREAM_END:Wt,Z_NEED_DICT:Kt,Z_STREAM_ERROR:T,Z_DATA_ERROR:Ce,Z_MEM_ERROR:Ie,Z_BUF_ERROR:qt,Z_DEFLATED:Me}=De,Ze=1,Oe=2,Le=3,Ne=4,Pe=5,Ue=6,Fe=7,$e=8,He=9,Be=10,z=11,M=12,ie=13,Xe=14,ae=15,ze=16,Ye=17,Ge=18,je=19,Y=20,G=21,We=22,Ke=23,qe=24,Ve=25,Je=26,re=27,Qe=28,et=29,A=30,tt=31,Vt=32,Jt=852,Qt=592,en=15,nt=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function tn(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const it=t=>{if(!t||!t.state)return T;const n=t.state;return t.total_in=t.total_out=n.total=0,t.msg="",n.wrap&&(t.adler=n.wrap&1),n.mode=Ze,n.last=0,n.havedict=0,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new Int32Array(Jt),n.distcode=n.distdyn=new Int32Array(Qt),n.sane=1,n.back=-1,L},at=t=>{if(!t||!t.state)return T;const n=t.state;return n.wsize=0,n.whave=0,n.wnext=0,it(t)},rt=(t,n)=>{let e;if(!t||!t.state)return T;const i=t.state;return n<0?(e=0,n=-n):(e=(n>>4)+1,n<48&&(n&=15)),n&&(n<8||n>15)?T:(i.window!==null&&i.wbits!==n&&(i.window=null),i.wrap=e,i.wbits=n,at(t))},ot=(t,n)=>{if(!t)return T;const e=new tn;t.state=e,e.window=null;const i=rt(t,n);return i!==L&&(t.state=null),i},nn=t=>ot(t,en);let st=!0,oe,se;const an=t=>{if(st){oe=new Int32Array(512),se=new Int32Array(32);let n=0;for(;n<144;)t.lens[n++]=8;for(;n<256;)t.lens[n++]=9;for(;n<280;)t.lens[n++]=7;for(;n<288;)t.lens[n++]=8;for(U(Ae,t.lens,0,288,oe,0,t.work,{bits:9}),n=0;n<32;)t.lens[n++]=5;U(Re,t.lens,0,32,se,0,t.work,{bits:5}),st=!1}t.lencode=oe,t.lenbits=9,t.distcode=se,t.distbits=5},lt=(t,n,e,i)=>{let r;const a=t.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),i>=a.wsize?(a.window.set(n.subarray(e-a.wsize,e),0),a.wnext=0,a.whave=a.wsize):(r=a.wsize-a.wnext,r>i&&(r=i),a.window.set(n.subarray(e-i,e-i+r),a.wnext),i-=r,i?(a.window.set(n.subarray(e-i,e),0),a.wnext=i,a.whave=a.wsize):(a.wnext+=r,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=r))),0},rn=(t,n)=>{let e,i,r,a,f,l,h,o,s,_,d,c,w,E,k=0,p,b,x,u,y,R,g,D;const S=new Uint8Array(4);let m,v;const N=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!t||!t.state||!t.output||!t.input&&t.avail_in!==0)return T;e=t.state,e.mode===M&&(e.mode=ie),f=t.next_out,r=t.output,h=t.avail_out,a=t.next_in,i=t.input,l=t.avail_in,o=e.hold,s=e.bits,_=l,d=h,D=L;e:for(;;)switch(e.mode){case Ze:if(e.wrap===0){e.mode=ie;break}for(;s<16;){if(l===0)break e;l--,o+=i[a++]<<s,s+=8}if(e.wrap&2&&o===35615){e.check=0,S[0]=o&255,S[1]=o>>>8&255,e.check=I(e.check,S,2,0),o=0,s=0,e.mode=Oe;break}if(e.flags=0,e.head&&(e.head.done=!1),!(e.wrap&1)||(((o&255)<<8)+(o>>8))%31){t.msg="incorrect header check",e.mode=A;break}if((o&15)!==Me){t.msg="unknown compression method",e.mode=A;break}if(o>>>=4,s-=4,g=(o&15)+8,e.wbits===0)e.wbits=g;else if(g>e.wbits){t.msg="invalid window size",e.mode=A;break}e.dmax=1<<e.wbits,t.adler=e.check=1,e.mode=o&512?Be:M,o=0,s=0;break;case Oe:for(;s<16;){if(l===0)break e;l--,o+=i[a++]<<s,s+=8}if(e.flags=o,(e.flags&255)!==Me){t.msg="unknown compression method",e.mode=A;break}if(e.flags&57344){t.msg="unknown header flags set",e.mode=A;break}e.head&&(e.head.text=o>>8&1),e.flags&512&&(S[0]=o&255,S[1]=o>>>8&255,e.check=I(e.check,S,2,0)),o=0,s=0,e.mode=Le;case Le:for(;s<32;){if(l===0)break e;l--,o+=i[a++]<<s,s+=8}e.head&&(e.head.time=o),e.flags&512&&(S[0]=o&255,S[1]=o>>>8&255,S[2]=o>>>16&255,S[3]=o>>>24&255,e.check=I(e.check,S,4,0)),o=0,s=0,e.mode=Ne;case Ne:for(;s<16;){if(l===0)break e;l--,o+=i[a++]<<s,s+=8}e.head&&(e.head.xflags=o&255,e.head.os=o>>8),e.flags&512&&(S[0]=o&255,S[1]=o>>>8&255,e.check=I(e.check,S,2,0)),o=0,s=0,e.mode=Pe;case Pe:if(e.flags&1024){for(;s<16;){if(l===0)break e;l--,o+=i[a++]<<s,s+=8}e.length=o,e.head&&(e.head.extra_len=o),e.flags&512&&(S[0]=o&255,S[1]=o>>>8&255,e.check=I(e.check,S,2,0)),o=0,s=0}else e.head&&(e.head.extra=null);e.mode=Ue;case Ue:if(e.flags&1024&&(c=e.length,c>l&&(c=l),c&&(e.head&&(g=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Uint8Array(e.head.extra_len)),e.head.extra.set(i.subarray(a,a+c),g)),e.flags&512&&(e.check=I(e.check,i,c,a)),l-=c,a+=c,e.length-=c),e.length))break e;e.length=0,e.mode=Fe;case Fe:if(e.flags&2048){if(l===0)break e;c=0;do g=i[a+c++],e.head&&g&&e.length<65536&&(e.head.name+=String.fromCharCode(g));while(g&&c<l);if(e.flags&512&&(e.check=I(e.check,i,c,a)),l-=c,a+=c,g)break e}else e.head&&(e.head.name=null);e.length=0,e.mode=$e;case $e:if(e.flags&4096){if(l===0)break e;c=0;do g=i[a+c++],e.head&&g&&e.length<65536&&(e.head.comment+=String.fromCharCode(g));while(g&&c<l);if(e.flags&512&&(e.check=I(e.check,i,c,a)),l-=c,a+=c,g)break e}else e.head&&(e.head.comment=null);e.mode=He;case He:if(e.flags&512){for(;s<16;){if(l===0)break e;l--,o+=i[a++]<<s,s+=8}if(o!==(e.check&65535)){t.msg="header crc mismatch",e.mode=A;break}o=0,s=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),t.adler=e.check=0,e.mode=M;break;case Be:for(;s<32;){if(l===0)break e;l--,o+=i[a++]<<s,s+=8}t.adler=e.check=nt(o),o=0,s=0,e.mode=z;case z:if(e.havedict===0)return t.next_out=f,t.avail_out=h,t.next_in=a,t.avail_in=l,e.hold=o,e.bits=s,Kt;t.adler=e.check=1,e.mode=M;case M:if(n===jt||n===X)break e;case ie:if(e.last){o>>>=s&7,s-=s&7,e.mode=re;break}for(;s<3;){if(l===0)break e;l--,o+=i[a++]<<s,s+=8}switch(e.last=o&1,o>>>=1,s-=1,o&3){case 0:e.mode=Xe;break;case 1:if(an(e),e.mode=Y,n===X){o>>>=2,s-=2;break e}break;case 2:e.mode=Ye;break;case 3:t.msg="invalid block type",e.mode=A}o>>>=2,s-=2;break;case Xe:for(o>>>=s&7,s-=s&7;s<32;){if(l===0)break e;l--,o+=i[a++]<<s,s+=8}if((o&65535)!=(o>>>16^65535)){t.msg="invalid stored block lengths",e.mode=A;break}if(e.length=o&65535,o=0,s=0,e.mode=ae,n===X)break e;case ae:e.mode=ze;case ze:if(c=e.length,c){if(c>l&&(c=l),c>h&&(c=h),c===0)break e;r.set(i.subarray(a,a+c),f),l-=c,a+=c,h-=c,f+=c,e.length-=c;break}e.mode=M;break;case Ye:for(;s<14;){if(l===0)break e;l--,o+=i[a++]<<s,s+=8}if(e.nlen=(o&31)+257,o>>>=5,s-=5,e.ndist=(o&31)+1,o>>>=5,s-=5,e.ncode=(o&15)+4,o>>>=4,s-=4,e.nlen>286||e.ndist>30){t.msg="too many length or distance symbols",e.mode=A;break}e.have=0,e.mode=Ge;case Ge:for(;e.have<e.ncode;){for(;s<3;){if(l===0)break e;l--,o+=i[a++]<<s,s+=8}e.lens[N[e.have++]]=o&7,o>>>=3,s-=3}for(;e.have<19;)e.lens[N[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,m={bits:e.lenbits},D=U(Gt,e.lens,0,19,e.lencode,0,e.work,m),e.lenbits=m.bits,D){t.msg="invalid code lengths set",e.mode=A;break}e.have=0,e.mode=je;case je:for(;e.have<e.nlen+e.ndist;){for(;k=e.lencode[o&(1<<e.lenbits)-1],p=k>>>24,b=k>>>16&255,x=k&65535,!(p<=s);){if(l===0)break e;l--,o+=i[a++]<<s,s+=8}if(x<16)o>>>=p,s-=p,e.lens[e.have++]=x;else{if(x===16){for(v=p+2;s<v;){if(l===0)break e;l--,o+=i[a++]<<s,s+=8}if(o>>>=p,s-=p,e.have===0){t.msg="invalid bit length repeat",e.mode=A;break}g=e.lens[e.have-1],c=3+(o&3),o>>>=2,s-=2}else if(x===17){for(v=p+3;s<v;){if(l===0)break e;l--,o+=i[a++]<<s,s+=8}o>>>=p,s-=p,g=0,c=3+(o&7),o>>>=3,s-=3}else{for(v=p+7;s<v;){if(l===0)break e;l--,o+=i[a++]<<s,s+=8}o>>>=p,s-=p,g=0,c=11+(o&127),o>>>=7,s-=7}if(e.have+c>e.nlen+e.ndist){t.msg="invalid bit length repeat",e.mode=A;break}for(;c--;)e.lens[e.have++]=g}}if(e.mode===A)break;if(e.lens[256]===0){t.msg="invalid code -- missing end-of-block",e.mode=A;break}if(e.lenbits=9,m={bits:e.lenbits},D=U(Ae,e.lens,0,e.nlen,e.lencode,0,e.work,m),e.lenbits=m.bits,D){t.msg="invalid literal/lengths set",e.mode=A;break}if(e.distbits=6,e.distcode=e.distdyn,m={bits:e.distbits},D=U(Re,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,m),e.distbits=m.bits,D){t.msg="invalid distances set",e.mode=A;break}if(e.mode=Y,n===X)break e;case Y:e.mode=G;case G:if(l>=6&&h>=258){t.next_out=f,t.avail_out=h,t.next_in=a,t.avail_in=l,e.hold=o,e.bits=s,Yt(t,d),f=t.next_out,r=t.output,h=t.avail_out,a=t.next_in,i=t.input,l=t.avail_in,o=e.hold,s=e.bits,e.mode===M&&(e.back=-1);break}for(e.back=0;k=e.lencode[o&(1<<e.lenbits)-1],p=k>>>24,b=k>>>16&255,x=k&65535,!(p<=s);){if(l===0)break e;l--,o+=i[a++]<<s,s+=8}if(b&&(b&240)==0){for(u=p,y=b,R=x;k=e.lencode[R+((o&(1<<u+y)-1)>>u)],p=k>>>24,b=k>>>16&255,x=k&65535,!(u+p<=s);){if(l===0)break e;l--,o+=i[a++]<<s,s+=8}o>>>=u,s-=u,e.back+=u}if(o>>>=p,s-=p,e.back+=p,e.length=x,b===0){e.mode=Je;break}if(b&32){e.back=-1,e.mode=M;break}if(b&64){t.msg="invalid literal/length code",e.mode=A;break}e.extra=b&15,e.mode=We;case We:if(e.extra){for(v=e.extra;s<v;){if(l===0)break e;l--,o+=i[a++]<<s,s+=8}e.length+=o&(1<<e.extra)-1,o>>>=e.extra,s-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=Ke;case Ke:for(;k=e.distcode[o&(1<<e.distbits)-1],p=k>>>24,b=k>>>16&255,x=k&65535,!(p<=s);){if(l===0)break e;l--,o+=i[a++]<<s,s+=8}if((b&240)==0){for(u=p,y=b,R=x;k=e.distcode[R+((o&(1<<u+y)-1)>>u)],p=k>>>24,b=k>>>16&255,x=k&65535,!(u+p<=s);){if(l===0)break e;l--,o+=i[a++]<<s,s+=8}o>>>=u,s-=u,e.back+=u}if(o>>>=p,s-=p,e.back+=p,b&64){t.msg="invalid distance code",e.mode=A;break}e.offset=x,e.extra=b&15,e.mode=qe;case qe:if(e.extra){for(v=e.extra;s<v;){if(l===0)break e;l--,o+=i[a++]<<s,s+=8}e.offset+=o&(1<<e.extra)-1,o>>>=e.extra,s-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){t.msg="invalid distance too far back",e.mode=A;break}e.mode=Ve;case Ve:if(h===0)break e;if(c=d-h,e.offset>c){if(c=e.offset-c,c>e.whave&&e.sane){t.msg="invalid distance too far back",e.mode=A;break}c>e.wnext?(c-=e.wnext,w=e.wsize-c):w=e.wnext-c,c>e.length&&(c=e.length),E=e.window}else E=r,w=f-e.offset,c=e.length;c>h&&(c=h),h-=c,e.length-=c;do r[f++]=E[w++];while(--c);e.length===0&&(e.mode=G);break;case Je:if(h===0)break e;r[f++]=e.length,h--,e.mode=G;break;case re:if(e.wrap){for(;s<32;){if(l===0)break e;l--,o|=i[a++]<<s,s+=8}if(d-=h,t.total_out+=d,e.total+=d,d&&(t.adler=e.check=e.flags?I(e.check,r,d,f-d):ne(e.check,r,d,f-d)),d=h,(e.flags?o:nt(o))!==e.check){t.msg="incorrect data check",e.mode=A;break}o=0,s=0}e.mode=Qe;case Qe:if(e.wrap&&e.flags){for(;s<32;){if(l===0)break e;l--,o+=i[a++]<<s,s+=8}if(o!==(e.total&4294967295)){t.msg="incorrect length check",e.mode=A;break}o=0,s=0}e.mode=et;case et:D=Wt;break e;case A:D=Ce;break e;case tt:return Ie;case Vt:default:return T}return t.next_out=f,t.avail_out=h,t.next_in=a,t.avail_in=l,e.hold=o,e.bits=s,(e.wsize||d!==t.avail_out&&e.mode<A&&(e.mode<re||n!==Te))&&lt(t,t.output,t.next_out,d-t.avail_out),_-=t.avail_in,d-=t.avail_out,t.total_in+=_,t.total_out+=d,e.total+=d,e.wrap&&d&&(t.adler=e.check=e.flags?I(e.check,r,d,t.next_out-d):ne(e.check,r,d,t.next_out-d)),t.data_type=e.bits+(e.last?64:0)+(e.mode===M?128:0)+(e.mode===Y||e.mode===ae?256:0),(_===0&&d===0||n===Te)&&D===L&&(D=qt),D},on=t=>{if(!t||!t.state)return T;let n=t.state;return n.window&&(n.window=null),t.state=null,L},sn=(t,n)=>{if(!t||!t.state)return T;const e=t.state;return(e.wrap&2)==0?T:(e.head=n,n.done=!1,L)},ln=(t,n)=>{const e=n.length;let i,r,a;return!t||!t.state||(i=t.state,i.wrap!==0&&i.mode!==z)?T:i.mode===z&&(r=1,r=ne(r,n,e,0),r!==i.check)?Ce:(a=lt(t,n,e,e),a?(i.mode=tt,Ie):(i.havedict=1,L))};C.inflateReset=at,C.inflateReset2=rt,C.inflateResetKeep=it,C.inflateInit=nn,C.inflateInit2=ot,C.inflate=rn,C.inflateEnd=on,C.inflateGetHeader=sn,C.inflateSetDictionary=ln,C.inflateInfo="pako inflate (from Nodeca project)";var le={};const fn=(t,n)=>Object.prototype.hasOwnProperty.call(t,n);le.assign=function(t){const n=Array.prototype.slice.call(arguments,1);for(;n.length;){const e=n.shift();if(!!e){if(typeof e!="object")throw new TypeError(e+"must be non-object");for(const i in e)fn(e,i)&&(t[i]=e[i])}}return t},le.flattenChunks=t=>{let n=0;for(let i=0,r=t.length;i<r;i++)n+=t[i].length;const e=new Uint8Array(n);for(let i=0,r=0,a=t.length;i<a;i++){let f=t[i];e.set(f,r),r+=f.length}return e};var j={};let ft=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{ft=!1}const F=new Uint8Array(256);for(let t=0;t<256;t++)F[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;F[254]=F[254]=1,j.string2buf=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let n,e,i,r,a,f=t.length,l=0;for(r=0;r<f;r++)e=t.charCodeAt(r),(e&64512)==55296&&r+1<f&&(i=t.charCodeAt(r+1),(i&64512)==56320&&(e=65536+(e-55296<<10)+(i-56320),r++)),l+=e<128?1:e<2048?2:e<65536?3:4;for(n=new Uint8Array(l),a=0,r=0;a<l;r++)e=t.charCodeAt(r),(e&64512)==55296&&r+1<f&&(i=t.charCodeAt(r+1),(i&64512)==56320&&(e=65536+(e-55296<<10)+(i-56320),r++)),e<128?n[a++]=e:e<2048?(n[a++]=192|e>>>6,n[a++]=128|e&63):e<65536?(n[a++]=224|e>>>12,n[a++]=128|e>>>6&63,n[a++]=128|e&63):(n[a++]=240|e>>>18,n[a++]=128|e>>>12&63,n[a++]=128|e>>>6&63,n[a++]=128|e&63);return n};const cn=(t,n)=>{if(n<65534&&t.subarray&&ft)return String.fromCharCode.apply(null,t.length===n?t:t.subarray(0,n));let e="";for(let i=0;i<n;i++)e+=String.fromCharCode(t[i]);return e};j.buf2string=(t,n)=>{const e=n||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,n));let i,r;const a=new Array(e*2);for(r=0,i=0;i<e;){let f=t[i++];if(f<128){a[r++]=f;continue}let l=F[f];if(l>4){a[r++]=65533,i+=l-1;continue}for(f&=l===2?31:l===3?15:7;l>1&&i<e;)f=f<<6|t[i++]&63,l--;if(l>1){a[r++]=65533;continue}f<65536?a[r++]=f:(f-=65536,a[r++]=55296|f>>10&1023,a[r++]=56320|f&1023)}return cn(a,r)},j.utf8border=(t,n)=>{n=n||t.length,n>t.length&&(n=t.length);let e=n-1;for(;e>=0&&(t[e]&192)==128;)e--;return e<0||e===0?n:e+F[t[e]]>n?e:n};var un={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function dn(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var hn=dn;function _n(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var wn=_n;const Z=C,ct=le,fe=j,ce=un,xn=hn,gn=wn,ut=Object.prototype.toString,{Z_NO_FLUSH:pn,Z_FINISH:bn,Z_OK:$,Z_STREAM_END:ue,Z_NEED_DICT:de,Z_STREAM_ERROR:kn,Z_DATA_ERROR:dt,Z_MEM_ERROR:mn}=De;function W(t){this.options=ct.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const n=this.options;n.raw&&n.windowBits>=0&&n.windowBits<16&&(n.windowBits=-n.windowBits,n.windowBits===0&&(n.windowBits=-15)),n.windowBits>=0&&n.windowBits<16&&!(t&&t.windowBits)&&(n.windowBits+=32),n.windowBits>15&&n.windowBits<48&&(n.windowBits&15)==0&&(n.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new xn,this.strm.avail_out=0;let e=Z.inflateInit2(this.strm,n.windowBits);if(e!==$)throw new Error(ce[e]);if(this.header=new gn,Z.inflateGetHeader(this.strm,this.header),n.dictionary&&(typeof n.dictionary=="string"?n.dictionary=fe.string2buf(n.dictionary):ut.call(n.dictionary)==="[object ArrayBuffer]"&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw&&(e=Z.inflateSetDictionary(this.strm,n.dictionary),e!==$)))throw new Error(ce[e])}W.prototype.push=function(t,n){const e=this.strm,i=this.options.chunkSize,r=this.options.dictionary;let a,f,l;if(this.ended)return!1;for(n===~~n?f=n:f=n===!0?bn:pn,ut.call(t)==="[object ArrayBuffer]"?e.input=new Uint8Array(t):e.input=t,e.next_in=0,e.avail_in=e.input.length;;){for(e.avail_out===0&&(e.output=new Uint8Array(i),e.next_out=0,e.avail_out=i),a=Z.inflate(e,f),a===de&&r&&(a=Z.inflateSetDictionary(e,r),a===$?a=Z.inflate(e,f):a===dt&&(a=de));e.avail_in>0&&a===ue&&e.state.wrap>0&&t[e.next_in]!==0;)Z.inflateReset(e),a=Z.inflate(e,f);switch(a){case kn:case dt:case de:case mn:return this.onEnd(a),this.ended=!0,!1}if(l=e.avail_out,e.next_out&&(e.avail_out===0||a===ue))if(this.options.to==="string"){let h=fe.utf8border(e.output,e.next_out),o=e.next_out-h,s=fe.buf2string(e.output,h);e.next_out=o,e.avail_out=i-o,o&&e.output.set(e.output.subarray(h,h+o),0),this.onData(s)}else this.onData(e.output.length===e.next_out?e.output:e.output.subarray(0,e.next_out));if(!(a===$&&l===0)){if(a===ue)return a=Z.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(e.avail_in===0)break}}return!0},W.prototype.onData=function(t){this.chunks.push(t)},W.prototype.onEnd=function(t){t===$&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=ct.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function vn(t,n){const e=new W(n);if(e.push(t),e.err)throw e.msg||ce[e.err];return e.result}var En=vn;const yn=Math.PI/180;function ht(t){return Math.log(Math.tan(_t(t)/2+Math.PI/4))}function _t(t){return t*yn}function Sn(t,{lon:n,lat:e}){let i=_t(n-t.lb.lon),r=ht(e)-ht(t.lb.lat);return{x:i,y:r}}function Dn({lon:t,lat:n},e){const i=.02;return t+i>=e.lb.lon&&t-i<=e.rt.lon&&n+i>=e.lb.lat&&n-i<=e.rt.lat}const An="https://wettr-service.vercel.app/api/clouds";function Rn(t){const n=[];return t.forEach(e=>{const i=e.lon_bucket,r=e.lat_bucket,a=En(Uint8Array.from(atob(e.data).split("").map(l=>l.charCodeAt(0))));let f=0;for(let l=0;l<a.length;l++){const h=a[l];if(h&128)f+=h&~128;else{const o=i+f%100/100,s=r+(f/100|0)/100,_=h/100;n.push({time:e.time,lon:o,lat:s,value:_}),f++}}}),n}function wt(t,n){const e=new Date(t);return new Date(e.setMinutes(e.getMinutes()+n))}function Tn(){const t=new Date(Date.now()-5*60*1e3).toISOString(),e=(+t.match(/:(\d\d):/)[1]/15|0)*15,i=wt(new Date(t.substring(0,13)+":00:00Z"),e);return[...Array(9)].map((r,a)=>wt(i,a*15))}async function Cn(t,n=!1){const e=await(await H(An+`?bounds=${t.lb.lon},${t.rt.lon},${t.lb.lat},${t.rt.lat}${n?"&onlyNow=true":""}`,9)).json();return Rn(e)}async function In(t,n=!1){let e=(await Cn(t,n)).filter(r=>Dn(r,t)).map(r=>({...r,projected:Sn(t,r)}));return e.sort((r,a)=>r.value-a.value),e=Array.from(new Map(e.map(r=>[`${r.time} ${r.projected.x*1e4|0} ${r.projected.y*1e4|0}`,r])).values()),{times:Tn(),clouds:e,viewBounds:t}}function K(t,n,e,i,r,a){var f=(a-n)*(e-t)-(i-n)*(r-t);return f>0?!0:!(f<0)}function Mn(t,n){var e=t[0][0],i=t[0][1],r=t[1][0],a=t[1][1],f=n[0][0],l=n[0][1],h=n[1][0],o=n[1][1];return K(e,i,f,l,h,o)!==K(r,a,f,l,h,o)&&K(e,i,r,a,f,l)!==K(e,i,r,a,h,o)}var Zn=Mn;function O(t){var n=[];t.forEach(function(e){var i=this.point2CellXY(e),r=i[0],a=i[1];n[r]===void 0&&(n[r]=[]),n[r][a]===void 0&&(n[r][a]=[]),n[r][a].push(e)},this),this.cellPoints=function(e,i){return n[e]!==void 0&&n[e][i]!==void 0?n[e][i]:[]},this.removePoint=function(e){for(var i=this.point2CellXY(e),r=n[i[0]][i[1]],a,f=0;f<r.length;f++)if(r[f][0]===e[0]&&r[f][1]===e[1]){a=f;break}return r.splice(a,1),r}}O.prototype={point2CellXY:function(t){var n=parseInt(t[0]/O.CELL_SIZE),e=parseInt(t[1]/O.CELL_SIZE);return[n,e]},rangePoints:function(t){for(var n=this.point2CellXY([t[0],t[1]]),e=this.point2CellXY([t[2],t[3]]),i=[],r=n[0];r<=e[0];r++)for(var a=n[1];a<=e[1];a++)i=i.concat(this.cellPoints(r,a));return i},addBorder2Bbox:function(t,n){return[t[0]-n*O.CELL_SIZE,t[1]-n*O.CELL_SIZE,t[2]+n*O.CELL_SIZE,t[3]+n*O.CELL_SIZE]}};function On(t){return new O(t)}O.CELL_SIZE=10;var Ln=On,Nn=Zn,Pn=Ln;function Un(t){return t.sort(function(n,e){return n[0]==e[0]?n[1]-e[1]:n[0]-e[0]})}function Fn(t){for(var n=-1/0,e=t.length-1;e>=0;e--)t[e][1]>n&&(n=t[e][1]);return n}function $n(t){for(var n=[],e=0;e<t.length;e++){for(;n.length>=2&&xt(n[n.length-2],n[n.length-1],t[e])<=0;)n.pop();n.push(t[e])}return n.pop(),n}function Hn(t){for(var n=t.reverse(),e=[],i=0;i<n.length;i++){for(;e.length>=2&&xt(e[e.length-2],e[e.length-1],n[i])<=0;)e.pop();e.push(n[i])}return e.pop(),e}function xt(t,n,e){return(n[0]-t[0])*(e[1]-t[1])-(n[1]-t[1])*(e[0]-t[0])}function he(t,n){return Math.pow(n[0]-t[0],2)+Math.pow(n[1]-t[1],2)}function gt(t,n,e){var i=[n[0]-t[0],n[1]-t[1]],r=[e[0]-t[0],e[1]-t[1]],a=he(t,n),f=he(t,e),l=i[0]*r[0]+i[1]*r[1];return l/Math.sqrt(a*f)}function pt(t,n){for(var e=0;e<n.length-1;e++){var i=[n[e],n[e+1]];if(!(t[0][0]===i[0][0]&&t[0][1]===i[0][1]||t[0][0]===i[1][0]&&t[0][1]===i[1][1])&&Nn(t,i))return!0}return!1}function Bn(t,n){var e,i,r,a;return t[0][0]<t[1][0]?(e=t[0][0]-n,i=t[1][0]+n):(e=t[1][0]-n,i=t[0][0]+n),t[0][1]<t[1][1]?(r=t[0][1]-n,a=t[1][1]+n):(r=t[1][1]-n,a=t[0][1]+n),[e,r,i,a]}function Xn(t,n,e){for(var i=null,r=kt,a=kt,f,l,h=0;h<n.length;h++)f=gt(t[0],t[1],n[h]),l=gt(t[1],t[0],n[h]),f>r&&l>a&&!pt([t[0],n[h]],e)&&!pt([t[1],n[h]],e)&&(r=f,a=l,i=n[h]);return i}function bt(t,n,e,i){for(var r,a,f,l,h,o=!1,s=0;s<t.length-1;s++)if(r=[t[s],t[s+1]],!(he(r[0],r[1])<n)){a=0,f=Yn,h=Bn(r,f);do h=i.addBorder2Bbox(h,a),f=h[2]-h[0],l=Xn(r,i.rangePoints(h),t),a++;while(l===null&&e>f);l!==null&&(t.splice(s+1,0,l),i.removePoint(l),o=!0)}return o?bt(t,n,e,i):t}function zn(t,n){var e,i,r,a,f,l=n||20;return t.length<4?t:(t=Un(t),i=$n(t),e=Hn(t),r=e.concat(i),r.push(t[0]),f=Math.max(t[t.length-1][0],Fn(r))*Gn,a=t.filter(function(h){return r.indexOf(h)<0}),bt(r,Math.pow(l,2),f,Pn(a)))}var kt=Math.cos(90/(180/Math.PI)),Yn=5,Gn=.8,jn=zn,_e={};_e.__esModule=!0;function we(t,n){return t*t+n*n}function Wn(t,n){return we(t[0]-n[0],t[1]-n[1])}function Kn(t,n,e){var i=n[0],r=n[1],a=e[0]-i,f=e[1]-r;if(a!==0||f!==0){var l=((t[0]-i)*a+(t[1]-r)*f)/we(a,f);l>1?(i=e[0],r=e[1]):l>0&&(i+=a*l,r+=f*l)}return we(t[0]-i,t[1]-r)}function qn(t,n){for(var e=t[0],i,r=[e],a=1,f=t.length;a<f;a++)i=t[a],Wn(i,e)>n&&(r.push(i),e=i);return e!==i&&r.push(i),r}function xe(t,n,e,i,r){for(var a=i,f,l=n+1;l<e;l++){var h=Kn(t[l],t[n],t[e]);h>a&&(f=l,a=h)}a>i&&(f-n>1&&xe(t,n,f,i,r),r.push(t[f]),e-f>1&&xe(t,f,e,i,r))}function Vn(t,n){var e=t.length-1,i=[t[0]];return xe(t,0,e,n,i),i.push(t[e]),i}function Jn(t,n,e){if(n===void 0&&(n=1),e===void 0&&(e=!1),t.length<=2)return t;var i=n*n;return t=e?t:qn(t,i),t=Vn(t,i),t}_e.SimplifyAP=Jn;var Qn=_e,ei=Qn.SimplifyAP;const ti="https://s3.eu-central-1.amazonaws.com/app-prod-static.warnwetter.de/v16/gemeinde_warnings_v2.json";async function ni(t){const n=await(await H(ti,19)).json();return ii(n)}function mt(t,n,e){return t.level>2&&n>e}function ii(t){const n=Date.now();let e=t.warnings.map(i=>({event:ai(i.event),description:i.description,time:{start:new Date(i.start),end:new Date(i.end)},instruction:i.instruction,level:i.level,type:i.type,regions:mt(i,i.end,n)?i.regions.map(r=>ri(r.polygon)):[],urls:i.urls})).filter(i=>mt(i,i.time.end,n));return Dt(e,(i,r)=>{const a=i.level-r.level;return a===0?i.time.start.getTime()-r.time.start.getTime():a})}function ai(t){return t.toLowerCase().replace(/(^|\s)\p{L}/gu,n=>n.toUpperCase())}function ri(t){const n={lon:100,lat:100},e={lon:0,lat:0},i=[];for(let a=0;a<t.length/2;a+=3){const f=t[a*2],l=t[a*2+1];i.push([l,f])}const r=ei(jn(i,.1),.02,!1);for(let a=0;a<r.length;a++){const[f,l]=r[a];f<n.lon?n.lon=f:f>e.lon&&(e.lon=f),l<n.lat?n.lat=l:l>e.lat&&(e.lat=l)}return{polygon:r,bounds:{lb:n,rt:e}}}onmessage=async function({data:{type:t,data:n}}){let e;switch(t){case"currentWeatherData":e=Rt(n.lat,n.lon);break;case"weatherData":e=It(n.lat,n.lon,n.days);break;case"cloudData":e=In(n.bounds,n.onlyNow);break;case"weatherWarningData":e=ni()}postMessage({type:t,data:await e})}})();
