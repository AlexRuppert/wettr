import{a0 as t}from"./index-HTPhulgc.js";class e extends Error{}function n(t){let e=5381;for(let n=0;t.length>n;n++)e=33*e^t.charCodeAt(n);return 65535&e}function i(t){return(ArrayBuffer.isView(t)?new DataView(t.buffer,t.byteOffset,2):new DataView(t,0,2)).getUint16(0,0)}const r=Math.floor,s=Math.ceil,h=(t,e,n)=>t>n?n:e>t?e:t,o=t=>0>t?s(t):r(t),a=t=>0>t?r(t):s(t),f={UInt:"uint",UInt8:"u8",UInt16:"u16",UInt32:"u32",Int:"int",Int8:"i8",Int16:"i16",Int32:"i32",Float64:"f64",Float32:"f32",Float16:"f16",BFloat16:"b16",Scalar8:"sc",UScalar8:"usc",Bool:"bl",Bools:"bls",Buffer:"buf",String:"str",JSON:"jsn",RegExp:"re",Date:"dt"},u=Object.values(f);class c{constructor(t){this.type=t}}const l=(t,e=1)=>t.reduce(((t,e)=>t<<1|e),e),p=(t,e)=>{const n=void 0===e?31-Math.clz32(t):Array.isArray(e)?e.length:e,i=Array.isArray(e)&&e.length===n?e:new Array(n);for(let r=0;n>r;r++)i[r]=!!(t&1<<n-1-r);return i},y=function(){const t=new TextEncoder;return e=>t.encode(e)}(),w=function(){const t=new TextDecoder("utf-8");return e=>t.decode(e)}(),d=function(){const t=new Float32Array(1),e=new Int32Array(t.buffer);return function(n){t[0]=n;let i=e[0],r=i>>16&32768,s=4096+(2147483647&i)|0;return 1199570944>s?947912704>s?855638016>s?r:(s=(2147483647&i)>>23,r|(8388607&i|8388608)+(8388608>>>s-102)>>126-s):r|s-939524096>>13:1199570944>(2147483647&i)?31743|r:2139095040>s?31744|r:31744|r|(8388607&i)>>13}}(),g=function(){const t=Math.pow(2,-24),e=new Float32Array(1056);for(let n=0;32>n;n++)e[n]=Math.pow(2,n-15);for(let n=0;1024>n;n++)e[n+32]=1+n/1024;return function(n){const i=32768&~n?1:-1,r=31744&n,s=1023&n;return 0===r?0===s?0*i:i*t:31744===r?0===s?i*(1/0):NaN:e[r>>10]*e[s+32]*i}}(),b=new Uint32Array(1),m=new Float32Array(b.buffer),A=536870912,I=268435456,U=4294967296,F={h(t,e){"number"!=typeof t&&(t=Number(t)),0>t&&(t=0),128>t?e.u(t):16384>t?e.$(t+32768):A>t?e.l(t+3221225472):A>t?e.u(1==t?1:0):(e.l(r(t/U)+3758096384),e.l(t>>>0))},p(t){const e=t.m();return 128&e?64&e?32&e?(t.B()-3758096384)*U+t.B():t.B()-3221225472:t.F()-32768:(t.T(),e)}},v={h:(t,e)=>e.u(t),p:t=>t.A()},B={h:(t,e)=>e.$(t),p:t=>t.F()},J={h:(t,e)=>e.l(t),p:t=>t.B()},$={h(t,e){"number"!=typeof t&&(t=Number(t)),t>=-64&&64>t?e.u(127&t):t>=-8192&&8192>t?e.$(32768+(16383&t)):t>=-268435456&&I>t?e.l(3221225472+(536870911&t)):-268435456>t||t>=I?(e.l(3758096384+(536870911&r(t/U))),e.l(t>>>0)):e.u(1==t?127:0)},p(t){let e,n=t.m();return 128&n?64&n?32&n?(e=t.B()-3758096384,e=268435456&e?3758096384|e:e,e*U+t.B()):(e=t.B()-3221225472,268435456&e?3758096384|e:e):(e=t.F()-32768,8192&e?4294950912|e:e):(t.T(),64&n?4294967168|n:n)}},L={h:(t,e)=>e.v(t),p:t=>t.U()},x={h:(t,e)=>e.I(t),p:t=>t.M()},N={h:(t,e)=>e.S(t),p:t=>t.j()},S={h:(t,e)=>e.$(function(t){return m[0]=t,b[0]>>>16}(t)),p:t=>function(t){return b[0]=t<<16,m[0]}(t.F())},T={h:(t,e)=>e.$(d(t)),p:t=>g(t.F())},E={h:(t,e)=>e.H(t),p:t=>t._()},V={h:(t,e)=>e.k(t),p:t=>t.O()},O={h:(t,e)=>e.u(function(t){return h(127+o(254*t-127),0,254)}(t)),p:t=>function(t){return h(.01*(a(.3937007874015748*(t-127))+50),0,1)}(t.A())},j={h:(t,e)=>e.u(function(t){return h(o(127*t),-127,127)+127}(t)),p:t=>function(t){return h(.01*a(.787401574803149*(t-127)),-1,1)}(t.A())},D={h:(t,e)=>$.h(t.getTime(),e),p:t=>new Date($.p(t))},M={h(t,e){F.h(t.byteLength,e),e.C(t)},p:t=>t.D(F.p(t))},C={h:(t,e)=>M.h(y(t),e),p:t=>w(M.p(t))},G={h:(t,e)=>e.u(t?1:0),p:t=>0!==t.A()},X={h(t,e){t.length>28&&(t=t.slice(0,28)),F.h(l(t),e)},p:(t,e)=>p(F.p(t),e)},k={h:(t,e)=>C.h(JSON.stringify(t),e),p:t=>JSON.parse(C.p(t))},R={h(t,e){e.u(l([t.global,t.ignoreCase,t.multiline])),C.h(t.source,e)},p(t){const[e,n,i]=p(t.A());return new RegExp(C.p(t),(e?"g":"")+(n?"i":"")+(i?"m":""))}},Z={[f.UInt]:F.h,[f.UInt8]:v.h,[f.UInt16]:B.h,[f.UInt32]:J.h,[f.Int]:$.h,[f.Int8]:L.h,[f.Int16]:x.h,[f.Int32]:N.h,[f.Float64]:V.h,[f.Float32]:E.h,[f.Float16]:T.h,[f.BFloat16]:S.h,[f.Scalar8]:j.h,[f.UScalar8]:O.h,[f.Bool]:G.h,[f.Bools]:X.h,[f.Buffer]:M.h,[f.String]:C.h,[f.JSON]:k.h,[f.RegExp]:R.h,[f.Date]:D.h},H={[f.UInt]:F.p,[f.UInt8]:v.p,[f.UInt16]:B.p,[f.UInt32]:J.p,[f.Int]:$.p,[f.Int8]:L.p,[f.Int16]:x.p,[f.Int32]:N.p,[f.Float64]:V.p,[f.Float32]:E.p,[f.Float16]:T.p,[f.BFloat16]:S.p,[f.Scalar8]:j.p,[f.UScalar8]:O.p,[f.Bool]:G.p,[f.Bools]:X.p,[f.Buffer]:M.p,[f.String]:C.p,[f.JSON]:k.p,[f.RegExp]:R.p,[f.Date]:D.p};let P=1500;class W{constructor(t){this.V=0,this.N=0,this.R="number"==typeof t;let e=t instanceof Uint8Array?t:new Uint8Array(t);this.W=e,this.J=new DataView(e.buffer,e.byteOffset,e.byteLength)}P(){return this.W.subarray(0,this.V)}q(){const t=new Uint8Array(this.V);return t.set(this.P()),t}v(t){this.G(1).setInt8(this.N,t)}I(t){this.G(2).setInt16(this.N,t,1)}S(t){this.G(4).setInt32(this.N,t,1)}u(t){this.G(1).setUint8(this.N,t)}$(t){this.G(2).setUint16(this.N,t,0)}l(t){this.G(4).setUint32(this.N,t,0)}H(t){this.G(4).setFloat32(this.N,t,1)}k(t){this.G(8).setFloat64(this.N,t,1)}C(t){this.G(t.byteLength);let e=ArrayBuffer.isView(t)?t instanceof Uint8Array?t:new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t);new Uint8Array(this.J.buffer,this.J.byteOffset+this.N,t.byteLength).set(e)}G(t){return this.V+t>this.J.byteLength&&this.K(t),this.N=this.V,this.V+=t,this.J}K(t){if(!this.R)throw new e("exceeded buffer length: "+this.J.byteLength);const n=this.J.byteLength,i=this.V+t-n,r=P-n;if(i>r)throw new e("exceeded encodingBufferMaxSize: "+P);const s=256*Math.ceil(i/256),h=n+Math.min(s,r),o=new Uint8Array(h);o.set(this.W),this.J=new DataView(o.buffer),this.W=o}}class Y{constructor(t,e){this.J=ArrayBuffer.isView(t)?new DataView(t.buffer,t.byteOffset,t.byteLength):new DataView(t),this.i=null!=e?e:0}m(){return this.J.getUint8(this.i)}T(){this.i++}A(){return this.J.getUint8(this.i++)}F(){const t=this.J.getUint16(this.i);return this.i+=2,t}B(){const t=this.J.getUint32(this.i);return this.i+=4,t}U(){return this.J.getInt8(this.i++)}M(){const t=this.J.getInt16(this.i,1);return this.i+=2,t}j(){const t=this.J.getInt32(this.i,1);return this.i+=4,t}_(){const t=this.J.getFloat32(this.i,1);return this.i+=4,t}O(){const t=this.J.getFloat64(this.i,1);return this.i+=8,t}D(t){if(this.i+t>this.J.byteLength)throw new RangeError("exceeded bytes");const e=new Uint8Array(this.J.buffer,this.J.byteOffset+this.i,t);return this.i+=t,e}}class q{constructor(t,e){if(this.L=0,"string"==typeof t&&u.includes(t))this.X=t;else{if(t instanceof c)throw new TypeError("Format cannot be optional");if(!(t instanceof Object))throw new TypeError("Format must be object or Type");if(this.X=void 0,this.Y=new Map,this.Z=Object.keys(t).map((e=>{const n=new z(e,t[e]);return this.Y.set(e,n),n})),void 0===e)this.header=n(this.f),this.tt=this.header;else if(null===e)this.header=void 0,this.tt=void 0;else{if(!function(t){return"number"==typeof t?Number.isInteger(t)&&t>=0&&65535>=t:"string"==typeof t&&2===(new TextEncoder).encode(t).byteLength}(e))throw new TypeError("Header must be 2-byte string, uint16, or null.");this.header=e,this.tt="number"==typeof e?e:function(t){return 2!==t.length?n(t):256*t.charCodeAt(0)+t.charCodeAt(1)}(e)}}}get f(){return void 0===this.rt&&(this.rt=void 0!==this.Z?`{${this.Z.map((t=>t.f)).join(",")}}`:`${this.X}`),this.rt}static et(){return q.it||(this.it=new W(P)),this.it}encodeInto(t,e){const n=new W(e);return this.L&&(t=this.nt(t)),this.st(t,n),n.P()}encode(t,e){return this.ot||(this.ot=q.et()),this.ot.V=0,this.L&&(t=this.nt(t)),this.st(t,this.ot),null!=e&&e?this.ot.q():this.ot.P()}decodeInto(t,e){return this.ht(new Y(t,void 0===this.header?0:2),e)}decode(t,e){return this.ht(new Y(t,void 0===this.header?0:2),e)}setTransforms(t){if(this.L=1,"function"==typeof t||Array.isArray(t)&&"function"==typeof t[0])this.ft=t;else for(const e of Object.keys(t)){const n=this.Y.get(e);if(!n)throw new TypeError(`Failed to set transforms for field '${e}'`);n.ut.setTransforms(t[e])}return this}setValidation(t){if(this.L=1,"function"==typeof t)this.ct=t;else for(const e of Object.keys(t)){const n=this.Y.get(e);if(!n)throw new TypeError(`Failed to set validation function for field '${e}'`);n.ut.setValidation(t[e])}return this}st(t,e){if(void 0!==this.tt&&e.$(this.tt),void 0!==this.X){const n=this.ct||this.ft?this.nt(t):t;return Z[this.X](n,e)}if("object"!=typeof t||!t)throw new TypeError("expected object type");for(const n of this.Z){const i=t[n.dt];if(n.$t){if(null==i){G.h(0,e);continue}G.h(1,e)}else if(null==i)throw new Error(`missing required value: ${n.dt}`);n.lt?this.wt(i,e,n.ut):n.ut.st(i,e)}}nt(t){return this.ct&&this.yt(t),"function"==typeof this.ft?this.ft(t):Array.isArray(this.ft)&&"function"==typeof this.ft[0]?this.ft[0](t):t}bt(t){return Array.isArray(this.ft)&&"function"==typeof this.ft[1]&&(t=this.ft[1](t)),this.ct&&this.yt(t),t}yt(t){if(!this.ct)return;const e=this.ct(t);if(e instanceof Error)throw e;if(0==e)throw new Error("failed validation")}ht(t,e){return this.ht=this.Bt(),this.ht(t,e)}Ft(){const t=this.Z.map((({dt:t},e)=>`v.${t}=this.${this.Tt.name}(${e},s,v.${t})`)).join(";");return`let v=o??{};${t};return v;`}Tt(t,e,n){const i=this.Z[t];if(!i.$t||G.p(e))return i.lt?this.At(i.ut,e,n):i.ut.ht(e,n)}Bt(){return void 0!==this.X?this.L?t=>this.bt(H[this.X](t)):H[this.X]:new Function("s","o",this.Ft())}wt(t,e,n){if(!Array.isArray(t))throw new TypeError(`expected array, instead got: ${t}`);F.h(t.length,e);for(let i=0;t.length>i;i++)n.st(t[i],e)}At(t,e,n){const i=F.p(e),r=(null==n?void 0:n.length)===i?n:new Array(i);for(let s=0;r.length>s;s++)r[s]=t.ht(e,null==n?void 0:n[s]);return r}}q.peekHeader=i,q.peekHeaderStr=function(t){return function(t){return String.fromCharCode(Math.floor(t/256))+String.fromCharCode(t%256)}(i(t))};class z{constructor(t,e){this.$t=e instanceof c;let n=e instanceof c?e.type:e;if(this.dt=t,Array.isArray(n)){if(1!==n.length)throw new TypeError("Array type must contain exactly one format");n=n[0],this.lt=1}else this.lt=0;this.ut=new q(n,null)}get f(){return void 0===this.vt&&(this.vt=`${this.ut.f}${this.lt?"[]":""}${this.$t?"?":""}`),this.vt}}const K=[{regex:/ä/g,replacement:"a"},{regex:/ö/g,replacement:"o"},{regex:/ü/g,replacement:"u"},{regex:/ß/g,replacement:"ss"}],_=async()=>{const e=function(t){return null!==t?new q(t):new q(void 0,t)}({minLat:f.UInt32,minLon:f.UInt32,lons:[f.UInt16],lats:[f.UInt16],names:f.String}),n=await(await t("/wettr/assets/locations.bin-L-4Jti90.json",10080)).arrayBuffer(),i=e.decode(n),r=[],s=i.names.split("%");for(let t=0;i.lons.length>t;t++)r.push({name:s[t],lat:(i.lats[t]+i.minLat)/1e3,lon:(i.lons[t]+i.minLon)/1e3});return r.map((t=>{let e=t.name.toLowerCase().split(/,|(\s(bei|am|in)\s)/)[0].trim(),n=[e,K.reduce(((t,e)=>t.replaceAll(e.regex,e.replacement)),e)].join(" ");return{...t,search:n}}))};export{_ as loadLocations};
