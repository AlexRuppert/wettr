import{S as t,i as e,n,e as l,a as r,b as a,l as s,c as o,d as i,f as c,g as u,t as d,s as m,m as f,h as p,j as h,k as g,o as $,p as w,q as y,r as x,u as v,v as b,w as k,x as M,y as C,z as B,A as D,B as z,C as L,D as T,E as S,F as H,G as N,H as P,I as E,J as G,K as j,L as F,M as O,N as A,O as R,P as V,Q as W,R as I,T as U,U as q,V as _,W as Y,X as K,Y as X,Z as J,_ as Q,$ as Z,a0 as tt,a1 as et,a2 as nt,a3 as lt,a4 as rt,a5 as at,a6 as st,a7 as ot,a8 as it,a9 as ct,aa as ut,ab as dt,ac as mt}from"./vendor.510734fa.js";function ft(t){let e,n,d,m,f;return{c(){e=l("button"),e.textContent="Als App installieren",r(e,"class","border border-solid rounded-md border-gray-400 mb-4 p-2 text-gray-800 inline-block dark:bg-dark-400 dark:text-gray-300 null")},m(n,l){a(n,e,l),d=!0,m||(f=s(e,"click",t[2]),m=!0)},p:o,i(t){d||(i((()=>{n||(n=c(e,v,{},!0)),n.run(1)})),d=!0)},o(t){n||(n=c(e,v,{},!1)),n.run(0),d=!1},d(t){t&&u(e),t&&n&&n.end(),m=!1,f()}}}function pt(t){let e,n,h,g,$,w,y,x,v,k,M,C,B,D;return{c(){e=l("div"),n=l("div"),h=d("Zum "),g=l("strong"),g.textContent="Home Screen",$=d(" hinzufügen: "),w=l("span"),w.innerHTML='<svg viewBox="0 0 22 22" stroke="#0a67c9" stroke-width="2" fill="transparent" width="100%" height="100%" stroke-linecap="round" class="null"><path d="M8,7H7a2,2 0 0,0 -2,2V16a2,2 0 0,0 2,2H14a2,2 0 0,0 2,-2V9a2,2 0 0,0 -2,-2H13M10.5,13V1l3,3M10.5,1l-3,3"></path></svg>',y=d("\r\n      und\r\n      "),x=l("span"),v=m("svg"),k=m("path"),r(w,"class","h-5 w-5 inline-block align-middle null"),r(k,"d",f),r(v,"viewBox","0 0 22 22"),r(v,"fill","#0a67c9"),r(v,"width","100%"),r(v,"height","100%"),r(x,"class","h-5 -mt-1 w-5 inline-block align-middle null"),r(n,"class","rounded bg-light-100 shadow-md p-2 text-dark-400 helper relative null"),r(e,"class","flex w-full right-0 bottom-1 left-0 justify-center fixed null")},m(l,r){a(l,e,r),p(e,n),p(n,h),p(n,g),p(n,$),p(n,w),p(n,y),p(n,x),p(x,v),p(v,k),C=!0,B||(D=s(n,"click",t[3]),B=!0)},p:o,i(t){C||(i((()=>{M||(M=c(e,b,{},!0)),M.run(1)})),C=!0)},o(t){M||(M=c(e,b,{},!1)),M.run(0),C=!1},d(t){t&&u(e),t&&M&&M.end(),B=!1,D()}}}function ht(t){let e,n,l,r=t[0]&&ft(t),s=t[0]&&t[1]&&pt(t);return{c(){r&&r.c(),e=h(),s&&s.c(),n=g()},m(t,o){r&&r.m(t,o),a(t,e,o),s&&s.m(t,o),a(t,n,o),l=!0},p(t,[l]){t[0]?r?(r.p(t,l),1&l&&$(r,1)):(r=ft(t),r.c(),$(r,1),r.m(e.parentNode,e)):r&&(w(),y(r,1,1,(()=>{r=null})),x()),t[0]&&t[1]?s?(s.p(t,l),3&l&&$(s,1)):(s=pt(t),s.c(),$(s,1),s.m(n.parentNode,n)):s&&(w(),y(s,1,1,(()=>{s=null})),x())},i(t){l||($(r),$(s),l=!0)},o(t){y(r),y(s),l=!1},d(t){r&&r.d(t),t&&u(e),s&&s.d(t),t&&u(n)}}}function gt(t,e,n){let l,r=/iPad|iPhone|iPod/.test(navigator.userAgent),a=!1,s=!1,o=!1;const i="standalone"in window.navigator,c=!0===window.navigator.standalone;return window.addEventListener("beforeinstallprompt",(t=>{l=t,window.matchMedia("(display-mode: standalone)").matches||navigator.standalone||n(0,a=!0)})),window.addEventListener("appinstalled",(()=>{n(0,a=!1),o=!0})),!o&&i&&(c||(a=!0)),[a,s,async()=>{r?n(1,s=!s):(l.prompt(),"accepted"===l.userChoice.outcome&&(n(0,a=!1),o=!0))},()=>n(1,s=!1)]}!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const n of t)if("childList"===n.type)for(const t of n.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerpolicy&&(e.referrerPolicy=t.referrerpolicy),e.credentials="use-credentials"===t.crossorigin?"include":"anonymous"===t.crossorigin?"omit":"same-origin",e}(t);fetch(t.href,e)}}();class $t extends t{constructor(t){super(),e(this,t,gt,ht,n,{})}}function wt(t){let e,n,l,s,i,c,d,f,h,g,$,w,y,x,v,b,k,M,C,B;return{c(){e=m("svg"),n=m("defs"),l=m("path"),s=m("path"),i=m("path"),c=m("path"),d=m("path"),f=m("path"),h=m("path"),g=m("path"),$=m("path"),w=m("path"),y=m("path"),x=m("path"),v=m("path"),b=m("path"),k=m("use"),C=m("use"),r(l,"id","sun"),r(l,"d","M15 10.5a4.5 4.5 0 10.001 0M15 5v2m0 18v-2M5 15h2m18 0h-2M7.75 7.75l1.4 1.4m13.1 13.1l-1.4-1.4m1.4-13.1l-1.4 1.4m-13.1 13.1l1.4-1.4"),r(s,"id","moon"),r(s,"d","M15 10.5a4.5 4.5 0 104.5 4.5a4.5 4.5 0 01-4.5-4.5 "),r(i,"id","cloud-open"),r(i,"d","M7 20a4 4 0 110-8h1a4 4 0 1110-0h1.5a4 4 0 110 8"),r(c,"id","cloud"),r(c,"d","M7 20a4 4 0 110-8h1a4 4 0 1110-0h1.5a4 4 0 110 8z"),r(d,"id","sun-part"),r(d,"d","M18 7a3.8 3.8 0 116 4.5M21.5 1.2l0 1.5M27.5 8.8l1.5 0M25.8 4.6l1.1-1.1M17 4.6l-1.1-1.1M25.8 13l1.1 1.1"),r(f,"id","moon-part"),r(f,"d","M18 7a4 4 0 013.5 -2.05a3.8 3.8 0 003.7 3.5a4.2 4 0 01-1.2 3.1"),r(h,"id","cloud-part"),r(h,"d","M18.2 7.1a4 4 0 016.7 2.9h1a3.1 3 0 010 6.4h-0.2"),r(g,"id","fog"),r(g,"d","M8 13h15M10 16h16M6 19h16"),r($,"id","wind"),r($,"d","M8 13h13a2.5 2.5 0 10-2-4M6 16h17a2.5 2.5 0 11-2 4"),r(w,"id","rain"),r(w,"d","M10 20l-1 5M13.3 20l-1.4 7M16.5 20l-.8 4.2"),r(y,"id","sleet"),r(y,"d","M10 20l-.03.15m-.4 2l-.4 2M13.3 20l-.4 2m-.4 2l-.03.15m-.4 2l-.03.15M16.5 20l-.03.25m-.4 2l-.4 2"),r(x,"id","snow"),r(x,"d","M10.5 21.5l0 0m0 3l0 0M13.3 20l0 0m0 3l0 0m0 3l0 0M16 21.5l0 0m0 3l0 0"),r(v,"id","hail"),r(v,"d","M10 20l-.4 2m-.4 2l-.03.15M13.3 20l-.8 4m-.4 2l-.03.15M16.5 20l-.4 2m-.4 2l-.03.15"),r(b,"id","thunderstorm"),r(b,"stroke-width","0.3"),r(b,"d","M12.6 17h3.5l-2.5 4h1.8l-5 6.9l2-5.3h-2.5z"),r(b,"fill",t[0]),r(b,"class",null),r(k,"href",M=`#${t[1].primary}`),r(k,"stroke",t[0]),r(C,"href",B=`#${t[1].secondary}`),r(C,"stroke",t[0]),r(e,"viewBox","0 0 30 30"),r(e,"xmlns","http://www.w3.org/2000/svg"),r(e,"stroke-linejoin","round"),r(e,"stroke-linecap","round"),r(e,"fill","none"),r(e,"stroke-width","1.5"),r(e,"class",null)},m(t,r){a(t,e,r),p(e,n),p(n,l),p(n,s),p(n,i),p(n,c),p(n,d),p(n,f),p(n,h),p(n,g),p(n,$),p(n,w),p(n,y),p(n,x),p(n,v),p(n,b),p(e,k),p(e,C)},p(t,[e]){1&e&&r(b,"fill",t[0]),2&e&&M!==(M=`#${t[1].primary}`)&&r(k,"href",M),1&e&&r(k,"stroke",t[0]),2&e&&B!==(B=`#${t[1].secondary}`)&&r(C,"href",B),1&e&&r(C,"stroke",t[0])},i:o,o:o,d(t){t&&u(e)}}}const yt={clearDay:{primary:"sun",secondary:""},clearNight:{primary:"moon",secondary:""},partlyCloudyDay:{primary:"cloud",secondary:"sun-part"},partlyCloudyNight:{primary:"cloud",secondary:"moon-part"},cloudy:{primary:"cloud",secondary:"cloud-part"},fog:{primary:"fog",secondary:""},hail:{primary:"cloud-open",secondary:"hail"},rain:{primary:"cloud-open",secondary:"rain"},sleet:{primary:"cloud-open",secondary:"sleet"},snow:{primary:"cloud-open",secondary:"snow"},thunderstorm:{primary:"cloud-open",secondary:"thunderstorm"},wind:{primary:"wind",secondary:""}};function xt(t,e,n){let l,{icon:r}=e,{color:a="#444"}=e;return t.$$set=t=>{"icon"in t&&n(2,r=t.icon),"color"in t&&n(0,a=t.color)},t.$$.update=()=>{4&t.$$.dirty&&n(1,l=yt[r])},[a,l,r]}class vt extends t{constructor(t){super(),e(this,t,xt,wt,n,{icon:2,color:0})}}
/*
 * @license The Weather Icons project created and maintained by Erik Flowers. v1.0 artwork by Lukas Bischoff. v1.1 - 2.0 artwork by Erik Flowers
 * @license Weather Icons licensed under SIL OFL 1.1
 */function bt(t,e){return e?t.dark:t.light}const kt={light:"#444444",dark:"#9ca3aa"},Mt={light:"#0066ED",dark:"#2784FF"},Ct={light:"#FFB901",dark:"#FFC637"},Bt={light:"#EA580C",dark:"#EA580C"},Dt=t=>{switch(t){case"rain":case"sleet":case"hail":case"snow":case"thunderstorm":return Mt;case"clearDay":case"clearNight":case"partlyCloudyDay":case"partlyCloudyNight":return Ct;default:return kt}},zt=Math.PI/180;function Lt(t){return Math.log(Math.tan(Tt(t)/2+Math.PI/4))}function Tt(t){return t*zt}function St({lon:t,lat:e},n=8){const l=n/70;return{lb:{lat:e-l,lon:t-l},rt:{lat:e+l,lon:t+l}}}function Ht(t){if(0>=t.length)return{index:-1,time:void 0};const e=(new Date).getTime(),n=t.map((t=>t.getTime())).reduce(((t,n,l,r)=>Math.abs(n-e)<Math.abs(r[t]-e)?l:t),0);return{index:n,time:t[n]}}let Nt,Pt=0;async function Et(t=!1){Gt||(document.addEventListener("visibilitychange",(()=>Et())),document.addEventListener("pagehide",(()=>Et())),Gt=!0),setTimeout((()=>{const e=document.visibilityState;(t||"visible"===e&&Date.now()>Pt&&k(Rt))&&async function(){try{const t=k(Rt),e=k(Wt);e.postMessage({type:"currentWeatherData",data:t}),e.postMessage({type:"weatherData",data:{...t,days:6}}),e.postMessage({type:"currentCloudData",data:{bounds:St(t),onlyNow:!0}}),e.postMessage({type:"weatherWarningData",data:t})}catch(t){console.error(t)}Pt=Date.now()+6e5,clearTimeout(Nt),Nt=setTimeout(Et,6e5)}()}),0)}let Gt=!1;async function jt(t,e=1e6){let n=await caches.match(t);if(n&&n.headers.get("x--cache-timestamp")&&+n.headers.get("x--cache-timestamp")+6e4*e>Date.now())return console.log("cached "+t),n;n=await fetch(t);const l=new Headers(n.headers);l.set("x--cache-timestamp",Date.now().toString());const r=n.clone(),a=new Response(r.body,{status:r.status,statusText:r.statusText,headers:l});return(await caches.open("v1")).put(t,a),n}const Ft=(async()=>(await(await jt("/wettr/assets/locations.f4d31e90.json",1440)).json()).map((t=>({...t,search:t.name.split(/,|(\s(bei|am|in)\s)/)[0].trim().toLowerCase()}))))();async function Ot(t){let e="",n=1/0;for(let a of await Ft){const s=(l=t.lon,r=+a.lon,Math.pow(t.lat-+a.lat,2)+Math.pow(l-r,2));n>s&&(n=s,e=a.name)}var l,r;return e}function At({lat:t,lon:e}){return void 0!==t&&void 0!==e&&0!==t&&0!==e}const Rt=M({lat:0,lon:0}),Vt=new function(){return new Worker("/wettr/assets/worker.ccbc7883.js",{type:"module"})};Vt.onmessage=function({data:{type:t,data:e}}){switch(t){case"currentWeatherData":qt.set(e);break;case"weatherData":_t.set(e);break;case"cloudData":Xt.set(e);break;case"currentCloudData":Kt.set(e);break;case"weatherWarningData":Yt.set(e)}};const Wt=C(Vt),It=M(!1),Ut=M(!1),qt=M({}),_t=M([]),Yt=M([]),Kt=M({times:[],clouds:[],viewBounds:{}}),Xt=M({times:[],clouds:[],viewBounds:{}});function Jt(t){let e,n,l;return{c(){e=m("svg"),n=m("path"),r(n,"d",t[0]),r(e,"viewBox",l="0 0 "+t[2]+" "+t[2]),r(e,"fill",t[1]),r(e,"width","100%"),r(e,"height","100%")},m(t,l){a(t,e,l),p(e,n)},p(t,[a]){1&a&&r(n,"d",t[0]),4&a&&l!==(l="0 0 "+t[2]+" "+t[2])&&r(e,"viewBox",l),2&a&&r(e,"fill",t[1])},i:o,o:o,d(t){t&&u(e)}}}function Qt(t,e,n){let{d:l}=e,{fill:r=null}=e,a="#444";It.subscribe((t=>{n(4,a=bt(kt,t))}));let s=a,o=5;return t.$$set=t=>{"d"in t&&n(0,l=t.d),"fill"in t&&n(3,r=t.fill)},t.$$.update=()=>{24&t.$$.dirty&&n(1,s=null!=r?r:a),1&t.$$.dirty&&l&&n(2,o=l.endsWith("z")?30:24)},[l,s,o,r,a]}Rt.subscribe((async({lat:t,lon:e})=>{At({lat:t,lon:e})&&Et(!0)}));class Zt extends t{constructor(t){super(),e(this,t,Qt,Jt,n,{d:0,fill:3})}}function te(t){let e,n,s;return n=new Zt({props:{d:"M15 6.315l5.032 15.487L15 17.581l-5.032 4.221L15 6.315z",fill:t[1]}}),{c(){e=l("div"),B(n.$$.fragment),r(e,"class","outlined-path"),D(e,"transform","rotate("+t[0]+"deg)"),D(e,"transform-origin","center")},m(t,l){a(t,e,l),z(n,e,null),s=!0},p(t,[l]){const r={};2&l&&(r.fill=t[1]),n.$set(r),(!s||1&l)&&D(e,"transform","rotate("+t[0]+"deg)")},i(t){s||($(n.$$.fragment,t),s=!0)},o(t){y(n.$$.fragment,t),s=!1},d(t){t&&u(e),L(n)}}}function ee(t,e,n){let{direction:l=0}=e,{color:r}=e;return t.$$set=t=>{"direction"in t&&n(0,l=t.direction),"color"in t&&n(1,r=t.color)},[l,r]}class ne extends t{constructor(t){super(),e(this,t,ee,te,n,{direction:0,color:1})}}function le(t,e){const n=e.toISOString();return t.filter((t=>t.time===n))}let re=[];function ae(t,e,n,l,r){t.fillStyle=r,t.beginPath(),t.arc(e,n,l,0,2*Math.PI),t.closePath(),t.fill()}function se(t,e=!0,n=(()=>{})){t.clearRect(0,0,t.canvas.width,t.canvas.height),t.globalCompositeOperation="darken",t.save(),function(t,e){e&&(function(t,e,n,l,r,a){t.beginPath(),t.moveTo(30,0),t.lineTo(0+l-a,0),t.quadraticCurveTo(0+l,0,0+l,30),t.lineTo(0+l,0+r-a),t.quadraticCurveTo(0+l,0+r,0+l-a,0+r),t.lineTo(30,0+r),t.quadraticCurveTo(0,0+r,0,0+r-a),t.lineTo(0,30),t.quadraticCurveTo(0,0,30,0),t.closePath()}(t,0,0,t.canvas.width,t.canvas.height,30),t.clip())}(t,e),n(),t.restore()}function oe(t){let e,n;return{c(){e=l("canvas"),r(e,"class","h-full w-full opacity-70 inset-0 z-10 absolute null"),i((()=>t[7].call(e)))},m(l,r){a(l,e,r),n=T(e,t[7].bind(e)),t[8](e)},p:o,i:o,o:o,d(l){l&&u(e),n(),t[8](null)}}}function ie(t,e,n){let l,r,a,s;S(t,It,(t=>n(6,l=t)));let o=!1,{clouds:i}=e,{viewBounds:c}=e,{mini:u=!1}=e;function d(){!function(t,e="#fff",n="#fff",l=3){t.globalCompositeOperation="source-over",ae(t,t.canvas.width/2,t.canvas.height/2,2*l,e),ae(t,t.canvas.width/2,t.canvas.height/2,l,n)}(s,u?"transparent":"#a30",u?"transparent":bt(Ct,l),6)}async function m(t,e){!function(t,e,n,l=!1){const r=function(t){const{x:e,y:n}=function(t,{lon:e,lat:n}){return{x:Tt(e-t.lb.lon),y:Lt(n)-Lt(t.lb.lat)}}(t,t.rt);return{x:1/e,y:1/n}}(e),a=function(t,e){return e.canvas.height/(34.8*(t.rt.lat-t.lb.lat))}(e,n)/2+(l?1.5:0);se(n,l,(()=>{for(const e of t)ae(n,e.projected.x*n.canvas.width*r.x|0,e.projected.y*n.canvas.height*r.y|0,0|a,re[100*e.value])}))}(t,e,s,u),d()}return H((async()=>{await N(),n(5,o=!0),s=function(t,e){t.width=3*e,t.height=3*e;const n=t.getContext("2d",{alpha:!1});return n.translate(0,n.canvas.height),n.scale(1,-1),function(){for(let e=0;100>=e;e++)re.push(`hsla(${200+80*(t=e/100)},${80+20*t}%,58%,1`);var t}(),n}(a,r),se(s),d()})),t.$$set=t=>{"clouds"in t&&n(2,i=t.clouds),"viewBounds"in t&&n(3,c=t.viewBounds),"mini"in t&&n(4,u=t.mini)},t.$$.update=()=>{108&t.$$.dirty&&i&&(null==c?void 0:c.lb)&&(o?m(i,c):setTimeout((()=>{m(i,c)}),2e3))},[r,a,i,c,u,o,l,function(){r=this.clientWidth,n(0,r)},function(t){P[t?"unshift":"push"]((()=>{a=t,n(1,a)}))}]}class ce extends t{constructor(t){super(),e(this,t,ie,oe,n,{clouds:2,viewBounds:3,mini:4})}}function ue(t){let e,n,o,d,m,f;return n=new ce({props:{clouds:t[0],viewBounds:t[1],mini:!0}}),{c(){e=l("div"),B(n.$$.fragment),r(e,"class","rounded-md cursor-pointer h-full w-full relative clickable null")},m(l,r){a(l,e,r),z(n,e,null),d=!0,m||(f=s(e,"click",t[4]),m=!0)},p(t,[e]){const l={};1&e&&(l.clouds=t[0]),2&e&&(l.viewBounds=t[1]),n.$set(l)},i(t){d||($(n.$$.fragment,t),i((()=>{o||(o=c(e,v,{},!0)),o.run(1)})),d=!0)},o(t){y(n.$$.fragment,t),o||(o=c(e,v,{},!1)),o.run(0),d=!1},d(t){t&&u(e),L(n),t&&o&&o.end(),m=!1,f()}}}function de(t,e,n){let l,r,a,s;return S(t,Kt,(t=>n(3,l=t))),S(t,Ut,(t=>n(2,r=t))),t.$$.update=()=>{8&t.$$.dirty&&l.times.length>0&&(n(1,s=l.viewBounds),n(0,a=le(l.clouds,Ht(l.times).time)))},[a,s,r,l,()=>E(Ut,r=!0,r)]}class me extends t{constructor(t){super(),e(this,t,de,ue,n,{})}}function fe(t){let e,n,s,o,m,f,g,k,M,C,D,T,S,H,N,P,E,G=xe(t[0].windSpeed)+"";n=new me({}),k=new ne({props:{direction:t[0].windDirection}});let F=t[0].precipitation>.5&&pe(t);return{c(){e=l("div"),B(n.$$.fragment),o=h(),m=l("div"),f=l("div"),g=l("div"),B(k.$$.fragment),C=h(),D=l("div"),T=d(G),S=h(),H=l("span"),H.innerHTML="<sup>km</sup>/<sub>h</sub>",P=h(),F&&F.c(),r(e,"class","inset-0 absolute null"),r(g,"class","h-full -mt-[0.30rem] -ml-[0.10rem] w-full  null"),r(f,"class","h-7 -mt-3 text-shadow-xs -ml-3 top-1/2 left-1/2 w-7 null"),r(H,"class","text-xs text-size-[0.5rem] null"),r(D,"class","right-1 bottom-2 null"),r(m,"class","inset-0 absolute pointer-events-none children:z-10 children:absolute children:pointer-events-none  null")},m(t,l){a(t,e,l),z(n,e,null),a(t,o,l),a(t,m,l),p(m,f),p(f,g),z(k,g,null),p(m,C),p(m,D),p(D,T),p(D,S),p(D,H),p(m,P),F&&F.m(m,null),E=!0},p(e,n){t=e;const l={};1&n&&(l.direction=t[0].windDirection),k.$set(l),(!E||1&n)&&G!==(G=xe(t[0].windSpeed)+"")&&j(T,G),t[0].precipitation>.5?F?(F.p(t,n),1&n&&$(F,1)):(F=pe(t),F.c(),$(F,1),F.m(m,null)):F&&(w(),y(F,1,1,(()=>{F=null})),x())},i(t){E||($(n.$$.fragment,t),i((()=>{s||(s=c(e,v,{duration:ye},!0)),s.run(1)})),$(k.$$.fragment,t),i((()=>{M||(M=c(f,b,{duration:ye},!0)),M.run(1)})),i((()=>{N||(N=c(D,b,{duration:ye},!0)),N.run(1)})),$(F),E=!0)},o(t){y(n.$$.fragment,t),s||(s=c(e,v,{duration:ye},!1)),s.run(0),y(k.$$.fragment,t),M||(M=c(f,b,{duration:ye},!1)),M.run(0),N||(N=c(D,b,{duration:ye},!1)),N.run(0),y(F),E=!1},d(t){t&&u(e),L(n),t&&s&&s.end(),t&&u(o),t&&u(m),L(k),t&&M&&M.end(),t&&N&&N.end(),F&&F.d()}}}function pe(t){let e,n,s,o,m,f,h=xe(t[0].precipitation,t[0].precipitation%1===t[0].precipitation?0:1)+"";return{c(){e=l("div"),n=l("span"),s=d(h),o=l("span"),o.innerHTML="<sup>mm</sup>/<sub>h</sub>",r(o,"class","pl-1 text-size-[0.5rem] null"),r(e,"class","flex bottom-2 left-1 null")},m(t,l){a(t,e,l),p(e,n),p(n,s),p(n,o),f=!0},p(e,n){t=e,(!f||1&n)&&h!==(h=xe(t[0].precipitation,t[0].precipitation%1===t[0].precipitation?0:1)+"")&&j(s,h)},i(t){f||(i((()=>{m||(m=c(e,b,{duration:ye},!0)),m.run(1)})),f=!0)},o(t){m||(m=c(e,b,{duration:ye},!1)),m.run(0),f=!1},d(t){t&&u(e),t&&m&&m.end()}}}function he(t){let e,n,l=t[0].icon,r=ge(t);return{c(){r.c(),e=g()},m(t,l){r.m(t,l),a(t,e,l),n=!0},p(t,n){1&n&&G(l,l=t[0].icon)?(w(),y(r,1,1,o),x(),r=ge(t),r.c(),$(r),r.m(e.parentNode,e)):r.p(t,n)},i(t){n||($(r),n=!0)},o(t){y(r),n=!1},d(t){t&&u(e),r.d(t)}}}function ge(t){let e,n,s,o;return n=new vt({props:{icon:t[0].icon,color:bt(Dt(t[0].icon),t[1])}}),{c(){e=l("div"),B(n.$$.fragment),r(e,"class","inset-2 absolute null")},m(t,l){a(t,e,l),z(n,e,null),o=!0},p(e,l){t=e;const r={};1&l&&(r.icon=t[0].icon),3&l&&(r.color=bt(Dt(t[0].icon),t[1])),n.$set(r)},i(t){o||($(n.$$.fragment,t),i((()=>{s||(s=c(e,b,{duration:ye},!0)),s.run(1)})),o=!0)},o(t){y(n.$$.fragment,t),s||(s=c(e,b,{duration:ye},!1)),s.run(0),o=!1},d(t){t&&u(e),L(n),t&&s&&s.end()}}}function $e(t){let e,n,s,o,m,f,g,w,x,v,k,M,C,D,T,S,H,N,P,E=Math.abs(t[0].temperature)+"",G=t[0].relativeHumidity+"";return M=new Zt({props:{d:"M7.56 17.19c0-.88.24-1.89.72-3.03s1.1-2.25 1.86-3.31c1.56-2.06 2.92-3.62 4.06-4.67l.75-.72c.25.26.53.5.83.72.41.42 1.04 1.11 1.88 2.09s1.57 1.85 2.17 2.65c.71 1.01 1.32 2.1 1.81 3.25s.74 2.16.74 3.03c0 1-.19 1.95-.58 2.86-.39.91-.91 1.7-1.57 2.36-.66.66-1.45 1.19-2.37 1.58-.92.39-1.89.59-2.91.59-1 0-1.95-.19-2.86-.57-.91-.38-1.7-.89-2.36-1.55-.66-.65-1.19-1.44-1.58-2.35s-.59-1.89-.59-2.93zm2.26-2.93c0 .83.17 1.49.52 1.99.35.49.88.74 1.59.74.72 0 1.25-.25 1.61-.74.35-.49.53-1.15.54-1.99-.01-.84-.19-1.5-.54-2-.35-.49-.89-.74-1.61-.74-.71 0-1.24.25-1.59.74-.35.5-.52 1.16-.52 2zm1.57 0v-.35c0-.08.01-.19.02-.33s.02-.25.05-.32.05-.16.09-.24c.04-.08.09-.15.15-.18.07-.04.14-.06.23-.06.14 0 .25.04.33.12s.14.21.17.38c.03.18.05.32.06.45s.01.3.01.52c0 .23 0 .4-.01.52s-.03.27-.06.45c-.03.17-.09.3-.17.38s-.19.12-.33.12c-.09 0-.16-.02-.23-.06a.335.335 0 01-.15-.18c-.04-.08-.07-.17-.09-.24-.02-.08-.04-.19-.05-.32-.01-.14-.02-.25-.02-.32v-.34zm.59 7.75h1.32l4.99-10.74h-1.35l-4.96 10.74zm4.3-2.99c.01.84.2 1.5.55 2 .35.49.89.74 1.6.74.72 0 1.25-.25 1.6-.74.35-.49.52-1.16.53-2-.01-.84-.18-1.5-.53-1.99-.35-.49-.88-.74-1.6-.74-.71 0-1.25.25-1.6.74-.36.49-.54 1.15-.55 1.99zm1.57 0c0-.23 0-.4.01-.52s.03-.27.06-.45.09-.3.17-.38.19-.12.33-.12c.09 0 .17.02.24.06.07.04.12.1.16.19.04.09.07.17.1.24s.04.18.05.32l.01.32v.69l-.01.32-.05.32-.1.24-.16.19-.24.06c-.14 0-.25-.04-.33-.12s-.14-.21-.17-.38c-.03-.18-.05-.33-.06-.45s-.01-.3-.01-.53z"}}),{c(){e=l("div"),n=l("div"),s=l("span"),o=l("span"),o.textContent="-",m=d(E),f=h(),g=l("span"),g.textContent="°",x=h(),v=l("div"),k=l("div"),B(M.$$.fragment),C=h(),D=l("div"),T=d(G),S=h(),H=l("span"),H.textContent="%",r(o,"class","max-w-4 inline-flex overflow-hidden null"),F(o,"hidden",t[0].temperature>=0),r(s,"class","text-right null"),r(g,"class","font-light text-sm leading-[2.2] null"),r(n,"class","flex font-light h-full mt-3 text-right text-7xl null"),r(k,"class","h-4 w-5 self-center null"),r(H,"class","ml-[.1rem] text-size-[0.5rem] leading-[2.1] null"),r(v,"class","flex right-2 bottom-2 absolute null"),r(e,"class","")},m(t,l){a(t,e,l),p(e,n),p(n,s),p(s,o),p(s,m),p(s,f),p(n,g),p(e,x),p(e,v),p(v,k),z(M,k,null),p(v,C),p(v,D),p(D,T),p(v,S),p(v,H),P=!0},p(e,n){t=e,1&n&&F(o,"hidden",t[0].temperature>=0),(!P||1&n)&&E!==(E=Math.abs(t[0].temperature)+"")&&j(m,E),(!P||1&n)&&G!==(G=t[0].relativeHumidity+"")&&j(T,G)},i(t){P||(i((()=>{w||(w=c(n,b,{duration:ye},!0)),w.run(1)})),$(M.$$.fragment,t),i((()=>{N||(N=c(v,b,{duration:ye},!0)),N.run(1)})),P=!0)},o(t){w||(w=c(n,b,{duration:ye},!1)),w.run(0),y(M.$$.fragment,t),N||(N=c(v,b,{duration:ye},!1)),N.run(0),P=!1},d(t){t&&u(e),t&&w&&w.end(),L(M),t&&N&&N.end()}}}function we(t){let e,n,s,o,i,c,d,m=t[0]&&t[0].timestamp&&fe(t),f=t[0]&&t[0].timestamp&&he(t),g=t[0]&&t[0].timestamp&&$e(t);return{c(){e=l("div"),n=l("div"),m&&m.c(),s=h(),o=l("div"),f&&f.c(),i=h(),c=l("div"),g&&g.c(),r(n,"class","relative null"),r(o,"class","h-32 w-32 relative null"),r(c,"class","flex p-2 box-border relative justify-end null"),r(e,"class","flex space-x-1 h-32 mx-1 relative tabular-nums children:shadow-md children:rounded-md children:bg-white children:w-32 children:dark:bg-dark-600  null")},m(t,l){a(t,e,l),p(e,n),m&&m.m(n,null),p(e,s),p(e,o),f&&f.m(o,null),p(e,i),p(e,c),g&&g.m(c,null),d=!0},p(t,[e]){t[0]&&t[0].timestamp?m?(m.p(t,e),1&e&&$(m,1)):(m=fe(t),m.c(),$(m,1),m.m(n,null)):m&&(w(),y(m,1,1,(()=>{m=null})),x()),t[0]&&t[0].timestamp?f?(f.p(t,e),1&e&&$(f,1)):(f=he(t),f.c(),$(f,1),f.m(o,null)):f&&(w(),y(f,1,1,(()=>{f=null})),x()),t[0]&&t[0].timestamp?g?(g.p(t,e),1&e&&$(g,1)):(g=$e(t),g.c(),$(g,1),g.m(c,null)):g&&(w(),y(g,1,1,(()=>{g=null})),x())},i(t){d||($(m),$(f),$(g),d=!0)},o(t){y(m),y(f),y(g),d=!1},d(t){t&&u(e),m&&m.d(),f&&f.d(),g&&g.d()}}}const ye=150;function xe(t,e=0){return Number.parseFloat(t).toFixed(e).toLocaleString()}function ve(t,e,n){let l,r,a;return S(t,qt,(t=>n(2,l=t))),S(t,It,(t=>n(1,r=t))),t.$$.update=()=>{4&t.$$.dirty&&n(0,a=l)},[a,r,l]}class be extends t{constructor(t){super(),e(this,t,ve,we,G,{})}}function ke(t,e,n,l,r,a){const s=function(t,e){const n=e.y-t.y,l=e.x-t.x;return{length:Math.hypot(n,l),angle:Math.atan2(n,l)}}(t,n),o=s.angle+l,i=.1*s.length,c=e.x+Math.cos(o)*i;let u=e.y+Math.sin(o)*i;return e.y==r-a&&(u=r-a),{x:c,y:u}}function Me(t,e,n,l){const r=t.length-1>e?1:0,a=ke(t[e-(e>1?2:1)],t[e-1],t[e],0,n,l),s=ke(t[e-1],t[e],t[e+r],Math.PI,n,l);return`C${a.x},${a.y} ${s.x},${s.y} ${t[e].x},${t[e].y}`}function Ce(t,e,n){if(t.length>0){let l="";for(let r=1;t.length>r;r++)l+=Me(t,r,e,n);return`M${t[0].x},${t[0].y}${l}`}return""}function Be(t,e,n){const l=t.slice();return l[22]=e[n],l[24]=n,l}function De(t,e,n){const l=t.slice();return l[25]=e[n],l[24]=n,l}function ze(t){let e,n,l,s,o,i,c,d,f,h,$,w,y,x,v,b,k,M,C,B,D,z,L,T,S,H,N,P,E=t[11],G=[];for(let r=0;E.length>r;r+=1)G[r]=Le(De(t,E,r));let j=t[6],F=[];for(let r=0;j.length>r;r+=1)F[r]=Te(Be(t,j,r));let A=t[5]>0&&Se(t);return{c(){e=m("defs"),n=m("clipPath"),l=m("rect"),i=m("g"),c=m("path"),f=m("path"),w=m("g");for(let t=0;G.length>t;t+=1)G[t].c();x=m("g"),v=m("path"),M=m("path"),B=m("path"),L=m("path"),S=m("path"),N=m("g");for(let t=0;F.length>t;t+=1)F[t].c();A&&A.c(),P=g(),r(l,"x","0"),r(l,"y",s=0),r(l,"width","100%"),r(l,"height",o=t[2]-1),r(n,"id","cut-off-bottom"),r(c,"d",d=`M${t[14](t[12])},${t[2]-1}a5 5 0 1 0 0 14h${t[4][0]-t[14](t[12])}v-14z`),r(f,"d",h=`M${t[4][1]},${t[2]-1}v14h${t[14](t[13])-t[4][1]+2}a-5 5 0 1 0 0 -14z`),r(i,"fill",$=t[10].night),r(i,"class",null),r(w,"stroke-width","0"),r(w,"fill",y=t[10].tick),r(w,"text-anchor","middle"),r(w,"font-size","12"),r(w,"font-weight","300"),r(w,"class",null),r(v,"fill",b=t[10].sunniness+"10"),r(v,"d",k=t[7]+`V${t[2]+1}H${t[14](4)}z`),r(v,"class",null),r(M,"stroke",C=t[10].sunniness),r(M,"d",t[7]),r(B,"fill",D=t[10].precipitation+"20"),r(B,"d",z=t[9]+`V${t[2]+1}H${t[14](4)}z`),r(B,"class",null),r(L,"stroke",T=t[10].precipitation),r(L,"stroke-dasharray","4, 5"),r(L,"d",t[9]),r(S,"stroke",H=t[10].temperature),r(S,"stroke-dasharray",".2, 5"),r(S,"stroke-width","1.8"),r(S,"d",t[8]),r(x,"clip-path","url(#cut-off-bottom)"),r(N,"font-size","10"),r(N,"font-weight","400"),r(N,"text-anchor","middle")},m(t,r){a(t,e,r),p(e,n),p(n,l),a(t,i,r),p(i,c),p(i,f),a(t,w,r);for(let e=0;G.length>e;e+=1)G[e].m(w,null);a(t,x,r),p(x,v),p(x,M),p(x,B),p(x,L),p(x,S),a(t,N,r);for(let e=0;F.length>e;e+=1)F[e].m(N,null);A&&A.m(t,r),a(t,P,r)},p(t,e){if(4&e&&o!==(o=t[2]-1)&&r(l,"height",o),20&e&&d!==(d=`M${t[14](t[12])},${t[2]-1}a5 5 0 1 0 0 14h${t[4][0]-t[14](t[12])}v-14z`)&&r(c,"d",d),20&e&&h!==(h=`M${t[4][1]},${t[2]-1}v14h${t[14](t[13])-t[4][1]+2}a-5 5 0 1 0 0 -14z`)&&r(f,"d",h),1024&e&&$!==($=t[10].night)&&r(i,"fill",$),18432&e){let n;for(E=t[11],n=0;E.length>n;n+=1){const l=De(t,E,n);G[n]?G[n].p(l,e):(G[n]=Le(l),G[n].c(),G[n].m(w,null))}for(;G.length>n;n+=1)G[n].d(1);G.length=E.length}if(1024&e&&y!==(y=t[10].tick)&&r(w,"fill",y),1024&e&&b!==(b=t[10].sunniness+"10")&&r(v,"fill",b),132&e&&k!==(k=t[7]+`V${t[2]+1}H${t[14](4)}z`)&&r(v,"d",k),1024&e&&C!==(C=t[10].sunniness)&&r(M,"stroke",C),128&e&&r(M,"d",t[7]),1024&e&&D!==(D=t[10].precipitation+"20")&&r(B,"fill",D),516&e&&z!==(z=t[9]+`V${t[2]+1}H${t[14](4)}z`)&&r(B,"d",z),1024&e&&T!==(T=t[10].precipitation)&&r(L,"stroke",T),512&e&&r(L,"d",t[9]),1024&e&&H!==(H=t[10].temperature)&&r(S,"stroke",H),256&e&&r(S,"d",t[8]),1092&e){let n;for(j=t[6],n=0;j.length>n;n+=1){const l=Be(t,j,n);F[n]?F[n].p(l,e):(F[n]=Te(l),F[n].c(),F[n].m(N,null))}for(;F.length>n;n+=1)F[n].d(1);F.length=j.length}t[5]>0?A?A.p(t,e):(A=Se(t),A.c(),A.m(P.parentNode,P)):A&&(A.d(1),A=null)},d(t){t&&u(e),t&&u(i),t&&u(w),O(G,t),t&&u(x),t&&u(N),O(F,t),A&&A.d(t),t&&u(P)}}}function Le(t){let e,n,l,s=t[25]+"";return{c(){e=m("text"),n=d(s),r(e,"x",l=t[14](t[25])),r(e,"y","96%")},m(t,l){a(t,e,l),p(e,n)},p:o,d(t){t&&u(e)}}}function Te(t){let e,n,l,s,o,i,c,f,h,g,$,w,y,x,v=t[22].temperature+"",b=t[22].temperature+"";return{c(){e=m("circle"),i=m("g"),c=m("text"),f=d(v),$=m("text"),w=d(b),r(e,"stroke",n=t[10].temperature),r(e,"stroke-width","0.7"),r(e,"cx",l=t[22].x),r(e,"cy",s=Math.min(t[22].y,t[2]-2)),r(e,"r","1.2"),r(e,"fill",o=t[10].pointBackgroundColor),r(e,"class",null),r(c,"fill",h=t[10].dataLabelBackgroundColor),r(c,"stroke",g=t[10].dataLabelBackgroundColor),r(c,"stroke-width","3"),r(c,"class",null),r($,"fill",y=t[10].temperature),r($,"class",null),r(i,"transform",x=`translate(${t[22].x+(0===t[24]?2:-7)} ${t[22].y+(t[22].flipY?-3:8)})`)},m(t,n){a(t,e,n),a(t,i,n),p(i,c),p(c,f),p(i,$),p($,w)},p(t,a){1024&a&&n!==(n=t[10].temperature)&&r(e,"stroke",n),64&a&&l!==(l=t[22].x)&&r(e,"cx",l),68&a&&s!==(s=Math.min(t[22].y,t[2]-2))&&r(e,"cy",s),1024&a&&o!==(o=t[10].pointBackgroundColor)&&r(e,"fill",o),64&a&&v!==(v=t[22].temperature+"")&&j(f,v),1024&a&&h!==(h=t[10].dataLabelBackgroundColor)&&r(c,"fill",h),1024&a&&g!==(g=t[10].dataLabelBackgroundColor)&&r(c,"stroke",g),64&a&&b!==(b=t[22].temperature+"")&&j(w,b),1024&a&&y!==(y=t[10].temperature)&&r($,"fill",y),64&a&&x!==(x=`translate(${t[22].x+(0===t[24]?2:-7)} ${t[22].y+(t[22].flipY?-3:8)})`)&&r(i,"transform",x)},d(t){t&&u(e),t&&u(i)}}}function Se(t){let e,n;return{c(){e=m("line"),r(e,"x1",t[5]),r(e,"x2",t[5]),r(e,"y2",t[2]),r(e,"stroke",n=t[10].currentTime),r(e,"stroke-width","0.5")},m(t,n){a(t,e,n)},p(t,l){32&l&&r(e,"x1",t[5]),32&l&&r(e,"x2",t[5]),4&l&&r(e,"y2",t[2]),1024&l&&n!==(n=t[10].currentTime)&&r(e,"stroke",n)},d(t){t&&u(e)}}}function He(t){let e,n=t[0]&&t[1]&&ze(t);return{c(){e=m("svg"),n&&n.c(),r(e,"width","100%"),r(e,"height","100%"),r(e,"fill","none"),r(e,"stroke","none"),r(e,"stroke-linecap","round"),r(e,"stroke-linejoin","round"),r(e,"class",null)},m(l,r){a(l,e,r),n&&n.m(e,null),t[16](e)},p(t,[l]){t[0]&&t[1]?n?n.p(t,l):(n=ze(t),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},i:o,o:o,d(l){l&&u(e),n&&n.d(),t[16](null)}}}function Ne(t){return(60*t.getHours()+t.getMinutes())/60}function Pe(t,e){const n=t.min.temperature;return n+e*(t.max.temperature-n)}function Ee(t,e,n){let l;S(t,It,(t=>n(17,l=t)));let r,a,s,o,{weather:i}=e,c=[4,6,8,10,12,14,16,18,20,22],u=c[0],d=c[c.length-1],m=d-u+1,f=[0,100],p=-5,h=[],g="",$="",w="";const y=t=>t?{dataLabelBackgroundColor:"#22222270",pointBackgroundColor:"#222",currentTime:"#f66",tick:kt.dark+"f0",night:"#00000032",temperature:kt.dark,precipitation:Mt.dark,sunniness:Ct.dark}:{dataLabelBackgroundColor:"#ffffffa0",pointBackgroundColor:"#fff",currentTime:"#a00",tick:kt.light+"c0",night:"#44446410",temperature:kt.light,precipitation:Mt.light,sunniness:Ct.light};let x=y(l);function v(t){return r*(t-u)+r/2}function b(t){return.01>t?s:function(t){return Math.max(5,Math.min((1-t)*s,s-2.5))}(t)}return It.subscribe((async t=>{n(10,x=y(t))})),t.$$set=t=>{"weather"in t&&n(0,i=t.weather)},t.$$.update=()=>{if(32776&t.$$.dirty&&o){const t=o.getBoundingClientRect();n(15,a=t.width),n(2,s=t.height-13),n(1,r=a/m)}if(7&t.$$.dirty&&i&&r){const{sunrise:t,sunset:e}=i.dayLight;n(4,f=[t,e].map((t=>v(Ne(t)))));const l=new Date;new Date(i.dayGraph[0].timestamp)<l&&new Date(i.dayGraph[i.dayGraph.length-1].timestamp)>l&&n(5,p=v(Ne(l)));const r=i.dayGraph.map((t=>({x:v(Ne(new Date(t.timestamp))),y:b(t.sunniness)}))),a=i.dayGraph.map((t=>({x:v(Ne(new Date(t.timestamp))),y:b(t.precipitation)}))),o=i.dayGraph.map((t=>{const e=new Date(t.timestamp);return{x:v(Ne(e)),y:b(t.temperature),flipY:.2>t.temperature,temperature:Pe(i,t.temperature),hour:e.getHours()}})).filter((({hour:t,temperature:e})=>e>=i.max.temperature||i.min.temperature>=e||t%2==0));n(6,h=o.filter(((t,e,n)=>function(t,e){var n,l;return e[t].y!==(null!=(l=null==(n=e[t-1])?void 0:n.y)?l:void 0)}(e,n)))),n(7,g=Ce(r,s,2.5)),n(8,$=Ce(o,s,2.5)),n(9,w=Ce(a,s,2.5))}},[i,r,s,o,f,p,h,g,$,w,x,c,u,d,v,a,function(t){P[t?"unshift":"push"]((()=>{o=t,n(3,o)}))}]}class Ge extends t{constructor(t){super(),e(this,t,Ee,He,n,{weather:0})}}function je(t,e,n){const l=t.slice();return l[5]=e[n],l[7]=n,l}function Fe(t,e,n){const l=t.slice();return l[8]=e[n].icon,l[9]=e[n].colors,l[11]=n,l}function Oe(t){let e,n,s,o,m,f,g,v,k,M,C,D,T,S,H,N,P,E,G,O,W,I,U,q,_,Y,K=t[1][t[7]].day+"",X=t[1][t[7]].weekday+"",J=[],Q=new Map,Z=t[0][t[5]].min.temperature+"",tt=t[0][t[5]].max.temperature+"",et=t[0][t[5]].dayParts;const nt=t=>t[7]+""+t[11];for(let l=0;et.length>l;l+=1){let e=Fe(t,et,l),n=nt(e);Q.set(n,J[l]=Re(n,e))}return q=new Ge({props:{weather:t[0][t[5]]}}),{c(){e=l("div"),n=l("div"),s=l("span"),o=d(K),m=h(),f=l("span"),g=d(X),k=h(),M=l("div");for(let t=0;J.length>t;t+=1)J[t].c();C=h(),D=l("div"),T=l("span"),S=d(Z),H=l("span"),H.textContent="°",N=h(),P=l("span"),E=d(tt),G=l("span"),G.textContent="°",I=h(),U=l("div"),B(q.$$.fragment),r(f,"class","text-lg -ml-1 null"),r(n,"class","pl-1 text-3xl w-28 null"),r(M,"class","flex space-x-4  null"),r(H,"class","text-sm align-text-top null"),r(T,"class","text-lg null"),F(T,"cold",0>t[0][t[5]].min.temperature),r(G,"class","text-sm ml-[0.1rem] leading-[1.8] align-top null"),r(P,"class",null),F(P,"cold",0>t[0][t[5]].max.temperature),r(D,"class","text-right text-3xl w-28 null"),r(e,"class","flex justify-between null"),r(U,"class","h-20 null")},m(t,l){a(t,e,l),p(e,n),p(n,s),p(s,o),p(n,m),p(n,f),p(f,g),p(e,k),p(e,M);for(let e=0;J.length>e;e+=1)J[e].m(M,null);p(e,C),p(e,D),p(D,T),p(T,S),p(T,H),p(D,N),p(D,P),p(P,E),p(P,G),a(t,I,l),a(t,U,l),z(q,U,null),Y=!0},p(t,e){(!Y||2&e)&&K!==(K=t[1][t[7]].day+"")&&j(o,K),(!Y||2&e)&&X!==(X=t[1][t[7]].weekday+"")&&j(g,X),13&e&&(et=t[0][t[5]].dayParts,w(),J=A(J,e,nt,1,t,et,Q,M,R,Re,null,Fe),x()),(!Y||1&e)&&Z!==(Z=t[0][t[5]].min.temperature+"")&&j(S,Z),9&e&&F(T,"cold",0>t[0][t[5]].min.temperature),(!Y||1&e)&&tt!==(tt=t[0][t[5]].max.temperature+"")&&j(E,tt),9&e&&F(P,"cold",0>t[0][t[5]].max.temperature);const n={};1&e&&(n.weather=t[0][t[5]]),q.$set(n)},i(t){if(!Y){i((()=>{v||(v=c(n,b,{},!0)),v.run(1)}));for(let t=0;et.length>t;t+=1)$(J[t]);i((()=>{O||(O=c(P,b,{},!0)),O.run(1)})),i((()=>{W||(W=c(D,b,{},!0)),W.run(1)})),$(q.$$.fragment,t),i((()=>{_||(_=c(U,V,{y:15},!0)),_.run(1)})),Y=!0}},o(t){v||(v=c(n,b,{},!1)),v.run(0);for(let e=0;J.length>e;e+=1)y(J[e]);O||(O=c(P,b,{},!1)),O.run(0),W||(W=c(D,b,{},!1)),W.run(0),y(q.$$.fragment,t),_||(_=c(U,V,{y:15},!1)),_.run(0),Y=!1},d(t){t&&u(e),t&&v&&v.end();for(let e=0;J.length>e;e+=1)J[e].d();t&&O&&O.end(),t&&W&&W.end(),t&&u(I),t&&u(U),L(q),t&&_&&_.end()}}}function Ae(t){let e,n,s,o;return n=new vt({props:{icon:t[8],color:bt(t[9],t[2])}}),{c(){e=l("div"),B(n.$$.fragment),r(e,"class","inset-0 absolute null")},m(t,l){a(t,e,l),z(n,e,null),o=!0},p(e,l){t=e;const r={};1&l&&(r.icon=t[8]),5&l&&(r.color=bt(t[9],t[2])),n.$set(r)},i(l){o||($(n.$$.fragment,l),i((()=>{s||(s=c(e,b,{delay:50*t[11]},!0)),s.run(1)})),o=!0)},o(l){y(n.$$.fragment,l),s||(s=c(e,b,{delay:50*t[11]},!1)),s.run(0),o=!1},d(t){t&&u(e),L(n),t&&s&&s.end()}}}function Re(t,e){let n,s,i,c=e[0][e[5]].dayParts,d=Ae(e);return{key:t,first:null,c(){n=l("div"),d.c(),s=h(),r(n,"class","flex h-8 pt-1.5 w-8 items-center relative null"),this.first=n},m(t,e){a(t,n,e),d.m(n,null),p(n,s),i=!0},p(t,l){e=t,1&l&&G(c,c=e[0][e[5]].dayParts)?(w(),y(d,1,1,o),x(),d=Ae(e),d.c(),$(d),d.m(n,s)):d.p(e,l)},i(t){i||($(d),i=!0)},o(t){y(d),i=!1},d(t){t&&u(n),d.d(t)}}}function Ve(t,e){let n,s,o,d,m=e[0]&&e[0].length>0&&Oe(e);return{key:t,first:null,c(){n=l("div"),m&&m.c(),s=h(),r(n,"class","bg-white rounded-md h-30 shadow-md py-1 px-2 dark:bg-dark-600 null"),this.first=n},m(t,e){a(t,n,e),m&&m.m(n,null),p(n,s),d=!0},p(t,l){(e=t)[0]&&e[0].length>0?m?(m.p(e,l),1&l&&$(m,1)):(m=Oe(e),m.c(),$(m,1),m.m(n,s)):m&&(w(),y(m,1,1,(()=>{m=null})),x())},i(t){d||($(m),i((()=>{o||(o=c(n,v,{duration:250},!0)),o.run(1)})),d=!0)},o(t){y(m),o||(o=c(n,v,{duration:250},!1)),o.run(0),d=!1},d(t){t&&u(n),m&&m.d(),t&&o&&o.end()}}}function We(t){let e,n,s=[],o=new Map,i=t[3];const c=t=>t[5];for(let l=0;i.length>l;l+=1){let e=je(t,i,l),n=c(e);o.set(n,s[l]=Ve(n,e))}return{c(){e=l("div");for(let t=0;s.length>t;t+=1)s[t].c();r(e,"class","flex flex-col flex-nowrap font-light space-y-1 mx-1 transition-opacity duration-700 tabular-nums null")},m(t,l){a(t,e,l);for(let n=0;s.length>n;n+=1)s[n].m(e,null);n=!0},p(t,[n]){15&n&&(i=t[3],w(),s=A(s,n,c,1,t,i,o,e,R,Ve,null,je),x())},i(t){if(!n){for(let t=0;i.length>t;t+=1)$(s[t]);n=!0}},o(t){for(let e=0;s.length>e;e+=1)y(s[e]);n=!1},d(t){t&&u(e);for(let e=0;s.length>e;e+=1)s[e].d()}}}function Ie(t,e,n){let l,r,a,s;S(t,_t,(t=>n(4,l=t))),S(t,It,(t=>n(2,r=t)));let o=[...Array(6).keys()];return t.$$.update=()=>{16&t.$$.dirty&&n(0,a=l),1&t.$$.dirty&&n(1,s=a.map((t=>{const e=new Intl.DateTimeFormat("de-DE",{day:"2-digit",weekday:"short"}).formatToParts(t.day);return{day:e.find((t=>"day"===t.type)).value,weekday:e.find((t=>"weekday"===t.type)).value.replace(/\./g,"")}})))},[a,s,r,o,l]}class Ue extends t{constructor(t){super(),e(this,t,Ie,We,G,{})}}let qe=[];function _e(){return qe}function Ye(t){let e,n,d,m,f;return{c(){e=l("div"),r(e,"class","bg-dark-800/90 inset-0 z-11 fixed backdrop-filter backdrop-grayscale-100 null")},m(n,l){a(n,e,l),d=!0,m||(f=s(e,"click",W(t[1])),m=!0)},p:o,i(t){d||(i((()=>{n||(n=c(e,v,{duration:200},!0)),n.run(1)})),d=!0)},o(t){n||(n=c(e,v,{duration:200},!1)),n.run(0),d=!1},d(t){t&&u(e),t&&n&&n.end(),m=!1,f()}}}function Ke(t){let e,n,l=t[0]&&Ye(t);return{c(){l&&l.c(),e=g()},m(t,r){l&&l.m(t,r),a(t,e,r),n=!0},p(t,[n]){t[0]?l?(l.p(t,n),1&n&&$(l,1)):(l=Ye(t),l.c(),$(l,1),l.m(e.parentNode,e)):l&&(w(),y(l,1,1,(()=>{l=null})),x())},i(t){n||($(l),n=!0)},o(t){y(l),n=!1},d(t){l&&l.d(t),t&&u(e)}}}function Xe(t,e,n){const l=I();let{show:r=!1}=e;return t.$$set=t=>{"show"in t&&n(0,r=t.show)},[r,function(){l("close")}]}qe=JSON.parse(localStorage.history||"[]");class Je extends t{constructor(t){super(),e(this,t,Xe,Ke,n,{show:0})}}function Qe(t){let e,n,o,i;const c=t[2].default,d=U(c,t,t[1],null);return{c(){e=l("button"),d&&d.c(),r(e,"class","bg-transparent border-none rounded cursor-pointer flex h-10 p-1 w-10 appearance-none clickable items-center null"),r(e,"aria-label",t[0])},m(l,r){a(l,e,r),d&&d.m(e,null),n=!0,o||(i=s(e,"click",t[3]),o=!0)},p(t,[l]){d&&d.p&&(!n||2&l)&&q(d,c,t,t[1],n?Y(c,t[1],l,null):_(t[1]),null),(!n||1&l)&&r(e,"aria-label",t[0])},i(t){n||($(d,t),n=!0)},o(t){y(d,t),n=!1},d(t){t&&u(e),d&&d.d(t),o=!1,i()}}}function Ze(t,e,n){let{$$slots:l={},$$scope:r}=e,{label:a="Button"}=e;return t.$$set=t=>{"label"in t&&n(0,a=t.label),"$$scope"in t&&n(1,r=t.$$scope)},[a,r,l,function(e){K.call(this,t,e)}]}class tn extends t{constructor(t){super(),e(this,t,Ze,Qe,G,{label:0})}}function en(t){let e,n;return e=new Zt({props:{d:t[0]}}),{c(){B(e.$$.fragment)},m(t,l){z(e,t,l),n=!0},p(t,n){const l={};1&n&&(l.d=t[0]),e.$set(l)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function nn(t){let e,n;return e=new tn({props:{label:t[1],$$slots:{default:[en]},$$scope:{ctx:t}}}),e.$on("click",t[2]),{c(){B(e.$$.fragment)},m(t,l){z(e,t,l),n=!0},p(t,[n]){const l={};2&n&&(l.label=t[1]),9&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function ln(t,e,n){let{icon:l}=e,{label:r="Button"}=e;return t.$$set=t=>{"icon"in t&&n(0,l=t.icon),"label"in t&&n(1,r=t.label)},[l,r,function(e){K.call(this,t,e)}]}class rn extends t{constructor(t){super(),e(this,t,ln,nn,G,{icon:0,label:1})}}function an(t,e,n){const l=t.slice();return l[18]=e[n],l[20]=n,l}function sn(t){let e,n,s,o;return n=new rn({props:{label:"Get Current Location",icon:Q}}),n.$on("click",t[10]),{c(){e=l("div"),B(n.$$.fragment),r(e,"class","z-20 absolute null")},m(t,l){a(t,e,l),z(n,e,null),o=!0},p(e,n){t=e},i(t){o||($(n.$$.fragment,t),i((()=>{s||(s=c(e,v,{duration:dn},!0)),s.run(1)})),o=!0)},o(t){y(n.$$.fragment,t),s||(s=c(e,v,{duration:dn},!1)),s.run(0),o=!1},d(t){t&&u(e),L(n),t&&s&&s.end()}}}function on(t){let e,n,s,o,d=t[3],m=[];for(let l=0;d.length>l;l+=1)m[l]=cn(an(t,d,l));return{c(){e=l("div"),n=l("div");for(let t=0;m.length>t;t+=1)m[t].c();r(n,"class","shadow-lg py-1 null"),r(e,"class","rounded-md outline-none bg-gray-100 shadow-lg w-full transform origin-top-right origin-top transition-transform left-0 z-20 absolute m1-2 dark:bg-dark-800 null")},m(t,l){a(t,e,l),p(e,n);for(let e=0;m.length>e;e+=1)m[e].m(n,null);o=!0},p(e,l){if(t=e,296&l){let e;for(d=t[3],e=0;d.length>e;e+=1){const r=an(t,d,e);m[e]?m[e].p(r,l):(m[e]=cn(r),m[e].c(),m[e].m(n,null))}for(;m.length>e;e+=1)m[e].d(1);m.length=d.length}},i(t){o||(i((()=>{s||(s=c(e,V,{duration:dn,y:-50},!0)),s.run(1)})),o=!0)},o(t){s||(s=c(e,V,{duration:dn,y:-50},!1)),s.run(0),o=!1},d(t){t&&u(e),O(m,t),t&&s&&s.end()}}}function cn(t){let e,n,o,i,c,m=t[18]+"";function f(){return t[13](t[18])}function h(){return t[14](t[20])}return{c(){e=l("a"),n=d(m),r(e,"href",o="#"),r(e,"class","font-semibold text-sm text-lg py-2 px-4 text-gray-700 block no-underline dark:text-gray-400 null"),F(e,"selected",t[20]===t[5])},m(t,l){a(t,e,l),p(e,n),i||(c=[s(e,"click",f),s(e,"mouseenter",h)],i=!0)},p(l,r){t=l,8&r&&m!==(m=t[18]+"")&&j(n,m),32&r&&F(e,"selected",t[20]===t[5])},d(t){t&&u(e),i=!1,X(c)}}}function un(t){let e,n,o,i,c,m,f,g,v,b,k,M,C,D,T;e=new Je({props:{show:t[4]}}),e.$on("close",t[7]);let S=t[4]&&sn(t),H=t[4]&&on(t);return{c(){B(e.$$.fragment),n=h(),o=l("div"),S&&S.c(),i=h(),c=l("div"),m=l("input"),f=h(),g=l("div"),v=d(t[2]),b=h(),k=l("label"),k.textContent="Ort",M=h(),H&&H.c(),r(m,"id","location"),r(m,"type","text"),r(m,"class","bg-transparent border-none h-full outline-none flex-1 text-center text-xl w-full text-gray-800 dark:text-gray-400 null"),r(m,"placeholder","Ort"),r(m,"autocomplete","off"),r(g,"class","text-center text-xs right-0 -bottom-1 left-0 text-gray-500 absolute pointer-events-none null"),r(k,"for","location"),r(k,"class","hidden null"),r(c,"class","h-full relative null"),r(o,"class","bg-white rounded-md h-10 shadow-md mx-1 mt-1 relative dark:bg-dark-600 null"),F(o,"z-50",t[4])},m(l,r){z(e,l,r),a(l,n,r),a(l,o,r),S&&S.m(o,null),p(o,i),p(o,c),p(c,m),t[11](m),J(m,t[0]),p(c,f),p(c,g),p(g,v),p(c,b),p(c,k),p(o,M),H&&H.m(o,null),C=!0,D||(T=[s(m,"input",t[12]),s(m,"keydown",t[6]),s(m,"focus",t[9]),s(m,"click",t[9])],D=!0)},p(t,[n]){const l={};16&n&&(l.show=t[4]),e.$set(l),t[4]?S?(S.p(t,n),16&n&&$(S,1)):(S=sn(t),S.c(),$(S,1),S.m(o,i)):S&&(w(),y(S,1,1,(()=>{S=null})),x()),1&n&&m.value!==t[0]&&J(m,t[0]),(!C||4&n)&&j(v,t[2]),t[4]?H?(H.p(t,n),16&n&&$(H,1)):(H=on(t),H.c(),$(H,1),H.m(o,null)):H&&(w(),y(H,1,1,(()=>{H=null})),x()),16&n&&F(o,"z-50",t[4])},i(t){C||($(e.$$.fragment,t),$(S),$(H),C=!0)},o(t){y(e.$$.fragment,t),y(S),y(H),C=!1},d(l){L(e,l),l&&u(n),l&&u(o),S&&S.d(),t[11](null),H&&H.d(),D=!1,X(T)}}}const dn=250;function mn(t,e,n){let l,r;S(t,Rt,(t=>n(15,l=t)));let a="",s="",o=[];const i=t=>async function(t,e=5){return t=t.trim().toLowerCase(),(await Ft).filter((e=>e.search.includes(t))).slice(0,e).map((t=>t.name))}(t).then((t=>n(3,o=t)));let c=!1,u=0;function d(){!a&&l&&Ot(l).then((t=>n(0,a=t))),n(4,c=!1),r.blur()}function m(t,e){E(Rt,l=e,l),function(t){qe=[t,...qe.filter((e=>e!==t)).slice(0,2)],localStorage.history=JSON.stringify(qe)}(t);const n=new URLSearchParams(window.location.search);n.set("location",t);const r=window.location.origin+window.location.pathname+"?"+n.toString()+"#"+window.location.hash;r!==window.location.toString()&&window.history.pushState({},"",r)}async function f(t){n(0,a=t),d(),r.blur();const e=await async function(t){if(0===t.trim().length)return null;const e=(await Ft).find((e=>e.name===t));return e?{lat:+e.lat,lon:+e.lon}:null}(t);e&&m(a,e)}return H((()=>{var t,e;const n=new URLSearchParams(window.location.search),l=Object.fromEntries(n.entries());f(l.location?l.location:null!=(e=null==(t=_e())?void 0:t[0])?e:"")})),t.$$.update=()=>{if(1&t.$$.dirty){if(a.length>0)i(a);else{const t=_e();t.length>0?n(3,o=t):i(a)}n(5,u=0)}},[a,r,s,o,c,u,function(t){switch(t.code){case"ArrowUp":n(5,u=Math.max(0,u-1)),t.preventDefault();break;case"ArrowDown":n(5,u=Math.min(o.length-1,u+1)),t.preventDefault();break;case"Enter":f(o[u]);break;case"Escape":d()}},d,f,function(){n(4,c=!0),n(5,u=0),n(0,a=""),n(2,s="")},function(){d(),async function(){navigator.geolocation.getCurrentPosition((async t=>{const{latitude:e,longitude:l}=t.coords,r=+e.toFixed(3),s=+l.toFixed(3);(({closestCity:t,coordinates:e})=>{n(0,a=`Nahe ${t}`),m(t,e)})({closestCity:await Ot({lat:r,lon:s}),coordinates:{lat:r,lon:s}})}),(()=>alert("Ort konte nicht ermittelt werden")))}()},function(t){P[t?"unshift":"push"]((()=>{r=t,n(1,r)}))},function(){a=this.value,n(0,a)},t=>f(t),t=>n(5,u=t)]}class fn extends t{constructor(t){super(),e(this,t,mn,un,G,{})}}function pn(t){let e,n,s,o,d,m,f;return{c(){e=l("img"),s=h(),o=l("img"),r(e,"class","sharpen2 null"),Z(e.src,n=t[2])||r(e,"src",n),r(e,"alt",""),r(e,"aria-hidden","true"),Z(o.src,d=t[2])||r(o,"src",d),r(o,"alt",""),r(o,"class",null)},m(t,n){a(t,e,n),a(t,s,n),a(t,o,n),f=!0},p(t,l){(!f||4&l&&!Z(e.src,n=t[2]))&&r(e,"src",n),(!f||4&l&&!Z(o.src,d=t[2]))&&r(o,"src",d)},i(t){f||(i((()=>{m||(m=c(o,v,{duration:150},!0)),m.run(1)})),f=!0)},o(t){m||(m=c(o,v,{duration:150},!1)),m.run(0),f=!1},d(t){t&&u(e),t&&u(s),t&&u(o),t&&m&&m.end()}}}function hn(t){let e,n,s,o,i=t[2]&&pn(t);return s=new ce({props:{clouds:t[0],viewBounds:t[1]}}),{c(){e=l("div"),i&&i.c(),n=h(),B(s.$$.fragment),r(e,"class","relative children:w-full children:rounded-md  null"),r(e,"style",`min-height:${gn-22}px`)},m(t,l){a(t,e,l),i&&i.m(e,null),p(e,n),z(s,e,null),o=!0},p(t,[l]){t[2]?i?(i.p(t,l),4&l&&$(i,1)):(i=pn(t),i.c(),$(i,1),i.m(e,n)):i&&(w(),y(i,1,1,(()=>{i=null})),x());const r={};1&l&&(r.clouds=t[0]),2&l&&(r.viewBounds=t[1]),s.$set(r)},i(t){o||($(i),$(s.$$.fragment,t),o=!0)},o(t){y(i),y(s.$$.fragment,t),o=!1},d(t){t&&u(e),i&&i.d(),L(s)}}}const gn=350;function $n(t,e,n){let l;S(t,Rt,(t=>n(3,l=t)));let r,{clouds:a}=e,{viewBounds:s}=e;return t.$$set=t=>{"clouds"in t&&n(0,a=t.clouds),"viewBounds"in t&&n(1,s=t.viewBounds)},t.$$.update=()=>{8&t.$$.dirty&&(async()=>{if(At(l)){const t=function(t,e){return`https://sgx.geodatenzentrum.de/wms_topplus_open?service=wms&version=1.3.0&request=GetMap&Layers=p25&STYLES=default&BBOX=${[t.lb.lat,t.lb.lon,t.rt.lat,t.rt.lon].map((t=>Number.parseFloat(t).toFixed(3))).join(",")}&CRS=EPSG:4326&width=${2*e}&Height=${2*e}&Format=image/jpeg`}(St(l),gn),e=await(await jt(t)).blob();n(2,r=URL.createObjectURL(e))}})()},[a,s,r,l]}class wn extends t{constructor(t){super(),e(this,t,$n,hn,n,{clouds:0,viewBounds:1})}}function yn(t){let e,n,o,i,c,f,g,w,x,v,b,k,M,C,D,T,S,H,N,P,E=vn(t[1][t[0]])+"";return n=new rn({props:{label:"Go Back",icon:tt}}),n.$on("click",t[9]),g=new rn({props:{label:"Go Forward",icon:et}}),g.$on("click",t[12]),{c(){e=l("div"),B(n.$$.fragment),o=h(),i=l("span"),c=l("input"),f=h(),B(g.$$.fragment),w=h(),x=l("div"),v=l("div"),b=d(E),k=h(),M=l("div"),C=m("svg"),D=m("path"),r(c,"type","range"),r(c,"min",xn),r(c,"max",t[2]),r(c,"class",null),r(i,"class","flex-grow mx-5 mt-1 w-full null"),r(D,"d","m0 0h24c-12 6-12 18 0 24h-24c12 -6 12-18 0-24z"),r(C,"width","100%"),r(C,"class","h-6 w-[20px]  null"),r(C,"viewBox","0 0 24 24"),r(C,"fill","#2663eb"),r(C,"stroke","none"),r(C,"preserveAspectRatio","none"),r(M,"class","-mt-0.5 absolute null"),r(M,"style",T=`left:${t[5]/2-10}px`),r(v,"class","rounded-md bg-blue-600 text-center text-xl text-white w-full px-1 time-label relative tabular-nums null"),r(v,"style",S=`transform: translateX(${t[6]}px)`),r(x,"class","-top-10 left-0 z-20 absolute null"),r(e,"class","flex my-2 relative null")},m(l,r){a(l,e,r),z(n,e,null),p(e,o),p(e,i),p(i,c),t[10](c),J(c,t[0]),p(e,f),z(g,e,null),p(e,w),p(e,x),p(x,v),p(v,b),p(v,k),p(v,M),p(M,C),p(C,D),t[13](v),H=!0,N||(P=[s(c,"change",t[11]),s(c,"input",t[11])],N=!0)},p(t,[e]){(!H||4&e)&&r(c,"max",t[2]),1&e&&J(c,t[0]),(!H||3&e)&&E!==(E=vn(t[1][t[0]])+"")&&j(b,E),(!H||32&e&&T!==(T=`left:${t[5]/2-10}px`))&&r(M,"style",T),(!H||64&e&&S!==(S=`transform: translateX(${t[6]}px)`))&&r(v,"style",S)},i(t){H||($(n.$$.fragment,t),$(g.$$.fragment,t),H=!0)},o(t){y(n.$$.fragment,t),y(g.$$.fragment,t),H=!1},d(l){l&&u(e),L(n),t[10](null),L(g),t[13](null),N=!1,X(P)}}}let xn=0;function vn(t){return new Intl.DateTimeFormat("default",{hourCycle:"h23",hour:"numeric",minute:"numeric"}).format(t)}function bn(t,e,n){let{sliderValue:l=0}=e,{times:r=[]}=e,a=100;const s=I();let o,i,c=1,u=1,d=0,m=0;return t.$$set=t=>{"sliderValue"in t&&n(0,l=t.sliderValue),"times"in t&&n(1,r=t.times)},t.$$.update=()=>{var e,f,p;if(2&t.$$.dirty&&(n(2,a=r.length-1),p=null!=(f=null==(e=Ht(r))?void 0:e.index)?f:0,n(0,l=p)),24&t.$$.dirty&&(o&&(n(7,c=o.offsetWidth),n(8,d=o.offsetLeft)),i&&n(5,u=i.offsetWidth)),423&t.$$.dirty){const t=r[l];t&&s("timeSelected",t),n(6,m=d+16-u/2+l*((c-32)/a))}},[l,r,a,o,i,u,m,c,d,()=>n(0,l=Math.max(0,l-1)),function(t){P[t?"unshift":"push"]((()=>{o=t,n(3,o)}))},function(){l=nt(this.value),n(0,l)},()=>n(0,l=Math.min(a,l+1)),function(t){P[t?"unshift":"push"]((()=>{i=t,n(4,i)}))}]}class kn extends t{constructor(t){super(),e(this,t,bn,yn,n,{sliderValue:0,times:1})}}function Mn(t){let e,n,o,m,f,g,w,x,v,b,k,M,C,D,T,S,H,N,P,E,G,j,F,O;return x=new wn({props:{clouds:t[2],viewBounds:t[3]}}),k=new kn({props:{times:t[1]}}),k.$on("timeSelected",t[12]),{c(){e=l("div"),n=l("div"),o=l("div"),m=l("span"),m.textContent="Regenradar",f=h(),g=l("span"),g.textContent="×",w=h(),B(x.$$.fragment),v=h(),b=l("div"),B(k.$$.fragment),M=h(),C=l("div"),D=l("a"),T=d(t[4]),S=l("span"),S.textContent=",",H=h(),N=l("a"),P=d(t[6]),r(g,"class","cursor-pointer font-extralight text-lg px-3 right-5 absolute null"),r(g,"role","button"),r(o,"class","text-size-xl text-center pt-2 pb-4 null"),r(b,"class",null),r(n,"class","flex-col mt-2 dark:bg-dark-600 null"),r(D,"href",t[5]),r(D,"class",null),r(S,"class",null),r(N,"href",t[7]),r(N,"class",null),r(C,"class","text-center leading-3 source dark:bg-dark-600 null"),r(e,"class","flex flex-col space-y-2 top-0 right-0 left-0 z-20 absolute select-none children:shadow-md children:rounded-md children:max-w-sm children:p-2 children:bg-white children:mx-5 children:z-20  null")},m(l,r){a(l,e,r),p(e,n),p(n,o),p(o,m),p(o,f),p(o,g),p(n,w),z(x,n,null),p(n,v),p(n,b),z(k,b,null),p(e,M),p(e,C),p(C,D),p(D,T),p(C,S),p(C,H),p(C,N),p(N,P),j=!0,F||(O=[s(g,"click",t[9]),s(o,"click",t[9]),lt(E=rt.call(null,e,{timeframe:500,minSwipeDistance:35,touchAction:"none"})),s(e,"swipe",t[13])],F=!0)},p(t,e){const n={};4&e&&(n.clouds=t[2]),8&e&&(n.viewBounds=t[3]),x.$set(n);const l={};2&e&&(l.times=t[1]),k.$set(l)},i(t){j||($(x.$$.fragment,t),$(k.$$.fragment,t),i((()=>{G||(G=c(e,V,{y:-300},!0)),G.run(1)})),j=!0)},o(t){y(x.$$.fragment,t),y(k.$$.fragment,t),G||(G=c(e,V,{y:-300},!1)),G.run(0),j=!1},d(t){t&&u(e),L(x),L(k),t&&G&&G.end(),F=!1,X(O)}}}function Cn(t){let e,n,l,r;e=new Je({props:{show:t[0]}}),e.$on("close",t[9]);let s=t[0]&&Mn(t);return{c(){B(e.$$.fragment),n=h(),s&&s.c(),l=g()},m(t,o){z(e,t,o),a(t,n,o),s&&s.m(t,o),a(t,l,o),r=!0},p(t,[n]){const r={};1&n&&(r.show=t[0]),e.$set(r),t[0]?s?(s.p(t,n),1&n&&$(s,1)):(s=Mn(t),s.c(),$(s,1),s.m(l.parentNode,l)):s&&(w(),y(s,1,1,(()=>{s=null})),x())},i(t){r||($(e.$$.fragment,t),$(s),r=!0)},o(t){y(e.$$.fragment,t),y(s),r=!1},d(t){L(e,t),t&&u(n),s&&s.d(t),t&&u(l)}}}function Bn(t,e,n){let l,r,a;S(t,Ut,(t=>n(0,l=t))),S(t,Xt,(t=>n(10,r=t))),S(t,Rt,(t=>n(11,a=t)));let s,o=[],i=[],c=[],u=new Map;function d(t){n(2,c=u.get(t))}function m(){E(Ut,l=!1,l)}return t.$$.update=()=>{var e,c;2049&t.$$.dirty&&l&&At(a)&&async function(){try{k(Wt).postMessage({type:"cloudData",data:{bounds:St(k(Rt)),onlyNow:!1}})}catch(t){console.error(t)}}(),1024&t.$$.dirty&&(null==(e=null==r?void 0:r.viewBounds)?void 0:e.lb)&&(n(3,s=(c=r).viewBounds),n(1,o=c.times),i=c.clouds,o.forEach((t=>{u.set(t,le(i,t))})))},[l,o,c,s,"Kartendarstellung: © Bundesamt für Kartographie und Geodäsie (2021)","http://www.bkg.bund.de/","Datenquellen","https://sg.geodatenzentrum.de/web_public/Datenquellen_TopPlus_Open.pdf",d,m,r,a,t=>d(t.detail),({detail:t})=>"top"===t.direction?m():null]}class Dn extends t{constructor(t){super(),e(this,t,Bn,Cn,G,{})}}function zn(t,e,n){const l=t.slice();return l[8]=e[n],l}function Ln(t){var e;let n,o,c,m,f,g,b,k,M,C,D,T,S,H,N,P,E,G,A,R,V,W,I,U,q,_,Y,K,X,J,Q,Z=t[2].title+"",tt=t[2].time+"",et=t[2].description+"";m=new Zt({props:{d:null!=(e=Gn[t[2].icon])?e:Gn.default,fill:bt(Bt,t[4])}});let nt=t[0].length>1&&Tn(t);N=new Zt({props:{d:ut,fill:t[1]?null:bt(Bt,t[4])}});let lt=!!t[2].instruction&&Sn(t),rt=t[3],st=[];for(let l=0;rt.length>l;l+=1)st[l]=Nn(zn(t,rt,l));const ot=t=>y(st[t],1,1,(()=>{st[t]=null}));return{c(){n=l("div"),o=l("div"),c=l("div"),B(m.$$.fragment),f=h(),g=l("div"),b=d(Z),k=l("span"),k.textContent="!",M=h(),nt&&nt.c(),C=h(),D=l("div"),T=d(tt),S=h(),H=l("div"),B(N.$$.fragment),P=h(),E=l("div"),G=l("div"),A=l("div"),R=h(),V=l("div"),W=l("div"),I=l("div"),U=d(et),q=h(),lt&&lt.c(),_=h(),Y=l("div");for(let t=0;st.length>t;t+=1)st[t].c();r(c,"class","flex h-5 px-3 w-5 self-center null"),r(k,"class","ml-[0.15rem] text-orange-600 null"),r(g,"class","flex flex-grow font-semibold flex-shrink-0 self-center overflow-hidden overflow-ellipsis null"),r(D,"class","flex font-light text-xs self-center null"),r(H,"class","p-2 pt-3 transition-transform w-8 self-center null"),F(H,"mirrored-y",!t[1]),r(o,"class","rounded-md flex space-x-1 h-14 w-full clickable null"),F(o,"shadow-md",!t[1]),r(A,"class","h-7 w-full bottom-0 linear-fade absolute null"),F(A,"dark",t[4]),r(I,"class",null),r(W,"class","children:px-2 null"),r(Y,"class","py-5 children:px-2 null"),r(V,"class","h-full text-sm py-2 leading-5 overflow-y-auto box-border custom-scrollbar null"),r(E,"class","rounded-md max-h-60 transform origin-top transition-all relative height-transition overflow-hidden dark:bg-dark-800 null"),F(E,"max-h-0",t[1]),F(E,"pb-2",!t[1]),r(n,"class","bg-white rounded-md shadow-md mx-1 dark:bg-dark-600 null")},m(e,l){a(e,n,l),p(n,o),p(o,c),z(m,c,null),p(o,f),p(o,g),p(g,b),p(g,k),p(g,M),nt&&nt.m(g,null),p(o,C),p(o,D),p(D,T),p(o,S),p(o,H),z(N,H,null),p(n,P),p(n,E),p(E,G),p(G,A),p(G,R),p(G,V),p(V,W),p(W,I),p(I,U),p(W,q),lt&&lt.m(W,null),p(V,_),p(V,Y);for(let t=0;st.length>t;t+=1)st[t].m(Y,null);X=!0,J||(Q=s(o,"click",t[5]),J=!0)},p(t,e){var n;const l={};4&e&&(l.d=null!=(n=Gn[t[2].icon])?n:Gn.default),16&e&&(l.fill=bt(Bt,t[4])),m.$set(l),(!X||4&e)&&Z!==(Z=t[2].title+"")&&j(b,Z),t[0].length>1?nt?nt.p(t,e):(nt=Tn(t),nt.c(),nt.m(g,null)):nt&&(nt.d(1),nt=null),(!X||4&e)&&tt!==(tt=t[2].time+"")&&j(T,tt);const r={};if(18&e&&(r.fill=t[1]?null:bt(Bt,t[4])),N.$set(r),2&e&&F(H,"mirrored-y",!t[1]),2&e&&F(o,"shadow-md",!t[1]),16&e&&F(A,"dark",t[4]),(!X||4&e)&&et!==(et=t[2].description+"")&&j(U,et),t[2].instruction?lt?lt.p(t,e):(lt=Sn(t),lt.c(),lt.m(W,null)):lt&&(lt.d(1),lt=null),8&e){let n;for(rt=t[3],n=0;rt.length>n;n+=1){const l=zn(t,rt,n);st[n]?(st[n].p(l,e),$(st[n],1)):(st[n]=Nn(l),st[n].c(),$(st[n],1),st[n].m(Y,null))}for(w(),n=rt.length;st.length>n;n+=1)ot(n);x()}2&e&&F(E,"max-h-0",t[1]),2&e&&F(E,"pb-2",!t[1])},i(t){if(!X){$(m.$$.fragment,t),$(N.$$.fragment,t);for(let t=0;rt.length>t;t+=1)$(st[t]);K||i((()=>{K=at(n,v,{duration:150}),K.start()})),X=!0}},o(t){y(m.$$.fragment,t),y(N.$$.fragment,t),st=st.filter(Boolean);for(let e=0;st.length>e;e+=1)y(st[e]);X=!1},d(t){t&&u(n),L(m),nt&&nt.d(),L(N),lt&&lt.d(),O(st,t),J=!1,Q()}}}function Tn(t){let e,n,s=`+(${t[0].length-1})`;return{c(){e=l("span"),n=d(s),r(e,"class","font-light text-xs ml-2 tracking-wide tabular-nums self-center null")},m(t,l){a(t,e,l),p(e,n)},p(t,e){1&e&&s!==(s=`+(${t[0].length-1})`)&&j(n,s)},d(t){t&&u(e)}}}function Sn(t){let e,n,s,o,i,c=t[2].instruction+"";return{c(){e=l("div"),n=l("div"),n.textContent="ACHTUNG! Hinweis auf mögliche Gefahren:",s=h(),o=l("div"),i=d(c),r(n,"class","font-semibold null"),r(e,"class","mt-2 null")},m(t,l){a(t,e,l),p(e,n),p(e,s),p(e,o),p(o,i)},p(t,e){4&e&&c!==(c=t[2].instruction+"")&&j(i,c)},d(t){t&&u(e)}}}function Hn(t){let e,n,s,o,i,c,m=t[8].instruction+"";return{c(){e=l("div"),n=l("div"),n.textContent="ACHTUNG! Hinweis auf mögliche Gefahren:",s=h(),o=l("div"),i=d(m),c=h(),r(n,"class","font-semibold null"),r(e,"class","mt-2 null")},m(t,l){a(t,e,l),p(e,n),p(e,s),p(e,o),p(o,i),p(e,c)},p(t,e){8&e&&m!==(m=t[8].instruction+"")&&j(i,m)},d(t){t&&u(e)}}}function Nn(t){var e;let n,s,o,i,c,m,f,w,x,v,b,k,M,C,D,T=t[8].title+"",S=t[8].time+"",H=t[8].description+"";o=new Zt({props:{d:null!=(e=Gn[t[8].icon])?e:Gn.default}});let N=!!t[8].instruction&&Hn(t);return{c(){n=l("div"),s=l("div"),B(o.$$.fragment),i=h(),c=l("div"),m=d(T),f=h(),w=l("div"),x=d(S),v=h(),b=l("div"),k=d(H),M=h(),N&&N.c(),C=g(),r(s,"class","flex h-5 mr-2 ml-1 w-5 self-center null"),r(c,"class","flex flex-grow font-semibold self-center overflow-hidden overflow-ellipsis null"),r(w,"class","flex font-light text-xs pr-2 self-center tabular-nums  null"),r(n,"class","flex space-x-1 bg-light-400 h-8 mt-5 mb-2 dark:bg-dark-500 null"),r(b,"class",null)},m(t,e){a(t,n,e),p(n,s),z(o,s,null),p(n,i),p(n,c),p(c,m),p(n,f),p(n,w),p(w,x),a(t,v,e),a(t,b,e),p(b,k),a(t,M,e),N&&N.m(t,e),a(t,C,e),D=!0},p(t,e){var n;const l={};8&e&&(l.d=null!=(n=Gn[t[8].icon])?n:Gn.default),o.$set(l),(!D||8&e)&&T!==(T=t[8].title+"")&&j(m,T),(!D||8&e)&&S!==(S=t[8].time+"")&&j(x,S),(!D||8&e)&&H!==(H=t[8].description+"")&&j(k,H),t[8].instruction?N?N.p(t,e):(N=Hn(t),N.c(),N.m(C.parentNode,C)):N&&(N.d(1),N=null)},i(t){D||($(o.$$.fragment,t),D=!0)},o(t){y(o.$$.fragment,t),D=!1},d(t){t&&u(n),L(o),t&&u(v),t&&u(b),t&&u(M),N&&N.d(t),t&&u(C)}}}function Pn(t){let e,n,l=t[0].length>0&&Ln(t);return{c(){l&&l.c(),e=g()},m(t,r){l&&l.m(t,r),a(t,e,r),n=!0},p(t,[n]){t[0].length>0?l?(l.p(t,n),1&n&&$(l,1)):(l=Ln(t),l.c(),$(l,1),l.m(e.parentNode,e)):l&&(w(),y(l,1,1,(()=>{l=null})),x())},i(t){n||($(l),n=!0)},o(t){y(l),n=!1},d(t){l&&l.d(t),t&&u(e)}}}const En={icon:it,title:"",description:"",time:"",instruction:""},Gn={1:st,3:ot,default:it};function jn(t,e){const n=t.getDay()===e.getDay();return{...Object.fromEntries(new Intl.DateTimeFormat("de-DE",{hour:"numeric",day:"2-digit",weekday:"short"}).formatToParts(e).map((({type:t,value:e})=>[t,e.replace(/\./g,"")]))),today:n}}function Fn(t,{start:e,end:n}){const l=e.getDay()===n.getDay(),r=jn(t,e),a=jn(t,n);return(t>e?"bis ":(r.today?"":r.weekday+" ")+r.hour+" - ")+(a.today||l?"":a.weekday+" ")+a.hour+" Uhr"}function On(t,e,n){let l,r,a;S(t,Yt,(t=>n(6,l=t))),S(t,Rt,(t=>n(7,r=t))),S(t,It,(t=>n(4,a=t)));let s=!0,o=En,i=[],c=[];return t.$$.update=()=>{var e;if(193&t.$$.dirty){let t=r,a=[t.lon,t.lat];if(l.length>0){const r=new Date;n(0,i=l.map((t=>({time:Fn(r,t.time),level:t.level,icon:t.type,title:t.event,description:t.description,instruction:t.instruction.replace("ACHTUNG! Hinweis auf mögliche Gefahren: ",""),regions:t.regions}))).filter((e=>e.regions.some((e=>function({lon:t,lat:e},n){const l=.02;return!(n.lb.lon>t+l||t-l>n.rt.lon||n.lb.lat>e+l||e-l>n.rt.lat)}(t,e.bounds)&&ct(a,e.polygon)))))),n(2,o=null!=(e=null==i?void 0:i[0])?e:En),n(3,c=i.slice(1))}}},[i,s,o,c,a,function(){n(1,s=!s)},l,r]}class An extends t{constructor(t){super(),e(this,t,On,Pn,n,{})}}const{document:Rn}=dt;function Vn(t){let e,n,s,o,i,c,d,m,f,g,w,x,v,b,k,M,C,D,T,S,H;return i=new fn({}),d=new be({}),f=new An({}),w=new Ue({}),v=new Dn({}),M=new $t({}),{c(){e=l("meta"),s=h(),o=l("main"),B(i.$$.fragment),c=h(),B(d.$$.fragment),m=h(),B(f.$$.fragment),g=h(),B(w.$$.fragment),x=h(),B(v.$$.fragment),b=h(),k=l("footer"),B(M.$$.fragment),C=h(),D=l("span"),D.innerHTML='Quelle:\n    <a href="https://www.dwd.de" class="null">Deutscher Wetterdienst</a>',T=h(),S=l("span"),S.innerHTML='via\n    <a href="https://brightsky.dev" class="null">brightsky.dev</a>',r(e,"name","theme-color"),r(e,"content",n=t[0]?"#000":"#fff"),r(o,"class","m-auto max-w-sm mt-0 w-full grid gap-1 grid-cols-1 relative null"),r(D,"class",null),r(S,"class",null),r(k,"class","space-y-2 bg-gray-200 mt-5 text-sm text-center py-10 dark:bg-dark-800 children:block null")},m(t,n){p(Rn.head,e),a(t,s,n),a(t,o,n),z(i,o,null),p(o,c),z(d,o,null),p(o,m),z(f,o,null),p(o,g),z(w,o,null),p(o,x),z(v,o,null),a(t,b,n),a(t,k,n),z(M,k,null),p(k,C),p(k,D),p(k,T),p(k,S),H=!0},p(t,[l]){(!H||1&l&&n!==(n=t[0]?"#000":"#fff"))&&r(e,"content",n)},i(t){H||($(i.$$.fragment,t),$(d.$$.fragment,t),$(f.$$.fragment,t),$(w.$$.fragment,t),$(v.$$.fragment,t),$(M.$$.fragment,t),H=!0)},o(t){y(i.$$.fragment,t),y(d.$$.fragment,t),y(f.$$.fragment,t),y(w.$$.fragment,t),y(v.$$.fragment,t),y(M.$$.fragment,t),H=!1},d(t){u(e),t&&u(s),t&&u(o),L(i),L(d),L(f),L(w),L(v),t&&u(b),t&&u(k),L(M)}}}function Wn(t,e,n){let l;S(t,It,(t=>n(0,l=t)));let r=window.matchMedia("(prefers-color-scheme: dark)");const a=t=>{t.matches?(document.documentElement.classList.add("dark"),E(It,l=!0,l)):(document.documentElement.classList.remove("dark"),E(It,l=!1,l))};return a(r),r.addEventListener("change",a),[l]}!function(t={}){const{immediate:e=!1,onOfflineReady:n,onRegistered:l,onRegisterError:r}=t;let a;"serviceWorker"in navigator&&(a=new mt("/wettr/sw.js",{scope:"/wettr/"}),a.addEventListener("activated",(t=>{t.isUpdate?window.location.reload():null==n||n()})),a.register({immediate:e}).then((t=>{null==l||l(t)})).catch((t=>{null==r||r(t)})))}({onOfflineReady(){}}),new class extends t{constructor(t){super(),e(this,t,Wn,Vn,G,{})}}({target:document.getElementById("app")});
