import{p as a,l as e,q as r,F as t,n as l,o as s,P as n,f as p,k as i,c as m,e as o,i as c,g as u,t as d,u as h,h as f,j as v,w as g,v as k,V as w,W as B,X as b}from"./index-DWwHgLzr.js";let x=(a,e)=>M(Math.ceil(I(a)/e)).map((r=>a.substr(r++*e,e))),P=(a,e="")=>e.padStart(a,"0"),L=(a,e)=>P(e,a.toString(2)),j=a=>[...a].map(Number),y=(a,e)=>Array.from({length:e-a},((e,r)=>r+a)),M=a=>y(0,a),A=a=>{let e=M(a).map((()=>null));return e.map((()=>e.slice()))},C=a=>a.slice().map((a=>a.slice())),I=a=>a.length,W=(a,e,r=()=>{},t=0)=>{a.map(((l,s)=>(l.map(((r,l)=>0===t?e(r,l,s,a):e(a[l][s],s,l,a))),r(s,a))))},$=a=>{let e,r=0,t=[];for(;r<I(a);r++)128>(e=a.charCodeAt(r))&&t.push(e)||(2048>e?t.push(e>>6|192):(e>55295&&56320>e?(e=65536+((1023&e)<<10)+(1023&a.charCodeAt(++r)),t.push(e>>18|240,e>>12&63|128)):t.push(e>>12|224),t.push(e>>6&63|128)),t.push(63&e|128));return t};var q=(a=>(a[a.L=0]="L",a[a.M=1]="M",a[a.Q=2]="Q",a[a.H=3]="H",a))(q||{});let N,E,H,O=x("0011030906060a020325091a14141a0908441834100a1406126710231816090218921633100814041056091916111a0812651022100718061682142914101807219a1427120916051056183316111a081268213a1a1416051678142718121a0718911428161214042199163012091605147316312116160516831a35161121081a911a361a141a0721a318331a141a071a971834181318061a91183121161a081a9a18321a1421091a951a362116160621a41a372116210821a01a352116210918901a37211621081a981a361a14210921a51a352115210821a01a3521162108219a1a352115210821991a372116210821991a362116210821991a362116210821991a362116210821991a362116210921a41a372116210821a41a372116210821a51a362116210821a51a362116210821a01a372116210821a11a3721162108",2).map((a=>parseInt(a,11)+7)),Q=a=>17+4*a,S=a=>{let e=Q(a),r=2+(0|a/7);return-191-2*e+e*e-((5*r-1)*(5*r-1)-56)*+(a>1)-36*+(a>6)},D=a=>S(a)%8,F=a=>{let e=4+4*a,r=0|a/7,t=0|e/(r+1),l=t,s=l;return r>1&&(s=2*Math.ceil(((e-t)/r+1e-4)/2),l=e-s*r),2>a?[]:[6,...M(r+1).map((a=>6+l+a*s))]},V=[];y(1,41).map((a=>{M(4).map((e=>{H=((a,e)=>{let r=8*a-8+2*e,t=O[r],l=O[++r],s=0|S(a)/8,n=0,p=0,i=t+l;for(;57>p&&(n=(s-i*p)/(i+1))%1!=0;p++);let m=[{blocks:p,wordsPerBlock:l,ecPerBlock:t}];return n>0&&l++,m.push({blocks:n,wordsPerBlock:l,ecPerBlock:t}),m})(a,e),N=8*H.reduce(((a,e)=>a+e.wordsPerBlock*e.blocks),0),E=(a=>a>9?16:8)(a),V.push({ecLevel:e,version:a,groups:H,requiredNumberOfBits:N,characterCountBits:E,upperLimit:0|(N-(4+E))/8,remainderBits:D(a),dimensions:Q(a),alignmentPattern:F(a)})}))}));let X=0,z=[(a,e)=>(a+e)%2,(a,e)=>e%2,a=>a%3,(a,e)=>(a+e)%3,(a,e)=>(0|e/2+(0|a/3))%2,(a,e)=>a*e%2+a*e%3,(a,e)=>(a*e%2+a*e%3)%2,(a,e)=>((a+e)%2+a*e%3)%2],G={},J={1:0};M(255).reduce(((a,e)=>(J[G[e]=a]=e,128&a?2*a^285:2*a)),1);let K,R,T,U,Y=(a,e)=>a*e==0?0:G[(J[a]+J[e])%255],Z=(a,e)=>(K=a.slice(),M(I(a)-I(e)+1).map((a=>y(1,I(e)).map((r=>K[a+r]^=Y(e[r],K[a]))))),K.slice(I(K)-I(e)+1)),_=a=>(T=[],M(I(a)).map((e=>M(I(a[e])).map((r=>T[r*I(a)+e]=a[e][r])))),T);var aa=w("<line></line>"),ea=p('<div class="flex min-w-72 flex-col bg-white"><svg><g stroke-width="1.1" stroke-linecap="round"></g></svg> <div class="self-center p-2 font-semibold text-black">Wettr-Link</div></div>');function ra(p,w){a(w,1);let N=e(w,"opened",15,0),E=e(w,"onclosed",3,(()=>0)),H=r(t([])),O=h((()=>u(H).length+6));l((()=>{N()?(s(H,((a,e=q.L)=>{let r=((a,e)=>((a,e)=>{let r=V.filter((r=>r.ecLevel===e&&r.upperLimit>=a));if(!r)throw new Error("Input too long!");return r[0]})(I($(a)),e))(a,e);return((a,e)=>{let r=(a=>{let e=A(a.dimensions);var r,t;return(a=>{let e=I(a),r=e-7,t=(e,r)=>{a[r+3][e+3]=1,M(3).map((t=>{y(t,7-t).map((l=>a[r+t][e+l]=a[r+6-t][e+l]=a[r+l][e+t]=a[r+l][e+6-t]=t%2==0))}))};M(8).map((t=>a[t][7]=a[7][t]=a[7][e-t-1]=a[e-t-1][7]=a[r-1][t]=a[t][r-1]=0)),t(0,0),t(0,r),t(r,0)})(e),r=e,(t=a.alignmentPattern).map(((a,e)=>t.slice(+(0===e||e===I(t)-1),e>0?I(t):-1).map((e=>M(3).map((t=>y(t,5-t).map((l=>r[e-2+t][a-2+l]=r[e+2-t][a-2+l]=r[e-2+l][a-2+t]=r[e-2+l][a+2-t]=t%2==0)))))))),((a,e)=>{let r=I(a);[M(9),y(r-8,r)].flat().map((e=>a[e][8]=a[8][e]=0)),7>e||M(3).map((e=>M(6).map((t=>a[r-11+e][t]=a[t][r-11+e]=0))))})(e,a.version),(a=>{y(7,I(a)-7).map((e=>a[6][e]=a[e][6]=e%2==0))})(e),(a=>{a[a.length-8][8]=1})(e),e})(a),t=((a,e)=>{let r=A(I(a)),t=I(a)-1,l=t,s=t,n=0,p=0,i=-1;for(;p<I(e);)null===a[s][l-n]&&(r[s][l-n]="1"===e[p++]),1===n&&(s+=i,(0>s||s>t)&&(s=(t+t*i)/2,i*=-1,l-=2)),n^=1,l>=6&&7>=l&&(l=5);return r})(r,e),{mask:l,matrix:s}=((a,e)=>z.map((r=>((a,e)=>{let r=C(a);return W(a,((a,t,l)=>null===a&&(r[l][t]=e[l][t]))),r})(a,((a,e)=>{let r=C(a);return W(r,((a,t,l)=>e(t,l)?0:r[l][t]=!a)),r})(e,r)))).reduce(((a,e,r)=>((a=>{X=0,(a=>{let e=0,r=0,t=()=>{X+=5>r?0:r-2,r=0};[0,1].map((l=>{W(a,(a=>{a!==e&&(t(),e=a),r++}),t,l)}))})(a),(a=>{W(a,((e,r,t)=>{if(r<I(a)-1&&t<I(a)-1){let e=M(4).reduce(((e,l,s)=>e|+a[t+(l>>1)][r+(1&l)]<<s),0);X+=e%15==0?3:0}}))})(a),(a=>{let e=[{template:j("10111010000"),current:0},{template:j("00001011101"),current:0}];[0,1].map((r=>{W(a,(a=>e.map((e=>{e.current+=+a===e.template[e.current]?1:-e.current,e.current<I(e.template)||(X+=40,e.current=0)}))),(()=>e.map((a=>a.current=0))),r)}))})(a),(a=>{let e=0;W(a,(a=>e+=+a));let r=+e/(I(a)*I(a))*100,t=r-(5&r);X+=10*Math.min(...[t,t+5].map((a=>Math.abs(a-50)/5)))+5})(a)})(e),a.score>X?{score:X,mask:r,matrix:e}:a)),{score:1<<30,mask:0,matrix:[]}))(r,t);return((a,e,r)=>{let t=x("01001110",2)[a]+L(e,3),l=L(21522^parseInt(t+P(10,Z(j(t+P(10)),j("10100110111")).join("")),2),15),s=0,n=0;[M(9),y(I(r)-7,I(r))].flat().map(((a,e,t)=>{let p=t[t.length-1-e];6!==a&&(r[8][a]="1"===l[s++]),6!==p&&p!==I(r)-8&&(r[p][8]="1"===l[n++])}))})(a.ecLevel,l,s),((a,e)=>{if(7>a)return e;let r=L(a,6),t=r+P(12,Z(j(r+P(12)),j("1111100100101")).join("")),l=0;return M(6).map((a=>M(3).map((r=>e[e.length-9-r][5-a]=e[5-a][I(e)-9-r]="1"===t[l++])))),e})(a.version,s)})(r,((a,e)=>{return U=((a,e)=>(R=0,a.groups.map((a=>M(a.blocks).map((()=>M(a.wordsPerBlock).map((()=>e[R++])))))).flat()))(a,x((r=a.requiredNumberOfBits,t="0100"+L(I(e),a.characterCountBits)+(a=>$(a).map((a=>L(a,8))).join(""))(e),t+=P(4>r-I(t)?r-I(t):4),(t+=P(8-I(t)%8)).padEnd(r,"1110110000010001").substr(0,r)),8).map((a=>parseInt(a,2)))),[_(U),_(U.map((e=>{return Z(e.concat(M(r=a.groups[0].ecPerBlock).map((()=>0))),M(r).reduce(((a,e)=>{return r=[1,G[e]],K=[],a.map(((a,e)=>r.map(((r,t)=>K[e+t]^=Y(r,a))))),K;var r}),[1]));var r})))].flat().map((a=>L(a,8))).join("")+P(a.remainderBits);var r,t})(r,a))})(window.location.href,1),1),async function(){try{navigator.share&&await navigator.share({title:"Wettr",text:"Die einfache Wetter App.",url:window.location.href})}catch(a){}}()):E()()})),n(p,{get opened(){return N()},set opened(a){N(a)},children(a){var e=ea(),r=m(e),t=m(r);i(t,"transform","translate( 3 3)"),o(t,21,(()=>u(H)),c,((a,e,r)=>{var t=g(),l=k(t);o(l,17,(()=>u(e)),c,((a,e,t)=>{var l=aa();i(l,"x1",t),i(l,"y1",r),i(l,"x2",t),i(l,"y2",r),d((()=>B(l,0,b([u(e)&&"stroke-primary"])))),f(a,l)})),f(a,t)})),d((()=>i(r,"viewBox",`0 0 ${u(O)} ${u(O)}`))),f(a,e)},$$slots:{default:1}}),v()}export{ra as default};
