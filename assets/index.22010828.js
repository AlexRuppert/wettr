import{g as t,w as e,r as n,S as r,i as a,n as l,s as i,a as o,b as s,c,d as u,e as d,f,l as m,t as p,h,m as g,j as $,k as w,o as y,p as x,q as v,u as b,v as k,x as M,y as C,z as B,A as D,B as T,C as z,D as L,E as P,F as S,G as E,H as W,I as j,J as N,K as F,L as H,M as O,N as I,O as R,P as G,Q as A,R as q,T as U,U as V,V as _,W as Y,X as K,Y as X,Z as J,_ as Q,$ as Z,a0 as tt,a1 as et,a2 as nt,a3 as rt,a4 as at,a5 as lt,a6 as it}from"./vendor.cf878004.js";function ot(t,e){return e?t.dark:t.light}!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const n of t)if("childList"===n.type)for(const t of n.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerpolicy&&(e.referrerPolicy=t.referrerpolicy),e.credentials="use-credentials"===t.crossorigin?"include":"anonymous"===t.crossorigin?"omit":"same-origin",e}(t);fetch(t.href,e)}}();const st={foreground:{light:"#444444",dark:"#9ca3aa"},rain:{light:"#0066ED",dark:"#2784FF"},sun:{light:"#FFB901",dark:"#FFC637"},warning:{light:"#EA580C",dark:"#EA580C"}},ct=Math.PI/180;function ut(t){return Math.log(Math.tan(dt(t)/2+Math.PI/4))}function dt(t){return t*ct}function ft({lon:t,lat:e},n=8){const r=n/70;return{lb:{lat:e-r,lon:t-r},rt:{lat:e+r,lon:t+r}}}function mt(t){if(0>=t.length)return{index:-1,time:void 0};const e=(new Date).getTime(),n=t.map((t=>t.getTime())).reduce(((t,n,r,a)=>Math.abs(n-e)<Math.abs(a[t]-e)?r:t),0);return{index:n,time:t[n]}}let pt,ht=0;async function gt(e=!1){$t||(document.addEventListener("visibilitychange",(()=>gt())),document.addEventListener("pagehide",(()=>gt())),$t=!0),setTimeout((()=>{const n=document.visibilityState;(e||"visible"===n&&Date.now()>ht&&t(Ct))&&async function(){try{const e=t(Ct),n=t(Dt);n.postMessage({type:"currentWeatherData",data:e}),n.postMessage({type:"weatherData",data:{...e,days:7}}),n.postMessage({type:"currentCloudData",data:{bounds:ft(e),onlyNow:!0}}),n.postMessage({type:"weatherWarningData",data:e})}catch(e){console.error(e)}ht=Date.now()+6e5,clearTimeout(pt),pt=setTimeout(gt,6e5)}()}),0)}let $t=!1;async function wt(t,e=1e6){let n=await caches.match(t);if(n&&n.headers.get("x--cache-timestamp")&&+n.headers.get("x--cache-timestamp")+6e4*e>Date.now())return console.log("cached "+t),n;n=await fetch(t);const r=new Headers(n.headers);r.set("x--cache-timestamp",Date.now().toString());const a=n.clone(),l=new Response(a.body,{status:a.status,statusText:a.statusText,headers:r});return(await caches.open("v1")).put(t,l),n}let yt=[];const xt=async()=>(1>yt.length&&(yt=await(async()=>(await(await wt("/wettr/assets/locations.f4d31e90.json",10080)).json()).map((t=>({...t,search:t.name.split(/,|(\s(bei|am|in)\s)/)[0].trim().toLowerCase()}))))()),yt);async function vt(t){let e="",n=1/0;for(let l of await xt()){const i=(r=t.lon,a=+l.lon,Math.pow(t.lat-+l.lat,2)+Math.pow(r-a,2));n>i&&(n=i,e=l.name)}var r,a;return e}function bt({lat:t,lon:e}){return void 0!==t&&void 0!==e&&0!==t&&0!==e&&t>-500}function kt({lon:t,lat:e}){return`${(+t).toFixed(3)}_${(+e).toFixed(3)}`}function Mt(){const t=new URLSearchParams(window.location.search),e=Object.fromEntries(t.entries());let n={lon:0,lat:-500};try{const t=function(t){const[e,n]=t.split("_").map((t=>+t));return{lon:e,lat:n}}(e.coordinates);!t||Number.isNaN(t.lon)||Number.isNaN(t.lat)||(n=t)}catch(r){}return n}const Ct=e({lat:0,lon:0}),Bt=new function(){return new Worker("/wettr/assets/worker.087ec3a8.js",{type:"module"})};Bt.onmessage=function({data:{type:t,data:e}}){switch(t){case"currentWeatherData":Lt.set(e);break;case"weatherData":Pt.set(e);break;case"cloudData":Wt.set(e);break;case"currentCloudData":Et.set(e);break;case"weatherWarningData":St.set(e)}};const Dt=n(Bt),Tt=e(!1),zt=e(!1),Lt=e(null),Pt=e([]),St=e([]),Et=e({times:[],clouds:[],viewBounds:{}}),Wt=e({times:[],clouds:[],viewBounds:{}});let jt;function Nt(t){let e,n,r,a,l;return{c(){e=i("svg"),n=i("path"),o(n,"d",t[0]),o(e,"viewBox",r="0 0 "+t[4]+" "+t[4]),o(e,"fill",a=t[1]?"none":t[3]),o(e,"width","100%"),o(e,"height","100%"),o(e,"stroke",l=t[1]?t[3]:"none"),o(e,"stroke-linejoin","round"),o(e,"stroke-linecap","round"),o(e,"stroke-width",t[2])},m(t,r){s(t,e,r),c(e,n)},p(t,[i]){1&i&&o(n,"d",t[0]),16&i&&r!==(r="0 0 "+t[4]+" "+t[4])&&o(e,"viewBox",r),10&i&&a!==(a=t[1]?"none":t[3])&&o(e,"fill",a),10&i&&l!==(l=t[1]?t[3]:"none")&&o(e,"stroke",l),4&i&&o(e,"stroke-width",t[2])},i:u,o:u,d(t){t&&d(e)}}}function Ft(t,e,n){let{d:r}=e,{fill:a=null}=e,{outline:l=!1}=e,{strokeWidth:i=1.5}=e,o="#444";Tt.subscribe((t=>{n(6,o=ot(st.foreground,t))}));let s=o,c=5;return t.$$set=t=>{"d"in t&&n(0,r=t.d),"fill"in t&&n(5,a=t.fill),"outline"in t&&n(1,l=t.outline),"strokeWidth"in t&&n(2,i=t.strokeWidth)},t.$$.update=()=>{96&t.$$.dirty&&n(3,s=null!=a?a:o),3&t.$$.dirty&&r&&n(4,c=l||r.endsWith("z")?30:24)},[r,l,i,s,c,a,o]}Ct.subscribe((async t=>{!bt(t)||jt&&kt(jt)===kt(t)||(jt=t,gt(!0))})),Ct.set(Mt());class Ht extends r{constructor(t){super(),a(this,t,Ft,Nt,l,{d:0,fill:5,outline:1,strokeWidth:2})}}function Ot(t){let e,n,r;return{c(){e=f("button"),e.textContent="Als App installieren",o(e,"class","border border-solid rounded-md border-gray-400 mb-4 p-2 inline-block dark:bg-dark-400 dark:text-gray-300 light:text-gray-800 ")},m(a,l){s(a,e,l),n||(r=m(e,"click",t[2]),n=!0)},p:u,d(t){t&&d(e),n=!1,r()}}}function It(t){let e,n,r,a,l,i,b,k,M,C,D,T,z,L;return b=new Ht({props:{d:"M12 9h-1a2 2 0 00-2 2v8a2 2 0 00 2 2h8a2 2 0 00 2-2v-8a2 2 0 00-2-2h-1M15 15v-13l3 3m-3-3l-3 3",fill:"#16c",outline:!0}}),C=new Ht({props:{d:"M15 9h-4a2 2 0 00-2 2v8a2 2 0 00 2 2h8a2 2 0 00 2-2v-8a2 2 0 00-2-2zm0 3 v6m-3-3h6",fill:"#16c",outline:!0}}),{c(){e=f("div"),n=f("div"),r=p("Zum "),a=f("strong"),a.textContent="Home Screen",l=p(" hinzufügen:\r\n      "),i=f("span"),h(b.$$.fragment),k=p("\r\n      und\r\n      "),M=f("span"),h(C.$$.fragment),o(i,"class","install-icon"),o(M,"class","install-icon"),o(n,"class","rounded bg-light-100 shadow-md p-2 text-dark-400 helper relative"),o(e,"class","flex right-0 bottom-1 left-0 justify-center fixed")},m(o,u){s(o,e,u),c(e,n),c(n,r),c(n,a),c(n,l),c(n,i),g(b,i,null),c(n,k),c(n,M),g(C,M,null),T=!0,z||(L=m(n,"click",t[3]),z=!0)},p:u,i(t){T||($(b.$$.fragment,t),$(C.$$.fragment,t),w((()=>{D||(D=y(e,B,{},!0)),D.run(1)})),T=!0)},o(t){x(b.$$.fragment,t),x(C.$$.fragment,t),D||(D=y(e,B,{},!1)),D.run(0),T=!1},d(t){t&&d(e),v(b),v(C),t&&D&&D.end(),z=!1,L()}}}function Rt(t){let e,n,r,a=t[0]&&Ot(t),l=t[0]&&t[1]&&It(t);return{c(){a&&a.c(),e=b(),l&&l.c(),n=k()},m(t,i){a&&a.m(t,i),s(t,e,i),l&&l.m(t,i),s(t,n,i),r=!0},p(t,[r]){t[0]?a?a.p(t,r):(a=Ot(t),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null),t[0]&&t[1]?l?(l.p(t,r),3&r&&$(l,1)):(l=It(t),l.c(),$(l,1),l.m(n.parentNode,n)):l&&(M(),x(l,1,1,(()=>{l=null})),C())},i(t){r||($(l),r=!0)},o(t){x(l),r=!1},d(t){a&&a.d(t),t&&d(e),l&&l.d(t),t&&d(n)}}}function Gt(t,e,n){let r,a=/iPad|iPhone|iPod/.test(navigator.userAgent),l=!1,i=!1,o=!1;const s="standalone"in window.navigator,c=!0===window.navigator.standalone;return window.addEventListener("beforeinstallprompt",(t=>{r=t,window.matchMedia("(display-mode: standalone)").matches||navigator.standalone||n(0,l=!0)})),window.addEventListener("appinstalled",(()=>{n(0,l=!1),o=!0})),o||!s||c||(l=!0),[l,i,async()=>{a?n(1,i=!i):(r.prompt(),"accepted"===r.userChoice.outcome&&(n(0,l=!1),o=!0))},()=>n(1,i=!1)]}class At extends r{constructor(t){super(),a(this,t,Gt,Rt,l,{})}}function qt(t){let e,n,r,a,l,f,m,p,h,g,$,w,y,x,v,b,k,M,C,B,D,T,z;return{c(){e=i("svg"),n=i("defs"),r=i("path"),a=i("path"),l=i("path"),f=i("path"),m=i("path"),p=i("path"),h=i("path"),g=i("path"),$=i("path"),w=i("path"),y=i("path"),x=i("path"),v=i("path"),b=i("path"),k=i("use"),C=i("use"),T=i("use"),o(r,"id","sun"),o(r,"d","M15 10.5a4.5 4.5 0 10.001 0"),o(a,"id","sun-rays"),o(a,"d","M15 5v2m0 18v-2M5 15h2m18 0h-2M7.75 7.75l1.4 1.4m13.1 13.1l-1.4-1.4m1.4-13.1l-1.4 1.4m-13.1 13.1l1.4-1.4"),o(l,"id","cloud-open"),o(l,"d","M7 20a4 4 0 110-8h1a4 4 0 1110-0h1.5a4 4 0 110 8"),o(f,"id","cloud"),o(f,"d","M7 20a4 4 0 110-8h1a4 4 0 1110-0h1.5a4 4 0 110 8z"),o(m,"id","sun-part"),o(m,"d","M18 7a3.8 3.8 0 116 4.5"),o(p,"id","sun-part-rays"),o(p,"d","M21.5 1.2l0 1.5M27.5 8.8l1.5 0M25.8 4.6l1.1-1.1M17 4.6l-1.1-1.1M25.8 13l1.1 1.1"),o(h,"id","cloud-part"),o(h,"d","M18.2 7.1a4 4 0 016.7 2.9h1a3.1 3 0 010 6.4h-0.2"),o(g,"id","fog"),o(g,"d","M8 13h15M10 16h16M6 19h16"),o($,"id","wind"),o($,"d","M8 13h13a2.5 2.5 0 10-2-4M6 16h17a2.5 2.5 0 11-2 4"),o(w,"id","rain"),o(w,"d","M10 20l-1 5M13.3 20l-1.4 7M16.5 20l-.8 4.2"),o(y,"id","sleet"),o(y,"d","M10 20l-.03.15m-.4 2l-.4 2M13.3 20l-.4 2m-.4 2l-.03.15m-.4 2l-.03.15M16.5 20l-.03.25m-.4 2l-.4 2"),o(x,"id","snow"),o(x,"d","M10.5 21.5l0 0m0 3l0 0M13.3 20l0 0m0 3l0 0m0 3l0 0M16 21.5l0 0m0 3l0 0"),o(v,"id","hail"),o(v,"d","M10 20l-.4 2m-.4 2l-.03.15M13.3 20l-.8 4m-.4 2l-.03.15M16.5 20l-.4 2m-.4 2l-.03.15"),o(b,"id","thunderstorm"),o(b,"stroke-width","0.3"),o(b,"d","M12.6 17h3.5l-2.5 4h1.8l-5 6.9l2-5.3h-2.5z"),o(k,"href",M="#"+t[1][0]),o(C,"href",B="#"+t[1][1]),o(C,"fill",D="thunderstorm"===t[1][1]?t[0]:"none"),o(T,"href",z="#"+t[1][2]),o(e,"viewBox","0 0 30 30"),o(e,"xmlns","http://www.w3.org/2000/svg"),o(e,"stroke-linejoin","round"),o(e,"stroke-linecap","round"),o(e,"fill","none"),o(e,"stroke-width","1.5"),o(e,"stroke",t[0])},m(t,i){s(t,e,i),c(e,n),c(n,r),c(n,a),c(n,l),c(n,f),c(n,m),c(n,p),c(n,h),c(n,g),c(n,$),c(n,w),c(n,y),c(n,x),c(n,v),c(n,b),c(e,k),c(e,C),c(e,T)},p(t,[n]){2&n&&M!==(M="#"+t[1][0])&&o(k,"href",M),2&n&&B!==(B="#"+t[1][1])&&o(C,"href",B),3&n&&D!==(D="thunderstorm"===t[1][1]?t[0]:"none")&&o(C,"fill",D),2&n&&z!==(z="#"+t[1][2])&&o(T,"href",z),1&n&&o(e,"stroke",t[0])},i:u,o:u,d(t){t&&d(e)}}}const Ut={"clear-day":["sun","sun-rays"],"clear-night":["sun"],"partly-cloudy-day":["cloud","sun-part","sun-part-rays"],"partly-cloudy-night":["cloud","sun-part"],cloudy:["cloud","cloud-part"],fog:["fog"],hail:["cloud-open","hail"],rain:["cloud-open","rain"],sleet:["cloud-open","sleet"],snow:["cloud-open","snow"],thunderstorm:["cloud-open","thunderstorm"],wind:["wind"]};function Vt(t,e,n){let r;D(t,Tt,(t=>n(3,r=t)));let a,{icon:l}=e,i="#444";return t.$$set=t=>{"icon"in t&&n(2,l=t.icon)},t.$$.update=()=>{12&t.$$.dirty&&(n(0,i=ot((t=>{switch(t){case"rain":case"sleet":case"hail":case"snow":case"thunderstorm":return st.rain;case"clear-day":case"clear-night":case"partly-cloudy-day":case"partly-cloudy-night":return st.sun;default:return st.foreground}})(l),r)),n(1,a=Ut[l]))},[i,a,l,r]}class _t extends r{constructor(t){super(),a(this,t,Vt,qt,l,{icon:2})}}function Yt(t){let e,n,r;return n=new Ht({props:{d:"M8 12h13a2.5 2.5 0 10-2-4M10 14h10.5q4 0 4 -2M6 16h17a2.5 2.5 0 11-2 4",outline:!0}}),{c(){e=f("div"),h(n.$$.fragment),o(e,"class","outlined-path"),T(e,"transform","rotate("+(t[0]+90)+"deg)"),T(e,"transform-origin","center")},m(t,a){s(t,e,a),g(n,e,null),r=!0},p(t,[n]){(!r||1&n)&&T(e,"transform","rotate("+(t[0]+90)+"deg)")},i(t){r||($(n.$$.fragment,t),r=!0)},o(t){x(n.$$.fragment,t),r=!1},d(t){t&&d(e),v(n)}}}function Kt(t,e,n){let{direction:r=0}=e;return t.$$set=t=>{"direction"in t&&n(0,r=t.direction)},[r]}class Xt extends r{constructor(t){super(),a(this,t,Kt,Yt,l,{direction:0})}}function Jt(t,e){const n=e.toISOString();return t.filter((t=>t.time===n))}let Qt=[];function Zt(t,e,n,r,a){t.fillStyle=a,t.beginPath(),t.arc(e,n,r,0,2*Math.PI),t.closePath(),t.fill()}function te(t,e=!0,n=(()=>{})){t.clearRect(0,0,t.canvas.width,t.canvas.height),t.globalCompositeOperation="darken",t.save(),function(t,e){e&&(function(t,e,n,r,a,l){t.beginPath(),t.moveTo(21,0),t.lineTo(0+r-l,0),t.quadraticCurveTo(0+r,0,0+r,21),t.lineTo(0+r,0+a-l),t.quadraticCurveTo(0+r,0+a,0+r-l,0+a),t.lineTo(21,0+a),t.quadraticCurveTo(0,0+a,0,0+a-l),t.lineTo(0,21),t.quadraticCurveTo(0,0,21,0),t.closePath()}(t,0,0,t.canvas.width,t.canvas.height,21),t.clip())}(t,e),n(),t.restore()}function ee(t){let e,n;return{c(){e=f("canvas"),o(e,"class","h-full w-full opacity-70 inset-0 z-10 absolute"),w((()=>t[7].call(e)))},m(r,a){s(r,e,a),n=z(e,t[7].bind(e)),t[8](e)},p:u,i:u,o:u,d(r){r&&d(e),n(),t[8](null)}}}function ne(t,e,n){let r,a,l,i;D(t,Tt,(t=>n(6,r=t)));let o=!1,{clouds:s}=e,{viewBounds:c}=e,{mini:u=!1}=e;function d(){!function(t,e="#fff",n="#fff",r=3){t.globalCompositeOperation="source-over",Zt(t,t.canvas.width/2,t.canvas.height/2,2*r,e),Zt(t,t.canvas.width/2,t.canvas.height/2,r,n)}(i,u?"transparent":"#a30",u?"transparent":ot(st.sun,r),6)}async function f(t,e){!function(t,e,n,r=!1){const a=function(t){const{x:e,y:n}=function(t,{lon:e,lat:n}){return{x:dt(e-t.lb.lon),y:ut(n)-ut(t.lb.lat)}}(t,t.rt);return{x:1/e,y:1/n}}(e),l=function(t,e){return e.canvas.height/(34.8*(t.rt.lat-t.lb.lat))}(e,n)/2+(r?1.5:0);te(n,r,(()=>{for(const e of t)Zt(n,e.projected.x*n.canvas.width*a.x|0,e.projected.y*n.canvas.height*a.y|0,0|l,Qt[100*e.value])}))}(t,e,i,u),d()}return L((async()=>{await P(),n(5,o=!0),i=function(t,e){t.width=3*e,t.height=3*e;const n=t.getContext("2d",{alpha:!1});return n.translate(0,n.canvas.height),n.scale(1,-1),function(){for(let e=0;100>=e;e++)Qt.push(`hsla(${200+80*(t=e/100)},${80+20*t}%,58%,1`);var t}(),n}(l,a),te(i),d()})),t.$$set=t=>{"clouds"in t&&n(2,s=t.clouds),"viewBounds"in t&&n(3,c=t.viewBounds),"mini"in t&&n(4,u=t.mini)},t.$$.update=()=>{108&t.$$.dirty&&s&&(null==c?void 0:c.lb)&&(o?f(s,c):setTimeout((()=>{f(s,c)}),2e3))},[a,l,s,c,u,o,r,function(){a=this.clientWidth,n(0,a)},function(t){S[t?"unshift":"push"]((()=>{l=t,n(1,l)}))}]}class re extends r{constructor(t){super(),a(this,t,ne,ee,l,{clouds:2,viewBounds:3,mini:4})}}function ae(t){let e,n,r,a,l,i;return n=new re({props:{clouds:t[0],viewBounds:t[1],mini:!0}}),{c(){e=f("div"),h(n.$$.fragment),o(e,"class","rounded-md h-full w-full relative clickable")},m(r,o){s(r,e,o),g(n,e,null),a=!0,l||(i=m(e,"click",t[4]),l=!0)},p(t,[e]){const r={};1&e&&(r.clouds=t[0]),2&e&&(r.viewBounds=t[1]),n.$set(r)},i(t){a||($(n.$$.fragment,t),w((()=>{r||(r=y(e,E,{},!0)),r.run(1)})),a=!0)},o(t){x(n.$$.fragment,t),r||(r=y(e,E,{},!1)),r.run(0),a=!1},d(t){t&&d(e),v(n),t&&r&&r.end(),l=!1,i()}}}function le(t,e,n){let r,a,l,i;return D(t,Et,(t=>n(3,r=t))),D(t,zt,(t=>n(2,a=t))),t.$$.update=()=>{8&t.$$.dirty&&r.times.length>0&&(n(1,i=r.viewBounds),n(0,l=Jt(r.clouds,mt(r.times).time)))},[l,i,a,r,()=>W(zt,a=!0,a)]}class ie extends r{constructor(t){super(),a(this,t,le,ae,l,{})}}function oe(t){let e,n,r,a,l,i,m,k,D,T,z,L,P,S,W,H,O,I,R,G,A,q,U=t[0].timestamp,V=t[0].icon,_=Math.abs(t[0].temperature)+"",Y=t[0].relativeHumidity+"",K=se(t),X=ce(t);return W=new Ht({props:{d:"M5 9c5 5 15-5 20 0M5 13c1 .7 1.8 1.8 5.2 1.32M5 17c1 .85 1.8 1.5 3.9 1.43M25 13c-1-.7-1.8-1.8-5.2-1.32M25 17c-1-.85-1.8-1.5-3.9-1.43M15.5 12c-13 14 13 14 0 0",outline:!0}}),{c(){e=f("div"),K.c(),n=b(),r=f("div"),X.c(),a=b(),l=f("div"),i=f("div"),m=f("span"),m.textContent="-",k=p(_),D=b(),T=f("span"),T.textContent="°",L=b(),P=f("div"),S=f("div"),h(W.$$.fragment),H=b(),O=f("div"),I=p(Y),R=b(),G=f("span"),G.textContent="%",o(e,"class","dark:bg-dark-600"),o(r,"class","dark:bg-dark-600"),o(m,"class","max-w-4 overflow-hidden"),N(m,"hidden",t[0].temperature>=0),o(T,"class","mt-1 text-sm"),o(i,"class","flex font-light h-full mt-3 text-right ml-1 text-7xl"),o(S,"class","h-4 w-4 self-center"),o(G,"class","ml-0.5 text-size-[0.5rem] self-center"),o(P,"class","flex bottom-2 justify-center absolute"),o(l,"class","flex p-2 box-border justify-center dark:bg-dark-600")},m(t,o){s(t,e,o),K.m(e,null),s(t,n,o),s(t,r,o),X.m(r,null),s(t,a,o),s(t,l,o),c(l,i),c(i,m),c(i,k),c(i,D),c(i,T),c(l,L),c(l,P),c(P,S),g(W,S,null),c(P,H),c(P,O),c(O,I),c(P,R),c(P,G),q=!0},p(n,a){t=n,1&a&&j(U,U=t[0].timestamp)?(M(),x(K,1,1,u),C(),K=se(t),K.c(),$(K),K.m(e,null)):K.p(t,a),1&a&&j(V,V=t[0].icon)?(M(),x(X,1,1,u),C(),X=ce(t),X.c(),$(X),X.m(r,null)):X.p(t,a),1&a&&N(m,"hidden",t[0].temperature>=0),(!q||1&a)&&_!==(_=Math.abs(t[0].temperature)+"")&&F(k,_),(!q||1&a)&&Y!==(Y=t[0].relativeHumidity+"")&&F(I,Y)},i(t){q||($(K),$(X),w((()=>{z||(z=y(i,E,{duration:de},!0)),z.run(1)})),$(W.$$.fragment,t),w((()=>{A||(A=y(P,B,{duration:de},!0)),A.run(1)})),q=!0)},o(t){x(K),x(X),z||(z=y(i,E,{duration:de},!1)),z.run(0),x(W.$$.fragment,t),A||(A=y(P,B,{duration:de},!1)),A.run(0),q=!1},d(t){t&&d(e),K.d(t),t&&d(n),t&&d(r),X.d(t),t&&d(a),t&&d(l),t&&z&&z.end(),v(W),t&&A&&A.end()}}}function se(t){let e,n,r,a,l,i,u,m,k,M,C,B,D,T,z,L,P,S,W,j,H,O=me(t[0].precipitation,t[0].precipitation%1===t[0].precipitation?0:1)+"",I=me(t[0].windSpeed)+"";return n=new ie({}),u=new Xt({props:{direction:t[0].windDirection}}),{c(){e=f("div"),h(n.$$.fragment),a=b(),l=f("div"),i=f("div"),h(u.$$.fragment),m=b(),k=f("div"),M=f("div"),C=f("div"),B=p(O),D=b(),T=f("div"),T.innerHTML="<sup>mm</sup>/<sub>h</sub>",z=b(),L=f("div"),P=f("div"),S=p(I),W=b(),j=f("div"),j.innerHTML="<sup>km</sup>/<sub>h</sub>",o(e,"class","inset-0 absolute"),o(i,"class","h-8 -m-4 inset-1/2 w-8 z-10 absolute"),o(T,"class","pt-1 text-size-[0.5rem] self-center"),o(M,"class","flex space-x-1"),N(M,"!hidden",fe>t[0].precipitation),N(P,"current-warning-text",t[0].windSpeed>25),o(j,"class","pt-1 text-size-[0.5rem] self-center"),o(L,"class","flex space-x-1"),N(L,"pl-3",fe>t[0].precipitation),o(k,"class","flex space-x-2 w-full bottom-2 z-10 absolute justify-around"),o(l,"class","text-shadow-light pointer-events-none")},m(t,r){s(t,e,r),g(n,e,null),s(t,a,r),s(t,l,r),c(l,i),g(u,i,null),c(l,m),c(l,k),c(k,M),c(M,C),c(C,B),c(M,D),c(M,T),c(k,z),c(k,L),c(L,P),c(P,S),c(L,W),c(L,j),H=!0},p(e,n){t=e;const r={};1&n&&(r.direction=t[0].windDirection),u.$set(r),(!H||1&n)&&O!==(O=me(t[0].precipitation,t[0].precipitation%1===t[0].precipitation?0:1)+"")&&F(B,O),1&n&&N(M,"!hidden",fe>t[0].precipitation),(!H||1&n)&&I!==(I=me(t[0].windSpeed)+"")&&F(S,I),1&n&&N(P,"current-warning-text",t[0].windSpeed>25),1&n&&N(L,"pl-3",fe>t[0].precipitation)},i(t){H||($(n.$$.fragment,t),w((()=>{r||(r=y(e,E,{duration:de},!0)),r.run(1)})),$(u.$$.fragment,t),H=!0)},o(t){x(n.$$.fragment,t),r||(r=y(e,E,{duration:de},!1)),r.run(0),x(u.$$.fragment,t),H=!1},d(t){t&&d(e),v(n),t&&r&&r.end(),t&&d(a),t&&d(l),v(u)}}}function ce(t){let e,n,r,a;return n=new _t({props:{icon:t[0].icon}}),{c(){e=f("div"),h(n.$$.fragment),o(e,"class","m-2 pt-1 inset-0 absolute")},m(t,r){s(t,e,r),g(n,e,null),a=!0},p(e,r){t=e;const a={};1&r&&(a.icon=t[0].icon),n.$set(a)},i(t){a||($(n.$$.fragment,t),w((()=>{r||(r=y(e,B,{duration:de},!0)),r.run(1)})),a=!0)},o(t){x(n.$$.fragment,t),r||(r=y(e,B,{duration:de},!1)),r.run(0),a=!1},d(t){t&&d(e),v(n),t&&r&&r.end()}}}function ue(t){let e,n,r=t[0]&&t[0].timestamp&&oe(t);return{c(){e=f("div"),r&&r.c(),o(e,"class","flex space-x-1 h-32 mx-1 relative tabular-nums select-none children:shadow-md children:rounded-md children:bg-white children:w-32 children:h-32 children:relative ")},m(t,a){s(t,e,a),r&&r.m(e,null),n=!0},p(t,[n]){t[0]&&t[0].timestamp?r?(r.p(t,n),1&n&&$(r,1)):(r=oe(t),r.c(),$(r,1),r.m(e,null)):r&&(M(),x(r,1,1,(()=>{r=null})),C())},i(t){n||($(r),n=!0)},o(t){x(r),n=!1},d(t){t&&d(e),r&&r.d()}}}const de=150,fe=.3;function me(t,e=0){return Number.parseFloat(t).toFixed(e).toLocaleString()}function pe(t,e,n){let r,a;return D(t,Lt,(t=>n(1,r=t))),t.$$.update=()=>{2&t.$$.dirty&&n(0,a=r)},[a,r]}class he extends r{constructor(t){super(),a(this,t,pe,ue,j,{})}}function ge(t,e,n,r,a,l){const i=function(t,e){const n=e.y-t.y,r=e.x-t.x;return{length:Math.hypot(n,r),angle:Math.atan2(n,r)}}(t,n),o=i.angle+r,s=.1*i.length,c=e.x+Math.cos(o)*s;let u=e.y+Math.sin(o)*s;return e.y==a-l&&(u=a-l),{x:c,y:u}}function $e(t,e,n,r){const a=t.length-1>e?1:0,l=ge(t[e-(e>1?2:1)],t[e-1],t[e],0,n,r),i=ge(t[e-1],t[e],t[e+a],Math.PI,n,r);return`C${l.x},${l.y} ${i.x},${i.y} ${t[e].x},${t[e].y}`}function we(t,e,n){if(t.length>0){let r="";for(let a=1;t.length>a;a++)r+=$e(t,a,e,n);return`M${t[0].x},${t[0].y}${r}`}return""}function ye(t,e,n){const r=t.slice();return r[24]=e[n],r[26]=n,r}function xe(t,e,n){const r=t.slice();return r[27]=e[n],r[26]=n,r}function ve(t){let e,n,r,a,l,u,f,m,p,h,g,$,w,y,x,v,b,k,M,C,B,D,T,z,L,P,S,E,W,j,N,F=t[12],O=[];for(let i=0;F.length>i;i+=1)O[i]=be(xe(t,F,i));let I=t[6],R=[];for(let i=0;I.length>i;i+=1)R[i]=ke(ye(t,I,i));let G=t[5]>0&&Me(t);return{c(){e=i("defs"),n=i("clipPath"),r=i("rect"),l=i("clipPath"),u=i("rect"),m=i("g"),p=i("path"),g=i("path"),y=i("g");for(let t=0;O.length>t;t+=1)O[t].c();v=i("g"),b=i("g"),k=i("path"),B=i("path"),T=i("path"),P=i("path"),E=i("path"),N=i("g");for(let t=0;R.length>t;t+=1)R[t].c();G&&G.c(),o(r,"x","0"),o(r,"y","0"),o(r,"width","120%"),o(r,"height",a=t[2]-1),o(n,"id","cut-off-bottom"),o(u,"x","0"),o(u,"y","0"),o(u,"width",f=t[11]+"%"),o(u,"height","100%"),o(l,"id","swipe-in"),o(p,"d",h=`M${t[16](t[13])-10},${t[2]-1}v14 h${t[4][0]-t[16](t[13])}v-14z`),o(g,"d",$=`M${t[4][1]+5},${t[2]-1}v14 h${t[16](t[14])-t[4][1]+2} v-14z`),o(m,"fill",w=t[10].night),o(y,"stroke-width","0"),o(y,"fill",x=t[10].tick),o(y,"text-anchor","middle"),o(y,"font-size","10"),o(y,"font-weight","400"),o(k,"fill",M=t[10].sunniness+"10"),o(k,"d",C=t[7]+`V${t[2]+1}H${t[16](0)}z`),o(B,"stroke",D=t[10].sunniness),o(B,"d",t[7]),o(T,"fill",z=t[10].precipitation+"20"),o(T,"d",L=t[9]+`V${t[2]+1}H${t[16](0)}z`),o(P,"stroke",S=t[10].precipitation),o(P,"stroke-dasharray","4, 5"),o(P,"d",t[9]),o(E,"stroke",W=t[10].temperature+"70"),o(E,"d",t[8]),o(b,"clip-path","url(#cut-off-bottom)"),o(b,"transform",j=`translate(-${Be} 0)`),o(N,"font-size","10"),o(N,"font-weight","400"),o(N,"text-anchor","middle"),o(v,"clip-path","url(#swipe-in)")},m(t,a){s(t,e,a),c(e,n),c(n,r),c(e,l),c(l,u),s(t,m,a),c(m,p),c(m,g),s(t,y,a);for(let e=0;O.length>e;e+=1)O[e].m(y,null);s(t,v,a),c(v,b),c(b,k),c(b,B),c(b,T),c(b,P),c(b,E),c(v,N);for(let e=0;R.length>e;e+=1)R[e].m(N,null);G&&G.m(v,null)},p(t,e){if(4&e&&a!==(a=t[2]-1)&&o(r,"height",a),2048&e&&f!==(f=t[11]+"%")&&o(u,"width",f),20&e&&h!==(h=`M${t[16](t[13])-10},${t[2]-1}v14 h${t[4][0]-t[16](t[13])}v-14z`)&&o(p,"d",h),20&e&&$!==($=`M${t[4][1]+5},${t[2]-1}v14 h${t[16](t[14])-t[4][1]+2} v-14z`)&&o(g,"d",$),1024&e&&w!==(w=t[10].night)&&o(m,"fill",w),69632&e){let n;for(F=t[12],n=0;F.length>n;n+=1){const r=xe(t,F,n);O[n]?O[n].p(r,e):(O[n]=be(r),O[n].c(),O[n].m(y,null))}for(;O.length>n;n+=1)O[n].d(1);O.length=F.length}if(1024&e&&x!==(x=t[10].tick)&&o(y,"fill",x),1024&e&&M!==(M=t[10].sunniness+"10")&&o(k,"fill",M),132&e&&C!==(C=t[7]+`V${t[2]+1}H${t[16](0)}z`)&&o(k,"d",C),1024&e&&D!==(D=t[10].sunniness)&&o(B,"stroke",D),128&e&&o(B,"d",t[7]),1024&e&&z!==(z=t[10].precipitation+"20")&&o(T,"fill",z),516&e&&L!==(L=t[9]+`V${t[2]+1}H${t[16](0)}z`)&&o(T,"d",L),1024&e&&S!==(S=t[10].precipitation)&&o(P,"stroke",S),512&e&&o(P,"d",t[9]),1024&e&&W!==(W=t[10].temperature+"70")&&o(E,"stroke",W),256&e&&o(E,"d",t[8]),1092&e){let n;for(I=t[6],n=0;I.length>n;n+=1){const r=ye(t,I,n);R[n]?R[n].p(r,e):(R[n]=ke(r),R[n].c(),R[n].m(N,null))}for(;R.length>n;n+=1)R[n].d(1);R.length=I.length}t[5]>0?G?G.p(t,e):(G=Me(t),G.c(),G.m(v,null)):G&&(G.d(1),G=null)},d(t){t&&d(e),t&&d(m),t&&d(y),H(O,t),t&&d(v),H(R,t),G&&G.d()}}}function be(t){let e,n,r,a=t[27].toString().replace("24","0")+"";return{c(){e=i("text"),n=p(a),o(e,"x",r=t[16](t[27])),o(e,"y","96%")},m(t,r){s(t,e,r),c(e,n)},p:u,d(t){t&&d(e)}}}function ke(t){let e,n,r,a,l,u,f,m,h,g,$,w,y,x,v=t[24].temperature+"",b=t[24].temperature+"";return{c(){e=i("circle"),u=i("g"),f=i("text"),m=p(v),$=i("text"),w=p(b),o(e,"stroke",n=t[10].temperature),o(e,"stroke-width","0.7"),o(e,"cx",r=t[24].x),o(e,"cy",a=Math.min(t[24].y,t[2]-2)),o(e,"r","1.2"),o(e,"fill",l=t[10].pointBackgroundColor),o(f,"fill",h=t[10].dataLabelBackgroundColor),o(f,"stroke",g=t[10].dataLabelBackgroundColor),o(f,"stroke-width","3"),o($,"fill",y=t[10].temperature),o(u,"transform",x=`translate(${t[24].x+(0===t[26]?5:-7)} ${t[24].y+(t[24].flipY?-3:8)})`)},m(t,n){s(t,e,n),s(t,u,n),c(u,f),c(f,m),c(u,$),c($,w)},p(t,i){1024&i&&n!==(n=t[10].temperature)&&o(e,"stroke",n),64&i&&r!==(r=t[24].x)&&o(e,"cx",r),68&i&&a!==(a=Math.min(t[24].y,t[2]-2))&&o(e,"cy",a),1024&i&&l!==(l=t[10].pointBackgroundColor)&&o(e,"fill",l),64&i&&v!==(v=t[24].temperature+"")&&F(m,v),1024&i&&h!==(h=t[10].dataLabelBackgroundColor)&&o(f,"fill",h),1024&i&&g!==(g=t[10].dataLabelBackgroundColor)&&o(f,"stroke",g),64&i&&b!==(b=t[24].temperature+"")&&F(w,b),1024&i&&y!==(y=t[10].temperature)&&o($,"fill",y),64&i&&x!==(x=`translate(${t[24].x+(0===t[26]?5:-7)} ${t[24].y+(t[24].flipY?-3:8)})`)&&o(u,"transform",x)},d(t){t&&d(e),t&&d(u)}}}function Me(t){let e,n;return{c(){e=i("line"),o(e,"x1",t[5]),o(e,"x2",t[5]),o(e,"y2",t[2]),o(e,"stroke",n=t[10].currentTime),o(e,"stroke-width","0.5")},m(t,n){s(t,e,n)},p(t,r){32&r&&o(e,"x1",t[5]),32&r&&o(e,"x2",t[5]),4&r&&o(e,"y2",t[2]),1024&r&&n!==(n=t[10].currentTime)&&o(e,"stroke",n)},d(t){t&&d(e)}}}function Ce(t){let e,n=t[0]&&t[1]&&ve(t);return{c(){e=i("svg"),n&&n.c(),o(e,"width","100%"),o(e,"height","100%"),o(e,"fill","none"),o(e,"stroke","none"),o(e,"stroke-linecap","round"),o(e,"stroke-linejoin","round")},m(r,a){s(r,e,a),n&&n.m(e,null),t[18](e)},p(t,[r]){t[0]&&t[1]?n?n.p(t,r):(n=ve(t),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},i:u,o:u,d(r){r&&d(e),n&&n.d(),t[18](null)}}}const Be=10;function De(t,e){return e.getTime()>t.getTime()&&t.getDate()!==e.getDate()?24:(60*e.getHours()+e.getMinutes())/60}function Te(t,e){const n=t.min.temperature;return n+e*(t.max.temperature-n)}function ze(t){return[{x:0,y:t[0].y},...t.map((({x:t,y:e})=>({x:t+Be,y:e}))),{x:t[t.length-1].x+50,y:t[t.length-1].y}]}function Le(t,e,n){let r,a;D(t,Tt,(t=>n(19,r=t)));let l,i,o,s,{weather:c}=e,u=[0,2,4,6,8,10,12,14,16,18,20,22,24],d=u[0],f=u[u.length-1],m=f-d+1,p=[0,100],h=-5,g=[],$="",w="",y="";const x=O(0,{duration:500,easing:I});D(t,x,(t=>n(11,a=t)));const v=t=>t?{dataLabelBackgroundColor:"#22222270",pointBackgroundColor:"#222",currentTime:"#f66",tick:st.foreground.dark+"f0",night:"#00000032",temperature:st.foreground.dark,precipitation:st.rain.dark,sunniness:st.sun.dark}:{dataLabelBackgroundColor:"#ffffffa0",pointBackgroundColor:"#fff",currentTime:"#a00",tick:st.foreground.light+"c0",night:"#44446410",temperature:st.foreground.light,precipitation:st.rain.light,sunniness:st.sun.light};let b=v(r);function k(t){return.48*l+l*(t-d)*.96}function M(t){return.01>t?o:function(t){return Math.max(5,Math.min((1-t)*o,o-2.5))}(t)}return Tt.subscribe((async t=>{n(10,b=v(t))})),t.$$set=t=>{"weather"in t&&n(0,c=t.weather)},t.$$.update=()=>{if(131080&t.$$.dirty&&s){const t=s.getBoundingClientRect();n(17,i=t.width),n(2,o=t.height-13),n(1,l=i/(m-1))}if(7&t.$$.dirty&&c&&l){x.set(0,{duration:0});const{sunrise:t,sunset:e}=c.dayLight;n(4,p=[t,e].map((t=>k(De(c.day,t)))));const r=new Date;new Date(c.dayGraph[0].timestamp)<r&&new Date(c.dayGraph[c.dayGraph.length-1].timestamp)>r&&n(5,h=k(De(c.day,r)));const a=c.dayGraph.map((t=>({x:k(De(c.day,new Date(t.timestamp))),y:M(t.sunninessPercent)}))),l=c.dayGraph.map((t=>({x:k(De(c.day,new Date(t.timestamp))),y:M(t.precipitationPercent)}))),i=c.dayGraph.map((t=>{const e=new Date(t.timestamp);return{x:k(De(c.day,e)),y:M(t.temperaturePercent),flipY:.2>t.temperaturePercent,temperature:Te(c,t.temperaturePercent),hour:e.getHours()}})).filter((({hour:t,temperature:e})=>e>=c.max.temperature||c.min.temperature>=e||t%2==0));n(6,g=i.filter(((t,e,n)=>function(t,e){var n,r;return e[t].y!==(null!=(r=null==(n=e[t-1])?void 0:n.y)?r:void 0)}(e,n)))),n(7,$=we(ze(a),o,2.5)),n(8,w=we(ze(i),o,2.5)),n(9,y=we(ze(l),o,2.5)),x.set(100)}},[c,l,o,s,p,h,g,$,w,y,b,a,u,d,f,x,k,i,function(t){S[t?"unshift":"push"]((()=>{s=t,n(3,s)}))}]}class Pe extends r{constructor(t){super(),a(this,t,Le,Ce,l,{weather:0})}}function Se(t,e,n){const r=t.slice();return r[4]=e[n],r[6]=n,r}function Ee(t,e,n){const r=t.slice();return r[7]=e[n].icon,r[8]=e[n].colors,r[10]=n,r}function We(t){let e,n,r,a,l,i,u,m,k,D,T,z,L,P,S,E,W,j,H,O,I,q,U,V,_=t[1][t[6]].day+"",Y=t[1][t[6]].weekday+"",K=[],X=new Map,J=t[0][t[4]].min.temperature+"",Q=t[0][t[4]].max.temperature+"",Z=t[0][t[4]].dayParts;const tt=t=>t[6]+""+t[10];for(let o=0;Z.length>o;o+=1){let e=Ee(t,Z,o),n=tt(e);X.set(n,K[o]=Ne(n,e))}return q=new Pe({props:{weather:t[0][t[4]]}}),{c(){e=f("div"),n=f("div"),r=f("span"),a=p(_),l=b(),i=f("span"),u=p(Y),m=b(),k=f("div");for(let t=0;K.length>t;t+=1)K[t].c();D=b(),T=f("div"),z=f("span"),L=p(J),P=f("span"),P.textContent="°",S=b(),E=f("span"),W=p(Q),j=f("span"),j.textContent="°",O=b(),I=f("div"),h(q.$$.fragment),o(i,"class","text-lg -ml-1"),o(n,"class","text-3xl w-28"),o(k,"class","flex w-32 justify-between"),o(P,"class","text-sm align-text-top"),o(z,"class","text-lg"),N(z,"cold",0>t[0][t[4]].min.temperature),o(j,"class","text-sm align-top"),N(E,"cold",0>t[0][t[4]].max.temperature),o(T,"class","text-right text-3xl w-28"),o(e,"class","flex pr-1 pl-2 justify-between"),o(I,"class","overflow-hidden")},m(t,o){s(t,e,o),c(e,n),c(n,r),c(r,a),c(n,l),c(n,i),c(i,u),c(e,m),c(e,k);for(let e=0;K.length>e;e+=1)K[e].m(k,null);c(e,D),c(e,T),c(T,z),c(z,L),c(z,P),c(T,S),c(T,E),c(E,W),c(E,j),s(t,O,o),s(t,I,o),g(q,I,null),V=!0},p(t,e){(!V||2&e)&&_!==(_=t[1][t[6]].day+"")&&F(a,_),(!V||2&e)&&Y!==(Y=t[1][t[6]].weekday+"")&&F(u,Y),5&e&&(Z=t[0][t[4]].dayParts,M(),K=R(K,e,tt,1,t,Z,X,k,G,Ne,null,Ee),C()),(!V||1&e)&&J!==(J=t[0][t[4]].min.temperature+"")&&F(L,J),5&e&&N(z,"cold",0>t[0][t[4]].min.temperature),(!V||1&e)&&Q!==(Q=t[0][t[4]].max.temperature+"")&&F(W,Q),5&e&&N(E,"cold",0>t[0][t[4]].max.temperature);const n={};1&e&&(n.weather=t[0][t[4]]),q.$set(n)},i(t){if(!V){for(let t=0;Z.length>t;t+=1)$(K[t]);w((()=>{H||(H=y(e,B,{},!0)),H.run(1)})),$(q.$$.fragment,t),w((()=>{U||(U=y(I,A,{y:15},!0)),U.run(1)})),V=!0}},o(t){for(let e=0;K.length>e;e+=1)x(K[e]);H||(H=y(e,B,{},!1)),H.run(0),x(q.$$.fragment,t),U||(U=y(I,A,{y:15},!1)),U.run(0),V=!1},d(t){t&&d(e);for(let e=0;K.length>e;e+=1)K[e].d();t&&H&&H.end(),t&&d(O),t&&d(I),v(q),t&&U&&U.end()}}}function je(t){let e,n,r,a;return n=new _t({props:{icon:t[7]}}),{c(){e=f("div"),h(n.$$.fragment),o(e,"class","inset-0 absolute")},m(t,r){s(t,e,r),g(n,e,null),a=!0},p(e,r){t=e;const a={};1&r&&(a.icon=t[7]),n.$set(a)},i(l){a||($(n.$$.fragment,l),w((()=>{r||(r=y(e,B,{delay:50*t[10]},!0)),r.run(1)})),a=!0)},o(l){x(n.$$.fragment,l),r||(r=y(e,B,{delay:50*t[10]},!1)),r.run(0),a=!1},d(t){t&&d(e),v(n),t&&r&&r.end()}}}function Ne(t,e){let n,r,a,l=e[0][e[4]].dayParts,i=je(e);return{key:t,first:null,c(){n=f("div"),i.c(),r=b(),o(n,"class","flex h-8 w-8 items-center relative self-end"),this.first=n},m(t,e){s(t,n,e),i.m(n,null),c(n,r),a=!0},p(t,a){e=t,1&a&&j(l,l=e[0][e[4]].dayParts)?(M(),x(i,1,1,u),C(),i=je(e),i.c(),$(i),i.m(n,r)):i.p(e,a)},i(t){a||($(i),a=!0)},o(t){x(i),a=!1},d(t){t&&d(n),i.d(t)}}}function Fe(t,e){let n,r,a,l=e[0]&&e[0].length>0&&We(e);return{key:t,first:null,c(){n=f("div"),l&&l.c(),r=b(),o(n,"class","bg-white rounded-md h-30 pt-1 shadow-md overflow-hidden flex flex-col dark:bg-dark-600"),this.first=n},m(t,e){s(t,n,e),l&&l.m(n,null),c(n,r),a=!0},p(t,a){(e=t)[0]&&e[0].length>0?l?(l.p(e,a),1&a&&$(l,1)):(l=We(e),l.c(),$(l,1),l.m(n,r)):l&&(M(),x(l,1,1,(()=>{l=null})),C())},i(t){a||($(l),a=!0)},o(t){x(l),a=!1},d(t){t&&d(n),l&&l.d()}}}function He(t){let e,n,r=[],a=new Map,l=t[2];const i=t=>t[4];for(let o=0;l.length>o;o+=1){let e=Se(t,l,o),n=i(e);a.set(n,r[o]=Fe(n,e))}return{c(){e=f("div");for(let t=0;r.length>t;t+=1)r[t].c();o(e,"class","flex flex-col flex-nowrap font-light space-y-1 mx-1 tabular-nums select-none")},m(t,a){s(t,e,a);for(let n=0;r.length>n;n+=1)r[n].m(e,null);n=!0},p(t,[n]){7&n&&(l=t[2],M(),r=R(r,n,i,1,t,l,a,e,G,Fe,null,Se),C())},i(t){if(!n){for(let t=0;l.length>t;t+=1)$(r[t]);n=!0}},o(t){for(let e=0;r.length>e;e+=1)x(r[e]);n=!1},d(t){t&&d(e);for(let e=0;r.length>e;e+=1)r[e].d()}}}function Oe(t,e,n){let r,a,l;D(t,Pt,(t=>n(3,r=t)));let i=[...Array(8).keys()];return t.$$.update=()=>{8&t.$$.dirty&&n(0,a=r),1&t.$$.dirty&&n(1,l=a.map((t=>{const e=new Intl.DateTimeFormat("de-DE",{day:"2-digit",weekday:"short"}).formatToParts(t.day);return{day:e.find((t=>"day"===t.type)).value.replace(/^0/g,""),weekday:e.find((t=>"weekday"===t.type)).value.replace(/\./g,"")}})))},[a,l,i,r]}class Ie extends r{constructor(t){super(),a(this,t,Oe,He,j,{})}}let Re={history:[]};function Ge(){var t;return null!=(t=null==Re?void 0:Re.history)?t:[]}function Ae(t){let e,n,r,a,l;return{c(){e=f("div"),o(e,"class","bg-dark-800/90 inset-0 z-11 fixed backdrop-filter backdrop-grayscale-100")},m(n,i){s(n,e,i),r=!0,a||(l=m(e,"click",q(t[1])),a=!0)},p:u,i(t){r||(w((()=>{n||(n=y(e,E,{duration:200},!0)),n.run(1)})),r=!0)},o(t){n||(n=y(e,E,{duration:200},!1)),n.run(0),r=!1},d(t){t&&d(e),t&&n&&n.end(),a=!1,l()}}}function qe(t){let e,n,r=t[0]&&Ae(t);return{c(){r&&r.c(),e=k()},m(t,a){r&&r.m(t,a),s(t,e,a),n=!0},p(t,[n]){t[0]?r?(r.p(t,n),1&n&&$(r,1)):(r=Ae(t),r.c(),$(r,1),r.m(e.parentNode,e)):r&&(M(),x(r,1,1,(()=>{r=null})),C())},i(t){n||($(r),n=!0)},o(t){x(r),n=!1},d(t){r&&r.d(t),t&&d(e)}}}function Ue(t,e,n){const r=U();let{show:a=!1}=e;return t.$$set=t=>{"show"in t&&n(0,a=t.show)},[a,function(){r("close")}]}Re=localStorage.wettr?JSON.parse(localStorage.wettr):{history:[]};class Ve extends r{constructor(t){super(),a(this,t,Ue,qe,l,{show:0})}}function _e(t){let e,n,r,a;const l=t[2].default,i=V(l,t,t[1],null);return{c(){e=f("button"),i&&i.c(),o(e,"class","bg-transparent border-none rounded flex h-10 p-1 w-10 appearance-none clickable items-center"),o(e,"aria-label",t[0])},m(l,o){s(l,e,o),i&&i.m(e,null),n=!0,r||(a=m(e,"click",t[3]),r=!0)},p(t,[r]){i&&i.p&&(!n||2&r)&&_(i,l,t,t[1],n?K(l,t[1],r,null):Y(t[1]),null),(!n||1&r)&&o(e,"aria-label",t[0])},i(t){n||($(i,t),n=!0)},o(t){x(i,t),n=!1},d(t){t&&d(e),i&&i.d(t),r=!1,a()}}}function Ye(t,e,n){let{$$slots:r={},$$scope:a}=e,{label:l="Button"}=e;return t.$$set=t=>{"label"in t&&n(0,l=t.label),"$$scope"in t&&n(1,a=t.$$scope)},[l,a,r,function(e){X.call(this,t,e)}]}class Ke extends r{constructor(t){super(),a(this,t,Ye,_e,j,{label:0})}}function Xe(t){let e,n;return e=new Ht({props:{d:t[0],outline:t[2],strokeWidth:t[3]}}),{c(){h(e.$$.fragment)},m(t,r){g(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.d=t[0]),4&n&&(r.outline=t[2]),8&n&&(r.strokeWidth=t[3]),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){x(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Je(t){let e,n;return e=new Ke({props:{label:t[1],$$slots:{default:[Xe]},$$scope:{ctx:t}}}),e.$on("click",t[4]),{c(){h(e.$$.fragment)},m(t,r){g(e,t,r),n=!0},p(t,[n]){const r={};2&n&&(r.label=t[1]),45&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){x(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Qe(t,e,n){let{icon:r}=e,{label:a="Button"}=e,{outline:l=!1}=e,{strokeWidth:i=1.5}=e;return t.$$set=t=>{"icon"in t&&n(0,r=t.icon),"label"in t&&n(1,a=t.label),"outline"in t&&n(2,l=t.outline),"strokeWidth"in t&&n(3,i=t.strokeWidth)},[r,a,l,i,function(e){X.call(this,t,e)}]}class Ze extends r{constructor(t){super(),a(this,t,Qe,Je,j,{icon:0,label:1,outline:2,strokeWidth:3})}}function tn(t,e,n){const r=t.slice();return r[19]=e[n],r[21]=n,r}function en(t){let e,n,r,a;return n=new Ze({props:{label:"Get Current Location",icon:"M15 7a8 8 0 100.01 0M15 7v-2M15 23v2M7 15h-2M23 15h2M12 13h-2v4h2v-2M14 17v-4h2v2h-2 M20 13h-2v2h2v2h-2",outline:!0,strokeWidth:1}}),n.$on("click",t[9]),{c(){e=f("div"),h(n.$$.fragment),o(e,"class","z-20 absolute")},m(t,r){s(t,e,r),g(n,e,null),a=!0},p(e,n){t=e},i(t){a||($(n.$$.fragment,t),w((()=>{r||(r=y(e,E,{duration:ln},!0)),r.run(1)})),a=!0)},o(t){x(n.$$.fragment,t),r||(r=y(e,E,{duration:ln},!1)),r.run(0),a=!1},d(t){t&&d(e),v(n),t&&r&&r.end()}}}function nn(t){let e,n,r,a,l=t[3],i=[];for(let o=0;l.length>o;o+=1)i[o]=rn(tn(t,l,o));return{c(){e=f("div"),n=f("div");for(let t=0;i.length>t;t+=1)i[t].c();o(n,"class","shadow-lg py-1"),o(e,"class","rounded-md outline-none bg-gray-100 shadow-lg w-full transform origin-top-right origin-top transition-transform left-0 z-20 absolute m1-2 dark:bg-dark-800")},m(t,r){s(t,e,r),c(e,n);for(let e=0;i.length>e;e+=1)i[e].m(n,null);a=!0},p(e,r){if(t=e,152&r){let e;for(l=t[3],e=0;l.length>e;e+=1){const a=tn(t,l,e);i[e]?i[e].p(a,r):(i[e]=rn(a),i[e].c(),i[e].m(n,null))}for(;i.length>e;e+=1)i[e].d(1);i.length=l.length}},i(t){a||(w((()=>{r||(r=y(e,A,{duration:ln,y:-50},!0)),r.run(1)})),a=!0)},o(t){r||(r=y(e,A,{duration:ln,y:-50},!1)),r.run(0),a=!1},d(t){t&&d(e),H(i,t),t&&r&&r.end()}}}function rn(t){let e,n,r,a,l,i=t[19].name+"";function u(){return t[12](t[19])}function h(){return t[13](t[21])}return{c(){e=f("a"),n=p(i),o(e,"href",r="#"),o(e,"class","font-semibold text-md text-lg py-3 px-4 text-gray-700 block no-underline dark:text-gray-400"),N(e,"selected",t[21]===t[4])},m(t,r){s(t,e,r),c(e,n),a||(l=[m(e,"click",u),m(e,"mouseenter",h)],a=!0)},p(r,a){t=r,8&a&&i!==(i=t[19].name+"")&&F(n,i),16&a&&N(e,"selected",t[21]===t[4])},d(t){t&&d(e),a=!1,J(l)}}}function an(t){let e,n,r,a,l,i,u,p,w,y,k,B;e=new Ve({props:{show:t[1]}}),e.$on("close",t[6]);let D=t[1]&&en(t),T=t[1]&&nn(t);return{c(){h(e.$$.fragment),n=b(),r=f("div"),D&&D.c(),a=b(),l=f("div"),i=f("input"),u=b(),p=f("label"),p.textContent="Ort",w=b(),T&&T.c(),o(i,"id","location"),o(i,"type","text"),o(i,"class","bg-transparent border-none h-full outline-none flex-1 text-center text-xl w-full text-gray-800 dark:text-gray-400"),o(i,"placeholder","Ort"),o(i,"autocomplete","off"),o(p,"for","location"),o(p,"class","hidden"),o(l,"class","h-full relative"),o(r,"class","bg-white rounded-md h-10 shadow-md mx-1 mt-1 relative dark:bg-dark-600"),N(r,"z-50",t[1])},m(o,d){g(e,o,d),s(o,n,d),s(o,r,d),D&&D.m(r,null),c(r,a),c(r,l),c(l,i),t[10](i),Q(i,t[0]),c(l,u),c(l,p),c(r,w),T&&T.m(r,null),y=!0,k||(B=[m(i,"input",t[11]),m(i,"keydown",t[5]),m(i,"focus",t[8]),m(i,"click",t[8])],k=!0)},p(t,[n]){const l={};2&n&&(l.show=t[1]),e.$set(l),t[1]?D?(D.p(t,n),2&n&&$(D,1)):(D=en(t),D.c(),$(D,1),D.m(r,a)):D&&(M(),x(D,1,1,(()=>{D=null})),C()),1&n&&i.value!==t[0]&&Q(i,t[0]),t[1]?T?(T.p(t,n),2&n&&$(T,1)):(T=nn(t),T.c(),$(T,1),T.m(r,null)):T&&(M(),x(T,1,1,(()=>{T=null})),C()),2&n&&N(r,"z-50",t[1])},i(t){y||($(e.$$.fragment,t),$(D),$(T),y=!0)},o(t){x(e.$$.fragment,t),x(D),x(T),y=!1},d(a){v(e,a),a&&d(n),a&&d(r),D&&D.d(),t[10](null),T&&T.d(),k=!1,J(B)}}}const ln=250;function on(t,e,n){let r;D(t,Ct,(t=>n(14,r=t)));const a={lon:0,lat:0};let l,i="",o=[];const s=t=>async function(t,e=5){return t=t.trim().toLowerCase(),(await xt()).filter((e=>e.search.includes(t))).slice(0,e)}(t).then((t=>n(3,o=t)));let c=!1,u=0;function d(){!i&&r&&vt(r).then((t=>n(0,i=t))),n(1,c=!1),null==l||l.blur()}function f(t,e){W(Ct,r=e,r),function(t,{lon:e,lat:n}){const r={lon:e,lat:n},a=kt(r);Re.history=[{location:t,coordinates:r},...Re.history.filter((t=>kt(t.coordinates)!==a)).slice(0,3)],localStorage.wettr=JSON.stringify(Re)}(t,e);const n=new URLSearchParams(window.location.search);n.set("location",t),n.set("coordinates",kt(e));const a=window.location.origin+window.location.pathname+"?"+n.toString()+"#"+window.location.hash;a!==window.location.toString()&&window.history.pushState({},"",a)}async function m(t){n(0,i=t.name),f(i,{...t}),d()}return async function(){var t;const e=new URLSearchParams(window.location.search),n=Object.fromEntries(e.entries());let r=Mt(),l="";if("undefined"!=n.location&&(l=n.location),!l&&r.lat>-500)l=await vt(r);else if(l&&-500>=r.lat)r=await async function(t){if(0===t.trim().length)return null;const e=(await xt()).find((e=>e.name===t));return e?{lat:+e.lat,lon:+e.lon}:null}(l);else{const e=null==(t=Ge())?void 0:t[0];e.location&&e.coordinates?(l=e.location,r=e.coordinates):(l="",r=a)}m({name:l,...r})}(),t.$$.update=()=>{if(3&t.$$.dirty&&c){if(i.length>0)s(i);else{const t=Ge();t.length>0?n(3,o=t.map((t=>({name:t.location,lon:t.coordinates.lon,lat:t.coordinates.lat})))):s(i)}n(4,u=0)}},[i,c,l,o,u,function(t){switch(t.code){case"ArrowUp":n(4,u=Math.max(0,u-1)),t.preventDefault();break;case"ArrowDown":n(4,u=Math.min(o.length-1,u+1)),t.preventDefault();break;case"Enter":m(o[u]);break;case"Escape":d()}},d,m,function(){n(1,c=!0),n(4,u=0),n(0,i="")},function(){d(),async function(){navigator.geolocation.getCurrentPosition((async t=>{const{latitude:e,longitude:r}=t.coords,a=+e.toFixed(3),l=+r.toFixed(3);(({closestCity:t,coordinates:e})=>{n(0,i=t),f(t,e)})({closestCity:await vt({lat:a,lon:l}),coordinates:{lat:a,lon:l}})}),(()=>alert("Ort konte nicht ermittelt werden")))}()},function(t){S[t?"unshift":"push"]((()=>{l=t,n(2,l)}))},function(){i=this.value,n(0,i)},t=>m(t),t=>n(4,u=t)]}class sn extends r{constructor(t){super(),a(this,t,on,an,j,{})}}function cn(t){let e,n,r,a,l,i,c;return{c(){e=f("img"),r=b(),a=f("img"),o(e,"class","sharpen2"),Z(e.src,n=t[2])||o(e,"src",n),o(e,"alt",""),o(e,"aria-hidden","true"),Z(a.src,l=t[2])||o(a,"src",l),o(a,"alt","")},m(t,n){s(t,e,n),s(t,r,n),s(t,a,n),c=!0},p(t,r){(!c||4&r&&!Z(e.src,n=t[2]))&&o(e,"src",n),(!c||4&r&&!Z(a.src,l=t[2]))&&o(a,"src",l)},i(t){c||(w((()=>{i||(i=y(a,E,{duration:150},!0)),i.run(1)})),c=!0)},o(t){i||(i=y(a,E,{duration:150},!1)),i.run(0),c=!1},d(t){t&&d(e),t&&d(r),t&&d(a),t&&i&&i.end()}}}function un(t){let e,n,r,a,l=t[2]&&cn(t);return r=new re({props:{clouds:t[0],viewBounds:t[1]}}),{c(){e=f("div"),l&&l.c(),n=b(),h(r.$$.fragment),o(e,"class","relative children:w-full children:rounded-md "),o(e,"style",`min-height:${dn-22}px`)},m(t,i){s(t,e,i),l&&l.m(e,null),c(e,n),g(r,e,null),a=!0},p(t,[a]){t[2]?l?(l.p(t,a),4&a&&$(l,1)):(l=cn(t),l.c(),$(l,1),l.m(e,n)):l&&(M(),x(l,1,1,(()=>{l=null})),C());const i={};1&a&&(i.clouds=t[0]),2&a&&(i.viewBounds=t[1]),r.$set(i)},i(t){a||($(l),$(r.$$.fragment,t),a=!0)},o(t){x(l),x(r.$$.fragment,t),a=!1},d(t){t&&d(e),l&&l.d(),v(r)}}}const dn=350;function fn(t,e,n){let r;D(t,Ct,(t=>n(3,r=t)));let a,{clouds:l}=e,{viewBounds:i}=e;return t.$$set=t=>{"clouds"in t&&n(0,l=t.clouds),"viewBounds"in t&&n(1,i=t.viewBounds)},t.$$.update=()=>{8&t.$$.dirty&&(async()=>{if(bt(r)){const t=function(t,e){return`https://sgx.geodatenzentrum.de/wms_topplus_open?service=wms&version=1.3.0&request=GetMap&Layers=p25&STYLES=default&BBOX=${[t.lb.lat,t.lb.lon,t.rt.lat,t.rt.lon].map((t=>Number.parseFloat(t).toFixed(3))).join(",")}&CRS=EPSG:4326&width=${2*e}&Height=${2*e}&Format=image/jpeg`}(ft(r),dn),e=await(await wt(t)).blob();n(2,a=URL.createObjectURL(e))}})()},[l,i,a,r]}class mn extends r{constructor(t){super(),a(this,t,fn,un,l,{clouds:0,viewBounds:1})}}function pn(t){let e,n,r,a,l,u,w,y,k,M,C,B,D,T,z,L,P,S,E,W,j,N,H=gn(t[1][t[0]])+"";return r=new Ze({props:{label:"Go Back",icon:"M20 7l-10 8l10 8z",outline:!0}}),r.$on("click",t[9]),k=new Ze({props:{label:"Go Forward",icon:"M10 7l10 8l-10 8z",outline:!0}}),k.$on("click",t[12]),{c(){e=f("div"),n=f("span"),h(r.$$.fragment),a=b(),l=f("span"),u=f("input"),w=b(),y=f("span"),h(k.$$.fragment),M=b(),C=f("div"),B=f("div"),D=p(H),T=b(),z=f("div"),L=i("svg"),P=i("path"),o(u,"type","range"),o(u,"min",hn),o(u,"max",t[2]),o(l,"class","flex-grow mx-3 mt-1 w-full"),o(P,"d","m0 0h24c-12 6-12 18 0 24h-24c12 -6 12-18 0-24z"),o(L,"width","100%"),o(L,"class","h-6 w-[20px] "),o(L,"viewBox","0 0 24 24"),o(L,"fill","#2663eb"),o(L,"stroke","none"),o(L,"preserveAspectRatio","none"),o(z,"class","-mt-0.5 absolute"),o(z,"style",S=`left:${t[5]/2-10}px`),o(B,"class","rounded-md bg-blue-600 text-center text-xl text-white w-full px-1 time-label relative tabular-nums"),o(B,"style",E=`transform: translateX(${t[6]}px)`),o(C,"class","-top-10 left-0 z-20 absolute"),o(e,"class","flex my-2 relative")},m(i,o){s(i,e,o),c(e,n),g(r,n,null),c(e,a),c(e,l),c(l,u),t[10](u),Q(u,t[0]),c(e,w),c(e,y),g(k,y,null),c(e,M),c(e,C),c(C,B),c(B,D),c(B,T),c(B,z),c(z,L),c(L,P),t[13](B),W=!0,j||(N=[m(u,"change",t[11]),m(u,"input",t[11])],j=!0)},p(t,[e]){(!W||4&e)&&o(u,"max",t[2]),1&e&&Q(u,t[0]),(!W||3&e)&&H!==(H=gn(t[1][t[0]])+"")&&F(D,H),(!W||32&e&&S!==(S=`left:${t[5]/2-10}px`))&&o(z,"style",S),(!W||64&e&&E!==(E=`transform: translateX(${t[6]}px)`))&&o(B,"style",E)},i(t){W||($(r.$$.fragment,t),$(k.$$.fragment,t),W=!0)},o(t){x(r.$$.fragment,t),x(k.$$.fragment,t),W=!1},d(n){n&&d(e),v(r),t[10](null),v(k),t[13](null),j=!1,J(N)}}}let hn=0;function gn(t){return new Intl.DateTimeFormat("default",{hourCycle:"h23",hour:"numeric",minute:"numeric"}).format(t)}function $n(t,e,n){let{sliderValue:r=0}=e,{times:a=[]}=e,l=100;const i=U();let o,s,c=1,u=1,d=0,f=0;return t.$$set=t=>{"sliderValue"in t&&n(0,r=t.sliderValue),"times"in t&&n(1,a=t.times)},t.$$.update=()=>{var e,m,p;if(2&t.$$.dirty&&(n(2,l=a.length-1),p=null!=(m=null==(e=mt(a))?void 0:e.index)?m:0,n(0,r=p)),24&t.$$.dirty&&(o&&(n(7,c=o.offsetWidth),n(8,d=o.offsetLeft)),s&&n(5,u=s.offsetWidth)),423&t.$$.dirty){const t=a[r];t&&i("timeSelected",t),n(6,f=d+16-u/2+r*((c-32)/l))}},[r,a,l,o,s,u,f,c,d,()=>n(0,r=Math.max(0,r-1)),function(t){S[t?"unshift":"push"]((()=>{o=t,n(3,o)}))},function(){r=tt(this.value),n(0,r)},()=>n(0,r=Math.min(l,r+1)),function(t){S[t?"unshift":"push"]((()=>{s=t,n(4,s)}))}]}class wn extends r{constructor(t){super(),a(this,t,$n,pn,l,{sliderValue:0,times:1})}}function yn(t){let e,n,r,a,l,i,u,k,M,C,B,D,T,z,L,P,S,E,W,j,N,F,H,O;return k=new mn({props:{clouds:t[2],viewBounds:t[3]}}),B=new wn({props:{times:t[1]}}),B.$on("timeSelected",t[13]),{c(){e=f("div"),n=f("div"),r=f("div"),a=f("span"),a.textContent="Regenradar",l=b(),i=f("span"),i.textContent="×",u=b(),h(k.$$.fragment),M=b(),C=f("div"),h(B.$$.fragment),D=b(),T=f("div"),z=f("a"),L=p(t[4]),P=f("span"),P.textContent=",",S=b(),E=f("a"),W=p(t[6]),o(i,"class","font-extralight text-lg px-3 right-5 clickable absolute"),o(i,"role","button"),o(r,"class","text-size-xl text-center pt-2 pb-4"),o(n,"class","flex-col mt-2 dark:bg-dark-600"),o(z,"class","source-link"),o(z,"href",t[5]),o(E,"class","source-link"),o(E,"href",t[7]),o(T,"class","text-center leading-3 dark:bg-dark-600 dark:text-gray-500"),o(e,"class","flex flex-col space-y-2 top-0 right-0 left-0 z-20 absolute select-none children:shadow-md children:rounded-md children:max-w-sm children:p-2 children:bg-white children:mx-5 children:z-20 ")},m(o,d){s(o,e,d),c(e,n),c(n,r),c(r,a),c(r,l),c(r,i),c(n,u),g(k,n,null),c(n,M),c(n,C),g(B,C,null),c(e,D),c(e,T),c(T,z),c(z,L),c(T,P),c(T,S),c(T,E),c(E,W),F=!0,H||(O=[m(i,"click",t[9]),m(r,"click",t[9]),et(j=nt.call(null,e,{timeframe:500,minSwipeDistance:35,touchAction:"none"})),m(e,"swipe",t[14])],H=!0)},p(t,e){const n={};4&e&&(n.clouds=t[2]),8&e&&(n.viewBounds=t[3]),k.$set(n);const r={};2&e&&(r.times=t[1]),B.$set(r)},i(t){F||($(k.$$.fragment,t),$(B.$$.fragment,t),w((()=>{N||(N=y(e,A,{y:-300},!0)),N.run(1)})),F=!0)},o(t){x(k.$$.fragment,t),x(B.$$.fragment,t),N||(N=y(e,A,{y:-300},!1)),N.run(0),F=!1},d(t){t&&d(e),v(k),v(B),t&&N&&N.end(),H=!1,J(O)}}}function xn(t){let e,n,r,a;e=new Ve({props:{show:t[0]}}),e.$on("close",t[9]);let l=t[0]&&yn(t);return{c(){h(e.$$.fragment),n=b(),l&&l.c(),r=k()},m(t,i){g(e,t,i),s(t,n,i),l&&l.m(t,i),s(t,r,i),a=!0},p(t,[n]){const a={};1&n&&(a.show=t[0]),e.$set(a),t[0]?l?(l.p(t,n),1&n&&$(l,1)):(l=yn(t),l.c(),$(l,1),l.m(r.parentNode,r)):l&&(M(),x(l,1,1,(()=>{l=null})),C())},i(t){a||($(e.$$.fragment,t),$(l),a=!0)},o(t){x(e.$$.fragment,t),x(l),a=!1},d(t){v(e,t),t&&d(n),l&&l.d(t),t&&d(r)}}}function vn(e,n,r){let a,l,i,o;D(e,zt,(t=>r(0,a=t))),D(e,Wt,(t=>r(10,l=t))),D(e,Et,(t=>r(11,i=t))),D(e,Ct,(t=>r(12,o=t)));let s,c=[],u=[],d=[],f=new Map;function m(t){r(3,s=t.viewBounds),r(1,c=t.times),u=t.clouds,c.forEach((t=>{f.set(t,Jt(u,t))}))}function p(t){r(2,d=f.get(t))}function h(){W(zt,a=!1,a)}return e.$$.update=()=>{var n,r;6145&e.$$.dirty&&a&&bt(o)&&((null==(n=null==i?void 0:i.viewBounds)?void 0:n.lb)&&m(i),async function(){try{t(Dt).postMessage({type:"cloudData",data:{bounds:ft(t(Ct)),onlyNow:!1}})}catch(e){console.error(e)}}()),1024&e.$$.dirty&&(null==(r=null==l?void 0:l.viewBounds)?void 0:r.lb)&&m(l)},[a,c,d,s,"Kartendarstellung: © Bundesamt für Kartographie und Geodäsie (2021)","http://www.bkg.bund.de/","Datenquellen","https://sg.geodatenzentrum.de/web_public/Datenquellen_TopPlus_Open.pdf",p,h,l,i,o,t=>p(t.detail),({detail:t})=>"top"===t.direction||"bottom"===t.direction?h():null]}class bn extends r{constructor(t){super(),a(this,t,vn,xn,j,{})}}function kn(t){let e,n,r;return n=new Ht({props:{d:"M9 12l6 6l6-6",fill:t[0]?null:ot(st.warning,t[5]),outline:!0}}),{c(){e=f("div"),h(n.$$.fragment),o(e,"class","p-2 pt-3 transition-transform w-8 self-center"),N(e,"mirrored-y",!t[0])},m(t,a){s(t,e,a),g(n,e,null),r=!0},p(t,r){const a={};33&r&&(a.fill=t[0]?null:ot(st.warning,t[5])),n.$set(a),1&r&&N(e,"mirrored-y",!t[0])},i(t){r||($(n.$$.fragment,t),r=!0)},o(t){x(n.$$.fragment,t),r=!1},d(t){t&&d(e),v(n)}}}function Mn(t){let e,n,r,a,l,i,u,w,y,k,B,D,T,z,L,P;r=new Ht({props:{d:"M15 20a2 2 0 100.01 0m-2-3a 4 4 0 014 0l1-10a 4 4 0 00-6 0z",fill:ot(t[4]?st.foreground:st.warning,t[5])}});let S=!t[4]&&kn(t);return{c(){e=f("div"),n=f("div"),h(r.$$.fragment),a=b(),l=f("div"),i=p(t[1]),u=b(),w=f("span"),y=p(t[2]),k=b(),B=f("div"),D=p(t[3]),T=b(),S&&S.c(),o(n,"class","flex h-5 ml-2 w-5 self-center"),o(w,"class","font-light text-xs ml-1 tracking-wide tabular-nums self-center"),o(l,"class","flex flex-grow font-semibold flex-shrink-0 self-center overflow-hidden overflow-ellipsis"),o(B,"class","flex font-light text-xs text-right self-center"),N(B,"pr-6",t[4]),o(e,"class","flex space-x-1 h-14 w-full"),N(e,"shadow-md",!t[0]),N(e,"warning-sub-item-header",t[4]),N(e,"clickable",!t[4]),N(e,"rounded-md",!t[4])},m(o,d){s(o,e,d),c(e,n),g(r,n,null),c(e,a),c(e,l),c(l,i),c(l,u),c(l,w),c(w,y),c(e,k),c(e,B),c(B,D),c(e,T),S&&S.m(e,null),z=!0,L||(P=m(e,"click",t[6]),L=!0)},p(t,[n]){const a={};48&n&&(a.fill=ot(t[4]?st.foreground:st.warning,t[5])),r.$set(a),(!z||2&n)&&F(i,t[1]),(!z||4&n)&&F(y,t[2]),(!z||8&n)&&F(D,t[3]),16&n&&N(B,"pr-6",t[4]),t[4]?S&&(M(),x(S,1,1,(()=>{S=null})),C()):S?(S.p(t,n),16&n&&$(S,1)):(S=kn(t),S.c(),$(S,1),S.m(e,null)),1&n&&N(e,"shadow-md",!t[0]),16&n&&N(e,"warning-sub-item-header",t[4]),16&n&&N(e,"clickable",!t[4]),16&n&&N(e,"rounded-md",!t[4])},i(t){z||($(r.$$.fragment,t),$(S),z=!0)},o(t){x(r.$$.fragment,t),x(S),z=!1},d(t){t&&d(e),v(r),S&&S.d(),L=!1,P()}}}function Cn(t,e,n){let r;D(t,Tt,(t=>n(5,r=t)));let{collapsed:a=!0}=e,{title:l=""}=e,{suffix:i=""}=e,{time:o=""}=e,{subItem:s=!1}=e;return t.$$set=t=>{"collapsed"in t&&n(0,a=t.collapsed),"title"in t&&n(1,l=t.title),"suffix"in t&&n(2,i=t.suffix),"time"in t&&n(3,o=t.time),"subItem"in t&&n(4,s=t.subItem)},[a,l,i,o,s,r,function(e){X.call(this,t,e)}]}class Bn extends r{constructor(t){super(),a(this,t,Cn,Mn,l,{collapsed:0,title:1,suffix:2,time:3,subItem:4})}}function Dn(t){let e,n,r,a,l,i,m,h,g,$,w=(t[1]?t[2]:"")+"";return{c(){e=f("div"),n=f("div"),r=p(t[0]),a=b(),l=f("p"),i=f("strong"),m=p(w),h=f("br"),g=b(),$=p(t[1]),o(e,"class","p-3 pr-6 leading-4")},m(t,o){s(t,e,o),c(e,n),c(n,r),c(e,a),c(e,l),c(l,i),c(i,m),c(l,h),c(l,g),c(l,$)},p(t,[e]){1&e&&F(r,t[0]),6&e&&w!==(w=(t[1]?t[2]:"")+"")&&F(m,w),2&e&&F($,t[1])},i:u,o:u,d(t){t&&d(e)}}}function Tn(t,e,n){let{description:r}=e,{instruction:a}=e,{hintText:l}=e;return t.$$set=t=>{"description"in t&&n(0,r=t.description),"instruction"in t&&n(1,a=t.instruction),"hintText"in t&&n(2,l=t.hintText)},[r,a,l]}class zn extends r{constructor(t){super(),a(this,t,Tn,Dn,j,{description:0,instruction:1,hintText:2})}}function Ln(t,e,n){const r=t.slice();return r[1]=e[n],r}function Pn(t){let e,n,r,a,l,i,u,m,p,y,k,B;n=new Bn({props:{suffix:t[0].length>1?"+"+(t[0].length-1):"",title:t[1].title,time:t[1].time,collapsed:t[2]}}),n.$on("click",t[5]),p=new zn({props:{description:t[1].description,instruction:t[1].instruction,hintText:jn}});let D=t[3],T=[];for(let o=0;D.length>o;o+=1)T[o]=Sn(Ln(t,D,o));const z=t=>x(T[t],1,1,(()=>{T[t]=null}));return{c(){e=f("div"),h(n.$$.fragment),r=b(),a=f("div"),l=f("div"),i=f("div"),u=b(),m=f("div"),h(p.$$.fragment),y=b();for(let t=0;T.length>t;t+=1)T[t].c();o(i,"class","h-7 w-full bottom-0 linear-fade absolute"),N(i,"dark",t[4]),o(m,"class","h-full text-sm overflow-y-auto box-border custom-scrollbar"),o(l,"class","h-60"),o(a,"class","rounded-b-md max-h-60 transform origin-top transition-all relative height-transition overflow-hidden dark:bg-dark-800"),N(a,"max-h-0",t[2]),N(a,"pb-2",!t[2]),o(e,"class","bg-white rounded-md shadow-md mx-1 select-none dark:bg-dark-600")},m(t,o){s(t,e,o),g(n,e,null),c(e,r),c(e,a),c(a,l),c(l,i),c(l,u),c(l,m),g(p,m,null),c(m,y);for(let e=0;T.length>e;e+=1)T[e].m(m,null);B=!0},p(t,e){const r={};1&e&&(r.suffix=t[0].length>1?"+"+(t[0].length-1):""),2&e&&(r.title=t[1].title),2&e&&(r.time=t[1].time),4&e&&(r.collapsed=t[2]),n.$set(r),16&e&&N(i,"dark",t[4]);const l={};if(2&e&&(l.description=t[1].description),2&e&&(l.instruction=t[1].instruction),p.$set(l),8&e){let n;for(D=t[3],n=0;D.length>n;n+=1){const r=Ln(t,D,n);T[n]?(T[n].p(r,e),$(T[n],1)):(T[n]=Sn(r),T[n].c(),$(T[n],1),T[n].m(m,null))}for(M(),n=D.length;T.length>n;n+=1)z(n);C()}4&e&&N(a,"max-h-0",t[2]),4&e&&N(a,"pb-2",!t[2])},i(t){if(!B){$(n.$$.fragment,t),$(p.$$.fragment,t);for(let t=0;D.length>t;t+=1)$(T[t]);k||w((()=>{k=rt(e,E,{duration:150}),k.start()})),B=!0}},o(t){x(n.$$.fragment,t),x(p.$$.fragment,t),T=T.filter(Boolean);for(let e=0;T.length>e;e+=1)x(T[e]);B=!1},d(t){t&&d(e),v(n),v(p),H(T,t)}}}function Sn(t){let e,n,r,a;return e=new Bn({props:{subItem:!0,title:t[1].title,time:t[1].time}}),r=new zn({props:{description:t[1].description,instruction:t[1].instruction,hintText:jn}}),{c(){h(e.$$.fragment),n=b(),h(r.$$.fragment)},m(t,l){g(e,t,l),s(t,n,l),g(r,t,l),a=!0},p(t,n){const a={};8&n&&(a.title=t[1].title),8&n&&(a.time=t[1].time),e.$set(a);const l={};8&n&&(l.description=t[1].description),8&n&&(l.instruction=t[1].instruction),r.$set(l)},i(t){a||($(e.$$.fragment,t),$(r.$$.fragment,t),a=!0)},o(t){x(e.$$.fragment,t),x(r.$$.fragment,t),a=!1},d(t){v(e,t),t&&d(n),v(r,t)}}}function En(t){let e,n,r=t[0].length>0&&Pn(t);return{c(){r&&r.c(),e=k()},m(t,a){r&&r.m(t,a),s(t,e,a),n=!0},p(t,[n]){t[0].length>0?r?(r.p(t,n),1&n&&$(r,1)):(r=Pn(t),r.c(),$(r,1),r.m(e.parentNode,e)):r&&(M(),x(r,1,1,(()=>{r=null})),C())},i(t){n||($(r),n=!0)},o(t){x(r),n=!1},d(t){r&&r.d(t),t&&d(e)}}}const Wn={title:"",description:"",time:"",instruction:""},jn="ACHTUNG! Hinweis auf mögliche Gefahren: ";function Nn(t,{start:e,end:n}){const r=e.getDay()===n.getDay(),[a,l]=[e,n].map((e=>function(t,e){const n=t.getDay()===e.getDay(),r=new Intl.DateTimeFormat("de-DE",{weekday:"short"}).formatToParts(e)[0].value+" ";return{hour:e.getHours(),weekday:r,today:n}}(t,e)));let i="";return t>e?i+="bis ":(a.today||(i+=a.weekday),i+=a.hour+" - "),l.today||r||(i+=l.weekday),i+=l.hour+" Uhr",i}function Fn(t,e,n){let r,a,l;D(t,St,(t=>n(6,r=t))),D(t,Ct,(t=>n(7,a=t))),D(t,Tt,(t=>n(4,l=t)));let i=!0,o=Wn,s=[],c=[];return t.$$.update=()=>{var e;if(193&t.$$.dirty){let t=a,l=[t.lon,t.lat];if(r.length>0){const a=new Date;n(0,s=r.map((t=>({time:Nn(a,t.time),level:t.level,icon:t.type,title:t.event,description:t.description,instruction:t.instruction.replace(jn,""),regions:t.regions}))).filter((e=>e.regions.some((e=>function({lon:t,lat:e},n){const r=.02;return!(n.lb.lon>t+r||t-r>n.rt.lon||n.lb.lat>e+r||e-r>n.rt.lat)}(t,e.bounds)&&at(l,e.polygon)))))),n(1,o=null!=(e=null==s?void 0:s[0])?e:Wn),n(3,c=s.slice(1))}}},[s,o,i,c,l,function(){n(2,i=!i)},r,a]}class Hn extends r{constructor(t){super(),a(this,t,Fn,En,l,{})}}const{document:On}=lt;function In(t){let e,n,r,a,l,i,u,m,p,w,y,k,M,C,B,D,T,z,L,P,S,E;return l=new sn({}),u=new he({}),p=new Hn({}),y=new Ie({}),M=new bn({}),T=new At({}),{c(){e=f("meta"),r=b(),a=f("main"),h(l.$$.fragment),i=b(),h(u.$$.fragment),m=b(),h(p.$$.fragment),w=b(),h(y.$$.fragment),k=b(),h(M.$$.fragment),C=b(),B=f("footer"),D=f("span"),h(T.$$.fragment),z=b(),L=f("span"),L.innerHTML='Quelle:\n    <a class="footer-link" href="https://www.dwd.de">Deutscher Wetterdienst</a>',P=b(),S=f("span"),S.innerHTML='via\n    <a class="footer-link" href="https://brightsky.dev">brightsky.dev</a>',o(e,"name","theme-color"),o(e,"content",n=t[0]?"#000":"#fff"),o(a,"class","m-auto max-w-sm mt-0 w-full grid gap-1 grid-cols-1 relative"),o(D,"class","self-center"),o(B,"class","space-y-2 bg-gray-200 mt-5 text-sm text-center py-10 dark:bg-dark-800 children:block")},m(t,n){c(On.head,e),s(t,r,n),s(t,a,n),g(l,a,null),c(a,i),g(u,a,null),c(a,m),g(p,a,null),c(a,w),g(y,a,null),c(a,k),g(M,a,null),s(t,C,n),s(t,B,n),c(B,D),g(T,D,null),c(B,z),c(B,L),c(B,P),c(B,S),E=!0},p(t,[r]){(!E||1&r&&n!==(n=t[0]?"#000":"#fff"))&&o(e,"content",n)},i(t){E||($(l.$$.fragment,t),$(u.$$.fragment,t),$(p.$$.fragment,t),$(y.$$.fragment,t),$(M.$$.fragment,t),$(T.$$.fragment,t),E=!0)},o(t){x(l.$$.fragment,t),x(u.$$.fragment,t),x(p.$$.fragment,t),x(y.$$.fragment,t),x(M.$$.fragment,t),x(T.$$.fragment,t),E=!1},d(t){d(e),t&&d(r),t&&d(a),v(l),v(u),v(p),v(y),v(M),t&&d(C),t&&d(B),v(T)}}}function Rn(t,e,n){let r;D(t,Tt,(t=>n(0,r=t)));let a=window.matchMedia("(prefers-color-scheme: dark)");const l=t=>{t.matches?(document.documentElement.classList.add("dark"),W(Tt,r=!0,r)):(document.documentElement.classList.remove("dark"),W(Tt,r=!1,r))};return l(a),a.addEventListener("change",l),[r]}!function(t={}){const{immediate:e=!1,onOfflineReady:n,onRegistered:r,onRegisterError:a}=t;let l;"serviceWorker"in navigator&&(l=new it("/wettr/sw.js",{scope:"/wettr/"}),l.addEventListener("activated",(t=>{t.isUpdate?window.location.reload():null==n||n()})),l.register({immediate:e}).then((t=>{null==r||r(t)})).catch((t=>{null==a||a(t)})))}({onOfflineReady(){}}),new class extends r{constructor(t){super(),a(this,t,Rn,In,j,{})}}({target:document.getElementById("app")});
