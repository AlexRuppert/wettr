import{S as t,i as e,n,s as r,a as l,b as i,c as a,d as o,e as s,f as c,l as u,t as d,g as f,m,h as p,j as h,k as g,o as $,p as w,q as v,r as x,u as y,v as b,w as k,x as M,y as C,z as D,A as T,B,C as z,D as S,E as P,F as L,G as F,H as j,I as E,J as N,K as H,L as W,M as I,N as O,O as A,P as R,Q as q,R as G,T as V,U as _,V as U,W as Y,X as K,Y as X,Z as J,_ as Z,$ as Q,a0 as tt,a1 as et,a2 as nt,a3 as rt,a4 as lt,a5 as it}from"./vendor.d72dbf04.js";function at(t){let e,n,c,u;return{c(){e=r("svg"),n=r("path"),l(n,"d",t[0]),l(e,"width","100%"),l(e,"height","100%"),l(e,"stroke-linejoin","round"),l(e,"stroke-linecap","round"),l(e,"viewBox","0 0 30 30"),l(e,"fill",c=t[1]?"none":t[3]),l(e,"stroke",u=t[1]?t[3]:"none"),l(e,"stroke-width",t[2])},m(t,r){i(t,e,r),a(e,n)},p(t,[r]){1&r&&l(n,"d",t[0]),10&r&&c!==(c=t[1]?"none":t[3])&&l(e,"fill",c),10&r&&u!==(u=t[1]?t[3]:"none")&&l(e,"stroke",u),4&r&&l(e,"stroke-width",t[2])},i:o,o:o,d(t){t&&s(e)}}}function ot(t,e,n){let r,{d:l}=e,{fill:i=null}=e,{outline:a=!1}=e,{strokeWidth:o=1}=e;return t.$$set=t=>{"d"in t&&n(0,l=t.d),"fill"in t&&n(4,i=t.fill),"outline"in t&&n(1,a=t.outline),"strokeWidth"in t&&n(2,o=t.strokeWidth)},t.$$.update=()=>{16&t.$$.dirty&&n(3,r=null!=i?i:"currentColor")},[l,a,o,r,i]}!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const n of t)if("childList"===n.type)for(const t of n.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerpolicy&&(e.referrerPolicy=t.referrerpolicy),e.credentials="use-credentials"===t.crossorigin?"include":"anonymous"===t.crossorigin?"omit":"same-origin",e}(t);fetch(t.href,e)}}();class st extends t{constructor(t){super(),e(this,t,ot,at,n,{d:0,fill:4,outline:1,strokeWidth:2})}}function ct(t){let e,n,r;return{c(){e=c("button"),e.textContent="Als App installieren",l(e,"class","border border-solid rounded-md border-gray-400 mb-4 p-2 inline-block dark:bg-dark-400 dark:text-gray-300 light:text-gray-800")},m(l,a){i(l,e,a),n||(r=u(e,"click",t[2]),n=!0)},p:o,d(t){t&&s(e),n=!1,r()}}}function ut(t){let e,n,r,v,x,y,b,M,C,D,T,B,z,S;return b=new st({props:{d:"M12 9h-1a2 2 0 00-2 2v8a2 2 0 00 2 2h8a2 2 0 00 2-2v-8a2 2 0 00-2-2h-1M15 15v-13l3 3m-3-3l-3 3",fill:"#16c",outline:!0}}),D=new st({props:{d:"M15 9h-4a2 2 0 00-2 2v8a2 2 0 00 2 2h8a2 2 0 00 2-2v-8a2 2 0 00-2-2zm0 3v6m-3-3h6",fill:"#16c",outline:!0}}),{c(){e=c("div"),n=c("div"),r=d("Zum "),v=c("strong"),v.textContent="Home Screen",x=d(" hinzufügen:\r\n      "),y=c("span"),f(b.$$.fragment),M=d("\r\n      und\r\n      "),C=c("span"),f(D.$$.fragment),l(y,"class","install-icon"),l(C,"class","install-icon"),l(n,"class","rounded bg-light-100 shadow-md p-2 text-dark-400 helper relative"),l(e,"class","flex right-0 bottom-1 left-0 justify-center fixed")},m(l,o){i(l,e,o),a(e,n),a(n,r),a(n,v),a(n,x),a(n,y),m(b,y,null),a(n,M),a(n,C),m(D,C,null),B=!0,z||(S=u(n,"click",t[3]),z=!0)},p:o,i(t){B||(p(b.$$.fragment,t),p(D.$$.fragment,t),h((()=>{T||(T=g(e,k,{},!0)),T.run(1)})),B=!0)},o(t){$(b.$$.fragment,t),$(D.$$.fragment,t),T||(T=g(e,k,{},!1)),T.run(0),B=!1},d(t){t&&s(e),w(b),w(D),t&&T&&T.end(),z=!1,S()}}}function dt(t){let e,n,r,l=t[0]&&ct(t),a=t[0]&&t[1]&&ut(t);return{c(){l&&l.c(),e=v(),a&&a.c(),n=x()},m(t,o){l&&l.m(t,o),i(t,e,o),a&&a.m(t,o),i(t,n,o),r=!0},p(t,[r]){t[0]?l?l.p(t,r):(l=ct(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null),t[0]&&t[1]?a?(a.p(t,r),3&r&&p(a,1)):(a=ut(t),a.c(),p(a,1),a.m(n.parentNode,n)):a&&(y(),$(a,1,1,(()=>{a=null})),b())},i(t){r||(p(a),r=!0)},o(t){$(a),r=!1},d(t){l&&l.d(t),t&&s(e),a&&a.d(t),t&&s(n)}}}function ft(t,e,n){let r,l=/iPad|iPhone|iPod/.test(navigator.userAgent),i=!1,a=!1,o=!1;const s="standalone"in window.navigator,c=!0===window.navigator.standalone;return window.addEventListener("beforeinstallprompt",(t=>{r=t,window.matchMedia("(display-mode: standalone)").matches||navigator.standalone||n(0,i=!0)})),window.addEventListener("appinstalled",(()=>{n(0,i=!1),o=!0})),o||!s||c||(i=!0),[i,a,async()=>{l?n(1,a=!a):(r.prompt(),"accepted"===r.userChoice.outcome&&(n(0,i=!1),o=!0))},()=>n(1,a=!1)]}class mt extends t{constructor(t){super(),e(this,t,ft,dt,n,{})}}function pt(t,e){return e?t.dark:t.light}const ht={foreground:{light:"#444444",dark:"#9ca3aa"},rain:{light:"#0066ED",dark:"#2784FF"},sun:{light:"#FFB901",dark:"#FFC637"},warning:{light:"#EA580C",dark:"#EA580C"}},gt=Math.PI/180;function $t(t){return Math.log(Math.tan(wt(t)/2+Math.PI/4))}function wt(t){return t*gt}function vt({lon:t,lat:e},n=8){const r=n/70;return{lb:{lat:e-r,lon:t-r},rt:{lat:e+r,lon:t+r}}}function xt(t){if(0>=t.length)return{index:-1,time:void 0};const e=(new Date).getTime(),n=t.map((t=>t.getTime())).reduce(((t,n,r,l)=>Math.abs(n-e)<Math.abs(l[t]-e)?r:t),0);return{index:n,time:t[n]}}let yt,bt=0;async function kt(t=!1){Mt||(document.addEventListener("visibilitychange",(()=>kt())),document.addEventListener("pagehide",(()=>kt())),Mt=!0),setTimeout((()=>{const e=document.visibilityState;(t||"visible"===e&&Date.now()>bt&&M(Lt))&&async function(){try{const t=M(Lt),e=M(jt);e.postMessage({type:"currentWeatherData",data:t}),e.postMessage({type:"weatherData",data:{...t,days:7}}),e.postMessage({type:"currentCloudData",data:{bounds:vt(t),onlyNow:!0}}),e.postMessage({type:"weatherWarningData",data:t})}catch(t){console.error(t)}bt=Date.now()+6e5,clearTimeout(yt),yt=setTimeout(kt,6e5)}()}),0)}let Mt=!1;const Ct=[{regex:/ä/g,replacement:"a"},{regex:/ö/g,replacement:"o"},{regex:/ü/g,replacement:"u"},{regex:/ß/g,replacement:"ss"}];let Dt=[];const Tt=async()=>1>Dt.length?await(async()=>(await(await async function(t,e=1e6){let n=await caches.match(t);if(n&&n.headers.get("x--cache-timestamp")&&+n.headers.get("x--cache-timestamp")+6e4*e>Date.now())return console.log("cached "+t),n;n=await fetch(t);const r=new Headers(n.headers);r.set("x--cache-timestamp",Date.now().toString());const l=n.clone(),i=new Response(l.body,{status:l.status,statusText:l.statusText,headers:r});return(await caches.open("v1")).put(t,i),n}("/wettr/assets/locations.f4d31e90.json",10080)).json()).map((t=>{let e=t.name.toLowerCase().split(/,|(\s(bei|am|in)\s)/)[0].trim(),n=[e,Ct.reduce(((t,e)=>t.replaceAll(e.regex,e.replacement)),e)].join(" ");return{...t,search:n}})))():Dt;async function Bt(t){let e="",n=1/0;for(let i of await Tt()){const a=(r=t.lon,l=+i.lon,Math.pow(t.lat-+i.lat,2)+Math.pow(r-l,2));n>a&&(n=a,e=i.name)}var r,l;return e}function zt({lat:t,lon:e}){return void 0!==t&&void 0!==e&&0!==t&&0!==e&&t>-500}function St({lon:t,lat:e}){return`${(+t).toFixed(3)}_${(+e).toFixed(3)}`}function Pt(){const t=new URLSearchParams(window.location.search),e=Object.fromEntries(t.entries());let n={lon:0,lat:-500};try{const t=function(t){const[e,n]=t.split("_").map((t=>+t));return{lon:e,lat:n}}(e.coordinates);!t||Number.isNaN(t.lon)||Number.isNaN(t.lat)||(n=t)}catch(r){}return n}const Lt=C({lat:0,lon:0}),Ft=new function(){return new Worker("/wettr/assets/worker.fc1b8007.js",{type:"module"})};Ft.onmessage=function({data:{type:t,data:e}}){switch(t){case"currentWeatherData":Ht.set(e);break;case"weatherData":Wt.set(e);break;case"cloudData":At.set(e);break;case"currentCloudData":Ot.set(e);break;case"weatherWarningData":It.set(e)}};const jt=D(Ft),Et=C(!1),Nt=C(!1),Ht=C(null),Wt=C([]),It=C([]),Ot=C({times:[],clouds:[],viewBounds:{}}),At=C({times:[],clouds:[],viewBounds:{}});let Rt;function qt(t,e,n){const r=t.slice();return r[5]=e[n],r}function Gt(t){let e,n;return{c(){e=r("use"),l(e,"href",n=t[5])},m(t,n){i(t,e,n)},p(t,r){2&r&&n!==(n=t[5])&&l(e,"href",n)},d(t){t&&s(e)}}}function Vt(t){let e,n,a=t[1],c=[];for(let r=0;a.length>r;r+=1)c[r]=Gt(qt(t,a,r));return{c(){e=r("svg");for(let t=0;c.length>t;t+=1)c[t].c();l(e,"stroke-linejoin","round"),l(e,"stroke-linecap","round"),l(e,"viewBox","0 0 30 30"),l(e,"fill","none"),l(e,"stroke","currentColor"),l(e,"style",n=`color: ${t[0]};`),l(e,"class","svelte-wxgzi7")},m(t,n){i(t,e,n);for(let r=0;c.length>r;r+=1)c[r].m(e,null)},p(t,[r]){if(2&r){let n;for(a=t[1],n=0;a.length>n;n+=1){const l=qt(t,a,n);c[n]?c[n].p(l,r):(c[n]=Gt(l),c[n].c(),c[n].m(e,null))}for(;c.length>n;n+=1)c[n].d(1);c.length=a.length}1&r&&n!==(n=`color: ${t[0]};`)&&l(e,"style",n)},i:o,o:o,d(t){t&&s(e),T(c,t)}}}function _t(t,e,n){let r;B(t,Et,(t=>n(3,r=t)));let{icon:l}=e;const i={"clear-day":"sun,sun-rays","clear-night":"sun","partly-cloudy-day":"cloud,sun-part,sun-part-rays","partly-cloudy-night":"cloud,sun-part",cloudy:"cloud,cloud-part",fog:"fog",hail:"cloud-open,hail",rain:"cloud-open,rain",sleet:"cloud-open,sleet",snow:"cloud-open,snow",thunderstorm:"cloud-open,thunderstorm",wind:"wind"};let a,o="currentColor";return t.$$set=t=>{"icon"in t&&n(2,l=t.icon)},t.$$.update=()=>{12&t.$$.dirty&&(n(0,o=pt((t=>{switch(t){case"rain":case"sleet":case"hail":case"snow":case"thunderstorm":return ht.rain;case"clear-day":case"clear-night":case"partly-cloudy-day":case"partly-cloudy-night":return ht.sun;default:return ht.foreground}})(l),r)),n(1,a=i[l].split(",").map((t=>"#"+t))))},[o,a,l,r]}Lt.subscribe((async t=>{!zt(t)||Rt&&St(Rt)===St(t)||(Rt=t,kt(!0))})),Lt.set(Pt());class Ut extends t{constructor(t){super(),e(this,t,_t,Vt,n,{icon:2})}}function Yt(t){let e,n,r;return n=new st({props:{d:"M8 12h13a2.5 2.5 0 10-2-4M10 14h10.5q4 0 4-2M6 16h17a2.5 2.5 0 11-2 4",outline:!0}}),{c(){e=c("div"),f(n.$$.fragment),l(e,"class","outlined-path origin-center"),z(e,"transform","rotate("+(t[0]+90)+"deg)")},m(t,l){i(t,e,l),m(n,e,null),r=!0},p(t,[n]){(!r||1&n)&&z(e,"transform","rotate("+(t[0]+90)+"deg)")},i(t){r||(p(n.$$.fragment,t),r=!0)},o(t){$(n.$$.fragment,t),r=!1},d(t){t&&s(e),w(n)}}}function Kt(t,e,n){let{direction:r=0}=e;return t.$$set=t=>{"direction"in t&&n(0,r=t.direction)},[r]}class Xt extends t{constructor(t){super(),e(this,t,Kt,Yt,n,{direction:0})}}function Jt(t,e){const n=e.toISOString();return t.filter((t=>t.time===n))}let Zt=[];function Qt(t,e,n,r,l){t.fillStyle=l,t.beginPath(),t.arc(e,n,r,0,2*Math.PI),t.closePath(),t.fill()}function te(t,e=!0,n=(()=>{})){t.clearRect(0,0,t.canvas.width,t.canvas.height),t.globalCompositeOperation="darken",t.save(),function(t,e){e&&(function(t,e,n,r,l,i){t.beginPath(),t.moveTo(21,0),t.lineTo(0+r-i,0),t.quadraticCurveTo(0+r,0,0+r,21),t.lineTo(0+r,0+l-i),t.quadraticCurveTo(0+r,0+l,0+r-i,0+l),t.lineTo(21,0+l),t.quadraticCurveTo(0,0+l,0,0+l-i),t.lineTo(0,21),t.quadraticCurveTo(0,0,21,0),t.closePath()}(t,0,0,t.canvas.width,t.canvas.height,21),t.clip())}(t,e),n(),t.restore()}function ee(t){let e,n;return{c(){e=c("canvas"),l(e,"class","h-full w-full opacity-70 inset-0 z-10 absolute"),h((()=>t[7].call(e)))},m(r,l){i(r,e,l),n=S(e,t[7].bind(e)),t[8](e)},p:o,i:o,o:o,d(r){r&&s(e),n(),t[8](null)}}}function ne(t,e,n){let r,l,i,a;B(t,Et,(t=>n(6,r=t)));let o=!1,{clouds:s}=e,{viewBounds:c}=e,{mini:u=!1}=e;function d(){!function(t,e="#fff",n="#fff",r=3){t.globalCompositeOperation="source-over",Qt(t,t.canvas.width/2,t.canvas.height/2,2*r,e),Qt(t,t.canvas.width/2,t.canvas.height/2,r,n)}(a,u?"transparent":"#a30",u?"transparent":pt(ht.sun,r),6)}async function f(t,e){!function(t,e,n,r=!1){const l=function(t){const{x:e,y:n}=function(t,{lon:e,lat:n}){return{x:wt(e-t.lb.lon),y:$t(n)-$t(t.lb.lat)}}(t,t.rt);return{x:1/e,y:1/n}}(e),i=function(t,e){return e.canvas.height/(34.8*(t.rt.lat-t.lb.lat))}(e,n)/2+(r?1.5:0);te(n,r,(()=>{for(const e of t)Qt(n,e.projected.x*n.canvas.width*l.x|0,e.projected.y*n.canvas.height*l.y|0,0|i,Zt[100*e.value])}))}(t,e,a,u),d()}return P((async()=>{await L(),n(5,o=!0),a=function(t,e){t.width=3*e,t.height=3*e;const n=t.getContext("2d",{alpha:!1});return n.translate(0,n.canvas.height),n.scale(1,-1),function(){for(let e=0;100>=e;e++)Zt.push(`hsla(${200+80*(t=e/100)},${80+20*t}%,58%,1`);var t}(),n}(i,l),te(a),d()})),t.$$set=t=>{"clouds"in t&&n(2,s=t.clouds),"viewBounds"in t&&n(3,c=t.viewBounds),"mini"in t&&n(4,u=t.mini)},t.$$.update=()=>{108&t.$$.dirty&&s&&(null==c?void 0:c.lb)&&(o?f(s,c):setTimeout((()=>{f(s,c)}),2e3))},[l,i,s,c,u,o,r,function(){l=this.clientWidth,n(0,l)},function(t){F[t?"unshift":"push"]((()=>{i=t,n(1,i)}))}]}class re extends t{constructor(t){super(),e(this,t,ne,ee,n,{clouds:2,viewBounds:3,mini:4})}}function le(t){let e,n,r,a,o,d;return n=new re({props:{clouds:t[0],viewBounds:t[1],mini:!0}}),{c(){e=c("div"),f(n.$$.fragment),l(e,"class","rounded-md h-full w-full relative clickable svelte-1qgrehx")},m(r,l){i(r,e,l),m(n,e,null),a=!0,o||(d=u(e,"click",t[4]),o=!0)},p(t,[e]){const r={};1&e&&(r.clouds=t[0]),2&e&&(r.viewBounds=t[1]),n.$set(r)},i(t){a||(p(n.$$.fragment,t),h((()=>{r||(r=g(e,j,{},!0)),r.run(1)})),a=!0)},o(t){$(n.$$.fragment,t),r||(r=g(e,j,{},!1)),r.run(0),a=!1},d(t){t&&s(e),w(n),t&&r&&r.end(),o=!1,d()}}}function ie(t,e,n){let r,l,i,a;return B(t,Ot,(t=>n(3,r=t))),B(t,Nt,(t=>n(2,l=t))),t.$$.update=()=>{8&t.$$.dirty&&r.times.length>0&&(n(1,a=r.viewBounds),n(0,i=Jt(r.clouds,xt(r.times).time)))},[i,a,l,r,()=>E(Nt,l=!0,l)]}class ae extends t{constructor(t){super(),e(this,t,ie,le,n,{})}}function oe(t){let e,n,r,u,x,M,C,D,T,B,z,S,P,L,F,E,I,O,A,R,q,G,V=t[0].timestamp,_=t[0].icon,U=Math.abs(t[0].temperature)+"",Y=t[0].relativeHumidity+"",K=se(t),X=ce(t);return F=new st({props:{d:"M5 9c5 5 15-5 20 0M5 13c1 .7 1.8 1.8 5.2 1.32M5 17c1 .85 1.8 1.5 3.9 1.43M25 13c-1-.7-1.8-1.8-5.2-1.32M25 17c-1-.85-1.8-1.5-3.9-1.43M15.5 12c-13 14 13 14 0 0",outline:!0}}),{c(){e=c("div"),K.c(),n=v(),r=c("div"),X.c(),u=v(),x=c("div"),M=c("div"),C=c("span"),C.textContent="-",D=d(U),T=v(),B=c("span"),B.textContent="°",S=v(),P=c("div"),L=c("div"),f(F.$$.fragment),E=v(),I=c("div"),O=d(Y),A=v(),R=c("span"),R.textContent="%",l(e,"class","dark:bg-dark-600"),l(r,"class","dark:bg-dark-600"),l(C,"class","max-w-4 overflow-hidden"),H(C,"hidden",t[0].temperature>=0),l(B,"class","mt-1 text-sm"),l(M,"class","flex font-light h-full mt-3 text-right ml-1 text-7xl"),l(L,"class","h-4 w-4 self-center"),l(R,"class","ml-0.5 text-size-[0.5rem] self-center"),l(P,"class","flex bottom-2 justify-center absolute"),l(x,"class","flex p-2 box-border justify-center dark:bg-dark-600")},m(t,l){i(t,e,l),K.m(e,null),i(t,n,l),i(t,r,l),X.m(r,null),i(t,u,l),i(t,x,l),a(x,M),a(M,C),a(M,D),a(M,T),a(M,B),a(x,S),a(x,P),a(P,L),m(F,L,null),a(P,E),a(P,I),a(I,O),a(P,A),a(P,R),G=!0},p(n,l){t=n,1&l&&N(V,V=t[0].timestamp)?(y(),$(K,1,1,o),b(),K=se(t),K.c(),p(K),K.m(e,null)):K.p(t,l),1&l&&N(_,_=t[0].icon)?(y(),$(X,1,1,o),b(),X=ce(t),X.c(),p(X),X.m(r,null)):X.p(t,l),1&l&&H(C,"hidden",t[0].temperature>=0),(!G||1&l)&&U!==(U=Math.abs(t[0].temperature)+"")&&W(D,U),(!G||1&l)&&Y!==(Y=t[0].relativeHumidity+"")&&W(O,Y)},i(t){G||(p(K),p(X),h((()=>{z||(z=g(M,j,{duration:de},!0)),z.run(1)})),p(F.$$.fragment,t),h((()=>{q||(q=g(P,k,{duration:de},!0)),q.run(1)})),G=!0)},o(t){$(K),$(X),z||(z=g(M,j,{duration:de},!1)),z.run(0),$(F.$$.fragment,t),q||(q=g(P,k,{duration:de},!1)),q.run(0),G=!1},d(t){t&&s(e),K.d(t),t&&s(n),t&&s(r),X.d(t),t&&s(u),t&&s(x),t&&z&&z.end(),w(F),t&&q&&q.end()}}}function se(t){let e,n,r,o,u,x,y,b,k,M,C,D,T,B,z,S,P,L,F,E,N,I=me(t[0].precipitation,t[0].precipitation%1===t[0].precipitation?0:1)+"",O=me(t[0].windSpeed)+"";return n=new ae({}),y=new Xt({props:{direction:t[0].windDirection}}),{c(){e=c("div"),f(n.$$.fragment),o=v(),u=c("div"),x=c("div"),f(y.$$.fragment),b=v(),k=c("div"),M=c("div"),C=c("div"),D=d(I),T=v(),B=c("div"),B.innerHTML="<sup>mm</sup>/<sub>h</sub>",z=v(),S=c("div"),P=c("div"),L=d(O),F=v(),E=c("div"),E.innerHTML="<sup>km</sup>/<sub>h</sub>",l(e,"class","inset-0 absolute"),l(x,"class","h-8 -m-4 inset-1/2 w-8 z-10 absolute"),l(B,"class","pt-1 text-size-[0.5rem] self-center"),l(M,"class","flex space-x-1"),H(M,"!hidden",fe>t[0].precipitation),H(P,"current-warning-text",t[0].windSpeed>25),l(E,"class","pt-1 text-size-[0.5rem] self-center"),l(S,"class","flex space-x-1"),H(S,"pl-3",fe>t[0].precipitation),l(k,"class","flex space-x-2 w-full bottom-2 z-10 absolute justify-around"),l(u,"class","text-shadow-light pointer-events-none")},m(t,r){i(t,e,r),m(n,e,null),i(t,o,r),i(t,u,r),a(u,x),m(y,x,null),a(u,b),a(u,k),a(k,M),a(M,C),a(C,D),a(M,T),a(M,B),a(k,z),a(k,S),a(S,P),a(P,L),a(S,F),a(S,E),N=!0},p(e,n){t=e;const r={};1&n&&(r.direction=t[0].windDirection),y.$set(r),(!N||1&n)&&I!==(I=me(t[0].precipitation,t[0].precipitation%1===t[0].precipitation?0:1)+"")&&W(D,I),1&n&&H(M,"!hidden",fe>t[0].precipitation),(!N||1&n)&&O!==(O=me(t[0].windSpeed)+"")&&W(L,O),1&n&&H(P,"current-warning-text",t[0].windSpeed>25),1&n&&H(S,"pl-3",fe>t[0].precipitation)},i(t){N||(p(n.$$.fragment,t),h((()=>{r||(r=g(e,j,{duration:de},!0)),r.run(1)})),p(y.$$.fragment,t),N=!0)},o(t){$(n.$$.fragment,t),r||(r=g(e,j,{duration:de},!1)),r.run(0),$(y.$$.fragment,t),N=!1},d(t){t&&s(e),w(n),t&&r&&r.end(),t&&s(o),t&&s(u),w(y)}}}function ce(t){let e,n,r,a;return n=new Ut({props:{icon:t[0].icon}}),{c(){e=c("div"),f(n.$$.fragment),l(e,"class","m-2 pt-1 inset-0 absolute")},m(t,r){i(t,e,r),m(n,e,null),a=!0},p(e,r){t=e;const l={};1&r&&(l.icon=t[0].icon),n.$set(l)},i(t){a||(p(n.$$.fragment,t),h((()=>{r||(r=g(e,k,{duration:de},!0)),r.run(1)})),a=!0)},o(t){$(n.$$.fragment,t),r||(r=g(e,k,{duration:de},!1)),r.run(0),a=!1},d(t){t&&s(e),w(n),t&&r&&r.end()}}}function ue(t){let e,n,r=t[0]&&t[0].timestamp&&oe(t);return{c(){e=c("div"),r&&r.c(),l(e,"class","flex space-x-1 h-32 mx-1 relative tabular-nums select-none children:shadow-md children:rounded-md children:bg-white children:w-32 children:h-32 children:relative ")},m(t,l){i(t,e,l),r&&r.m(e,null),n=!0},p(t,[n]){t[0]&&t[0].timestamp?r?(r.p(t,n),1&n&&p(r,1)):(r=oe(t),r.c(),p(r,1),r.m(e,null)):r&&(y(),$(r,1,1,(()=>{r=null})),b())},i(t){n||(p(r),n=!0)},o(t){$(r),n=!1},d(t){t&&s(e),r&&r.d()}}}const de=150,fe=.3;function me(t,e=0){return Number.parseFloat(t).toFixed(e).toLocaleString()}function pe(t,e,n){let r,l;return B(t,Ht,(t=>n(1,r=t))),t.$$.update=()=>{2&t.$$.dirty&&n(0,l=r)},[l,r]}class he extends t{constructor(t){super(),e(this,t,pe,ue,N,{})}}function ge(t,e,n,r,l,i){const a=function(t,e){const n=e.y-t.y,r=e.x-t.x;return{length:Math.hypot(n,r),angle:Math.atan2(n,r)}}(t,n),o=a.angle+r,s=.1*a.length,c=e.x+Math.cos(o)*s;let u=e.y+Math.sin(o)*s;return e.y==l-i&&(u=l-i),{x:c,y:u}}function $e(t,e,n,r){const l=t.length-1>e?1:0,i=ge(t[e-(e>1?2:1)],t[e-1],t[e],0,n,r),a=ge(t[e-1],t[e],t[e+l],Math.PI,n,r);return`C${i.x},${i.y} ${a.x},${a.y} ${t[e].x},${t[e].y}`}function we(t,e,n){const r=t.slice();return r[29]=e[n],r[31]=n,r}function ve(t,e,n){const r=t.slice();return r[32]=e[n],r}function xe(t,e,n){const r=t.slice();return r[35]=e[n],r[31]=n,r}function ye(t){let e,n,o,c,u,d,f,m,p,h,g,$,w,v,y,b,k,M,C,D,B,z,S,P,L,F,j,E,N,H,W,I=t[15].slice(1),O=[];for(let r=0;I.length>r;r+=1)O[r]=be(xe(t,I,r));let A=t[11],R=[];for(let r=0;A.length>r;r+=1)R[r]=ke(ve(t,A,r));let q=t[7],G=[];for(let r=0;q.length>r;r+=1)G[r]=Me(we(t,q,r));return{c(){e=r("defs"),n=r("clipPath"),o=r("rect"),d=r("clipPath"),f=r("path"),h=r("path");for(let t=0;O.length>t;t+=1)O[t].c();w=x();for(let t=0;R.length>t;t+=1)R[t].c();v=r("g"),y=r("path"),D=r("path"),P=r("path"),F=r("path"),N=r("path");for(let t=0;G.length>t;t+=1)G[t].c();l(o,"width",c=t[13]+"%"),l(o,"height",u=t[3]-1),l(n,"id","cut-off"),l(f,"d",m=t[9]+"V0H0V100z"),l(d,"id",p=`precipitation-clip-${t[16]}`),l(h,"fill",g=t[12].night),l(h,"d",$=`M${t[18](-1)} ${t[3]-1}v20H${t[5][0]}v-20zM${t[5][1]} ${t[3]-1}v20H${t[18](t[14]+1)}v-20z`),l(y,"clip-path",b=`url(#precipitation-clip-${t[16]})`),l(y,"fill",k=t[12].sunninessFill),l(y,"stroke",M=t[12].sunniness),l(y,"d",C=t[8]+t[4]),l(D,"stroke-dasharray","4,5"),l(D,"fill",B=t[12].precipitationFill),l(D,"stroke",z=t[12].precipitation),l(D,"d",S=t[9]+t[4]),l(P,"stroke",L=t[12].temperature+"50"),l(P,"d",t[10]),l(F,"d",j=`M${t[6]+.5} 0v8M${t[6]+.5} ${t[3]}v-6`),l(F,"stroke",E="#11111190"),l(N,"d",H=`M${t[6]} 0v7M${t[6]} ${t[3]}v-7`),l(N,"stroke",W=t[12].currentTime),l(v,"clip-path","url(#cut-off)")},m(t,r){i(t,e,r),a(e,n),a(n,o),a(e,d),a(d,f),i(t,h,r);for(let e=0;O.length>e;e+=1)O[e].m(t,r);i(t,w,r);for(let e=0;R.length>e;e+=1)R[e].m(t,r);i(t,v,r),a(v,y),a(v,D),a(v,P),a(v,F),a(v,N);for(let e=0;G.length>e;e+=1)G[e].m(v,null)},p(t,e){if(8192&e[0]&&c!==(c=t[13]+"%")&&l(o,"width",c),8&e[0]&&u!==(u=t[3]-1)&&l(o,"height",u),512&e[0]&&m!==(m=t[9]+"V0H0V100z")&&l(f,"d",m),4096&e[0]&&g!==(g=t[12].night)&&l(h,"fill",g),40&e[0]&&$!==($=`M${t[18](-1)} ${t[3]-1}v20H${t[5][0]}v-20zM${t[5][1]} ${t[3]-1}v20H${t[18](t[14]+1)}v-20z`)&&l(h,"d",$),315392&e[0]){let n;for(I=t[15].slice(1),n=0;I.length>n;n+=1){const r=xe(t,I,n);O[n]?O[n].p(r,e):(O[n]=be(r),O[n].c(),O[n].m(w.parentNode,w))}for(;O.length>n;n+=1)O[n].d(1);O.length=I.length}if(6152&e[0]){let n;for(A=t[11],n=0;A.length>n;n+=1){const r=ve(t,A,n);R[n]?R[n].p(r,e):(R[n]=ke(r),R[n].c(),R[n].m(v.parentNode,v))}for(;R.length>n;n+=1)R[n].d(1);R.length=A.length}if(4096&e[0]&&k!==(k=t[12].sunninessFill)&&l(y,"fill",k),4096&e[0]&&M!==(M=t[12].sunniness)&&l(y,"stroke",M),272&e[0]&&C!==(C=t[8]+t[4])&&l(y,"d",C),4096&e[0]&&B!==(B=t[12].precipitationFill)&&l(D,"fill",B),4096&e[0]&&z!==(z=t[12].precipitation)&&l(D,"stroke",z),528&e[0]&&S!==(S=t[9]+t[4])&&l(D,"d",S),4096&e[0]&&L!==(L=t[12].temperature+"50")&&l(P,"stroke",L),1024&e[0]&&l(P,"d",t[10]),72&e[0]&&j!==(j=`M${t[6]+.5} 0v8M${t[6]+.5} ${t[3]}v-6`)&&l(F,"d",j),72&e[0]&&H!==(H=`M${t[6]} 0v7M${t[6]} ${t[3]}v-7`)&&l(N,"d",H),4096&e[0]&&W!==(W=t[12].currentTime)&&l(N,"stroke",W),4232&e[0]){let n;for(q=t[7],n=0;q.length>n;n+=1){const r=we(t,q,n);G[n]?G[n].p(r,e):(G[n]=Me(r),G[n].c(),G[n].m(v,null))}for(;G.length>n;n+=1)G[n].d(1);G.length=q.length}},d(t){t&&s(e),t&&s(h),T(O,t),t&&s(w),T(R,t),t&&s(v),T(G,t)}}}function be(t){let e,n,o,c,u=(t[14]>t[35]?t[35]:0)+"";return{c(){e=r("text"),n=d(u),l(e,"fill",o=t[12].tick),l(e,"x",c=t[18](t[35])),l(e,"y","96%")},m(t,r){i(t,e,r),a(e,n)},p(t,n){4096&n[0]&&o!==(o=t[12].tick)&&l(e,"fill",o)},d(t){t&&s(e)}}}function ke(t){let e,n,a,o;return{c(){e=r("use"),l(e,"href","#wind-indicator"),l(e,"x",n=t[32].x+7),l(e,"y",a=t[3]-1),l(e,"stroke",o=t[12].tick)},m(t,n){i(t,e,n)},p(t,r){2048&r[0]&&n!==(n=t[32].x+7)&&l(e,"x",n),8&r[0]&&a!==(a=t[3]-1)&&l(e,"y",a),4096&r[0]&&o!==(o=t[12].tick)&&l(e,"stroke",o)},d(t){t&&s(e)}}}function Me(t){let e,n,o,c,u,f,m,p,h,g,$,w,v,x=t[29].temperature+"",y=t[29].temperature+"";return{c(){e=r("use"),f=r("g"),m=r("text"),p=d(x),g=r("text"),$=d(y),l(e,"href","#celsius-circle"),l(e,"x",n=t[29].x),l(e,"y",o=Math.min(t[29].y,t[3]-2.7)),l(e,"stroke",c=t[12].temperature),l(e,"fill",u=t[12].pointBackgroundColor),l(m,"stroke",h=t[12].dataLabelBackgroundColor),l(m,"stroke-width","3"),l(g,"fill",w=t[12].temperature),l(f,"transform",v=`translate(${t[29].x+(0===t[31]?5:-7)} ${t[29].y+(t[29].flipY?-3:8)})`)},m(t,n){i(t,e,n),i(t,f,n),a(f,m),a(m,p),a(f,g),a(g,$)},p(t,r){128&r[0]&&n!==(n=t[29].x)&&l(e,"x",n),136&r[0]&&o!==(o=Math.min(t[29].y,t[3]-2.7))&&l(e,"y",o),4096&r[0]&&c!==(c=t[12].temperature)&&l(e,"stroke",c),4096&r[0]&&u!==(u=t[12].pointBackgroundColor)&&l(e,"fill",u),128&r[0]&&x!==(x=t[29].temperature+"")&&W(p,x),4096&r[0]&&h!==(h=t[12].dataLabelBackgroundColor)&&l(m,"stroke",h),128&r[0]&&y!==(y=t[29].temperature+"")&&W($,y),4096&r[0]&&w!==(w=t[12].temperature)&&l(g,"fill",w),128&r[0]&&v!==(v=`translate(${t[29].x+(0===t[31]?5:-7)} ${t[29].y+(t[29].flipY?-3:8)})`)&&l(f,"transform",v)},d(t){t&&s(e),t&&s(f)}}}function Ce(t){let e,n=t[0]&&t[2]&&ye(t);return{c(){e=r("svg"),n&&n.c(),l(e,"width","100%"),l(e,"height","100%"),l(e,"stroke-linecap","round"),l(e,"stroke-linejoin","round"),l(e,"fill","none"),l(e,"font-size","10"),l(e,"font-weight","400"),l(e,"text-anchor","middle")},m(r,l){i(r,e,l),n&&n.m(e,null),t[20](e)},p(t,r){t[0]&&t[2]?n?n.p(t,r):(n=ye(t),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},i:o,o:o,d(r){r&&s(e),n&&n.d(),t[20](null)}}}function De(t,e){return e.getTime()>t.getTime()&&t.getDate()!==e.getDate()?24:e.getHours()+e.getMinutes()/60}function Te(t,e,n){let r,l;B(t,Et,(t=>n(19,r=t)));let{weather:i}=e;const[a,o]=[0,24],s=[...new Array(13)].map(((t,e)=>2*e)),c=o;let u,d,f,m,p,h=[0,100],g=-5,$=[],w="",v="",x="",y=[],b=i.day.toISOString();const k=I(0,{duration:600,delay:100,easing:O});let M;function C(t){return 7.5+u*(t-a)*.96}function D(t){return.01>t?f:function(t){return Math.max(5,Math.min((1-t)*f,f-2.5))}(t)}return B(t,k,(t=>n(13,l=t))),k.set(0,{duration:0}),t.$$set=t=>{"weather"in t&&n(0,i=t.weather)},t.$$.update=()=>{524288&t.$$.dirty[0]&&n(12,M=(t=>{const e=t?"dark":"light";return{dataLabelBackgroundColor:t?"#22222270":"#ffffffa0",pointBackgroundColor:t?"#222":"#fff",currentTime:ht.warning[e],tick:ht.foreground[e]+"a0",night:t?"#00000050":"#44446420",temperature:ht.foreground[e],precipitation:ht.rain[e],precipitationFill:ht.rain[e]+"20",sunniness:ht.sun[e],sunninessFill:ht.sun[e]+"10"}})(r)),3&t.$$.dirty[0]&&i&&m&&(k.set(0,{duration:0}),setTimeout((()=>{var t;t=m.getBoundingClientRect(),d=t.width,n(3,f=t.height-13),n(2,u=d/c),n(4,p=`V${f+1}H${C(-1)}z`),function(t){const{sunrise:e,sunset:r}=t.dayLight;n(5,h=[e,r].map((e=>C(De(t.day,e)))));const l=new Date;t.dayGraph[0].timestamp.getDate()===l.getDate()&&n(6,g=C(De(t.day,l)));const i=[],a=[],o=[];n(11,y=[]),t.dayGraph.forEach((({timestamp:e,temperature:n,sunninessPercent:r,temperaturePercent:l,precipitationPercent:s,windGust:c})=>{const u=C(De(t.day,e)),d=.2>l,f=e.getHours();var m;i.push({x:u,y:D((m=(Math.tanh(4*r-2)+.9)/1.8,Math.min(Math.max(m,0),1)))}),t.max.temperature>n&&n>t.min.temperature&&f%2!=0||a.push({x:u,y:D(l),temperature:n,flipY:d}),o.push({x:u,y:D(s)}),c>30&&f%2==0&&y.push({x:u,y:0})})),n(7,$=a.filter(((t,e,n)=>function(t,e){var n,r;return e[t].y!==(null!=(r=null==(n=e[t-1])?void 0:n.y)?r:void 0)}(e,n)))),n(8,[w,x,v]=[i,a,o].map((t=>function(t,e){if(t.length>0){let n="";for(let r=1;t.length>r;r++)n+=$e(t,r,e,2.5);return`M${t[0].x},${t[0].y}${n}`}return""}(function(t,e){return[{x:0,y:t[0].y},...t,{x:e+10,y:t[t.length-1].y}]}(t,d),f))),w,n(10,x),n(9,v))}(i),k.set(110)}),50))},[i,m,u,f,p,h,g,$,w,v,x,y,M,l,o,s,b,k,C,r,function(t){F[t?"unshift":"push"]((()=>{m=t,n(1,m)}))}]}class Be extends t{constructor(t){super(),e(this,t,Te,Ce,n,{weather:0},null,[-1,-1])}}function ze(t){let e,n,c,u;return{c(){e=r("svg"),n=r("path"),l(n,"d",c=`M0 0c${4*-t[0]} 0 ${4*-t[0]} 6 0 6c${4*t[1]} 0 ${4*t[1]}-6 0-6`),l(e,"width","100%"),l(e,"height","100%"),l(e,"stroke-linecap","butt"),l(e,"viewBox","-3 0 6 6"),l(e,"fill","currentColor"),l(e,"stroke","currentColor"),l(e,"stroke-width",u=-.85>t[0]||-.85>t[1]?"0.1":"0")},m(t,r){i(t,e,r),a(e,n)},p(t,[r]){3&r&&c!==(c=`M0 0c${4*-t[0]} 0 ${4*-t[0]} 6 0 6c${4*t[1]} 0 ${4*t[1]}-6 0-6`)&&l(n,"d",c),3&r&&u!==(u=-.85>t[0]||-.85>t[1]?"0.1":"0")&&l(e,"stroke-width",u)},i:o,o:o,d(t){t&&s(e)}}}function Se(t,e,n){let{timestamp:r=new Date}=e,l=1,i=1;const a=new Date("2022-01-02T19:33+01:00").getTime();return t.$$set=t=>{"timestamp"in t&&n(2,r=t.timestamp)},t.$$.update=()=>{if(4&t.$$.dirty){let t=(r.getTime()-a)%2551442777.777664/2551442777.777664-.5;n(0,[l,i]=[{mul:-4,fn:Math.min},{mul:4,fn:Math.max}].map((({mul:e,fn:n})=>1-e*n(0,t))),l,(n(1,i),n(2,r)))}},[l,i,r]}class Pe extends t{constructor(t){super(),e(this,t,Se,ze,N,{timestamp:2})}}function Le(t,e,n){const r=t.slice();return r[4]=e[n],r[6]=n,r}function Fe(t,e,n){const r=t.slice();return r[7]=e[n].icon,r[9]=n,r}function je(t){let e,n,r,o,u,x,M,C,D,T,B,z,S,P,L,F,j,E,N,I,O,G,V,_,U,Y,K,X=t[1][t[6]].day+"",J=t[1][t[6]].weekday+"",Z=[],Q=new Map,tt=t[0][t[4]].min.temperature+"",et=t[0][t[4]].max.temperature+"",nt=t[0][t[4]].dayParts;const rt=t=>t[6]+""+t[9];for(let l=0;nt.length>l;l+=1){let e=Fe(t,nt,l),n=rt(e);Q.set(n,Z[l]=Ne(n,e))}return G=new Be({props:{weather:t[0][t[4]]}}),U=new Pe({props:{timestamp:t[0][t[4]].day}}),{c(){e=c("div"),n=c("div"),r=c("span"),o=d(X),u=v(),x=c("span"),M=d(J),C=v(),D=c("div");for(let t=0;Z.length>t;t+=1)Z[t].c();T=v(),B=c("div"),z=c("span"),S=d(tt),P=c("span"),P.textContent="°",L=v(),F=c("span"),j=d(et),E=c("span"),E.textContent="°",I=v(),O=c("div"),f(G.$$.fragment),V=v(),_=c("div"),f(U.$$.fragment),l(x,"class","text-lg -ml-1"),l(n,"class","text-3xl w-28"),l(D,"class","flex w-32 justify-between"),l(P,"class","text-sm align-text-top"),l(z,"class","text-lg"),H(z,"cold",0>t[0][t[4]].min.temperature),l(E,"class","text-sm align-top"),H(F,"cold",0>t[0][t[4]].max.temperature),l(B,"class","text-right text-3xl w-28"),l(e,"class","flex pr-1 pl-2 justify-between"),l(_,"class","absolute w-2 h-2 bottom-3 left-1 z-10"),l(O,"class","overflow-hidden relative")},m(t,l){i(t,e,l),a(e,n),a(n,r),a(r,o),a(n,u),a(n,x),a(x,M),a(e,C),a(e,D);for(let e=0;Z.length>e;e+=1)Z[e].m(D,null);a(e,T),a(e,B),a(B,z),a(z,S),a(z,P),a(B,L),a(B,F),a(F,j),a(F,E),i(t,I,l),i(t,O,l),m(G,O,null),a(O,V),a(O,_),m(U,_,null),K=!0},p(t,e){(!K||2&e)&&X!==(X=t[1][t[6]].day+"")&&W(o,X),(!K||2&e)&&J!==(J=t[1][t[6]].weekday+"")&&W(M,J),5&e&&(nt=t[0][t[4]].dayParts,y(),Z=A(Z,e,rt,1,t,nt,Q,D,R,Ne,null,Fe),b()),(!K||1&e)&&tt!==(tt=t[0][t[4]].min.temperature+"")&&W(S,tt),5&e&&H(z,"cold",0>t[0][t[4]].min.temperature),(!K||1&e)&&et!==(et=t[0][t[4]].max.temperature+"")&&W(j,et),5&e&&H(F,"cold",0>t[0][t[4]].max.temperature);const n={};1&e&&(n.weather=t[0][t[4]]),G.$set(n);const r={};1&e&&(r.timestamp=t[0][t[4]].day),U.$set(r)},i(t){if(!K){for(let t=0;nt.length>t;t+=1)p(Z[t]);h((()=>{N||(N=g(e,k,{},!0)),N.run(1)})),p(G.$$.fragment,t),p(U.$$.fragment,t),h((()=>{Y||(Y=g(O,q,{y:15},!0)),Y.run(1)})),K=!0}},o(t){for(let e=0;Z.length>e;e+=1)$(Z[e]);N||(N=g(e,k,{},!1)),N.run(0),$(G.$$.fragment,t),$(U.$$.fragment,t),Y||(Y=g(O,q,{y:15},!1)),Y.run(0),K=!1},d(t){t&&s(e);for(let e=0;Z.length>e;e+=1)Z[e].d();t&&N&&N.end(),t&&s(I),t&&s(O),w(G),w(U),t&&Y&&Y.end()}}}function Ee(t){let e,n,r,a;return n=new Ut({props:{icon:t[7]}}),{c(){e=c("div"),f(n.$$.fragment),l(e,"class","inset-0 absolute")},m(t,r){i(t,e,r),m(n,e,null),a=!0},p(e,r){t=e;const l={};1&r&&(l.icon=t[7]),n.$set(l)},i(l){a||(p(n.$$.fragment,l),h((()=>{r||(r=g(e,k,{delay:50*t[9]},!0)),r.run(1)})),a=!0)},o(l){$(n.$$.fragment,l),r||(r=g(e,k,{delay:50*t[9]},!1)),r.run(0),a=!1},d(t){t&&s(e),w(n),t&&r&&r.end()}}}function Ne(t,e){let n,r,u,d=e[0][e[4]].dayParts,f=Ee(e);return{key:t,first:null,c(){n=c("div"),f.c(),r=v(),l(n,"class","flex h-8 w-8 items-center relative self-end"),this.first=n},m(t,e){i(t,n,e),f.m(n,null),a(n,r),u=!0},p(t,l){e=t,1&l&&N(d,d=e[0][e[4]].dayParts)?(y(),$(f,1,1,o),b(),f=Ee(e),f.c(),p(f),f.m(n,r)):f.p(e,l)},i(t){u||(p(f),u=!0)},o(t){$(f),u=!1},d(t){t&&s(n),f.d(t)}}}function He(t,e){let n,r,o,u=e[0]&&e[0].length>0&&je(e);return{key:t,first:null,c(){n=c("div"),u&&u.c(),r=v(),l(n,"class","bg-white rounded-md h-30 pt-1 shadow-md overflow-hidden flex flex-col dark:bg-dark-600"),this.first=n},m(t,e){i(t,n,e),u&&u.m(n,null),a(n,r),o=!0},p(t,l){(e=t)[0]&&e[0].length>0?u?(u.p(e,l),1&l&&p(u,1)):(u=je(e),u.c(),p(u,1),u.m(n,r)):u&&(y(),$(u,1,1,(()=>{u=null})),b())},i(t){o||(p(u),o=!0)},o(t){$(u),o=!1},d(t){t&&s(n),u&&u.d()}}}function We(t){let e,n,r=[],a=new Map,o=t[2];const u=t=>t[4];for(let l=0;o.length>l;l+=1){let e=Le(t,o,l),n=u(e);a.set(n,r[l]=He(n,e))}return{c(){e=c("div");for(let t=0;r.length>t;t+=1)r[t].c();l(e,"class","flex flex-col flex-nowrap font-light space-y-1 mx-1 tabular-nums select-none")},m(t,l){i(t,e,l);for(let n=0;r.length>n;n+=1)r[n].m(e,null);n=!0},p(t,[n]){7&n&&(o=t[2],y(),r=A(r,n,u,1,t,o,a,e,R,He,null,Le),b())},i(t){if(!n){for(let t=0;o.length>t;t+=1)p(r[t]);n=!0}},o(t){for(let e=0;r.length>e;e+=1)$(r[e]);n=!1},d(t){t&&s(e);for(let e=0;r.length>e;e+=1)r[e].d()}}}function Ie(t,e,n){let r,l,i;B(t,Wt,(t=>n(3,r=t)));let a=[...Array(8).keys()];return t.$$.update=()=>{8&t.$$.dirty&&n(0,l=r),1&t.$$.dirty&&n(1,i=l.map((t=>{const e=new Intl.DateTimeFormat("de-DE",{day:"2-digit",weekday:"short"}).formatToParts(t.day);return{day:e.find((t=>"day"===t.type)).value.replace(/^0/g,""),weekday:e.find((t=>"weekday"===t.type)).value.replace(/\./g,"")}})))},[l,i,a,r]}class Oe extends t{constructor(t){super(),e(this,t,Ie,We,N,{})}}let Ae={history:[]};function Re(){var t;return null!=(t=null==Ae?void 0:Ae.history)?t:[]}function qe(t){let e,n,r,a,d;return{c(){e=c("div"),l(e,"class","bg-dark-800/90 inset-0 z-11 fixed backdrop-filter backdrop-grayscale-100")},m(n,l){i(n,e,l),r=!0,a||(d=u(e,"click",G(t[1])),a=!0)},p:o,i(t){r||(h((()=>{n||(n=g(e,j,{duration:200},!0)),n.run(1)})),r=!0)},o(t){n||(n=g(e,j,{duration:200},!1)),n.run(0),r=!1},d(t){t&&s(e),t&&n&&n.end(),a=!1,d()}}}function Ge(t){let e,n,r=t[0]&&qe(t);return{c(){r&&r.c(),e=x()},m(t,l){r&&r.m(t,l),i(t,e,l),n=!0},p(t,[n]){t[0]?r?(r.p(t,n),1&n&&p(r,1)):(r=qe(t),r.c(),p(r,1),r.m(e.parentNode,e)):r&&(y(),$(r,1,1,(()=>{r=null})),b())},i(t){n||(p(r),n=!0)},o(t){$(r),n=!1},d(t){r&&r.d(t),t&&s(e)}}}function Ve(t,e,n){const r=V();let{show:l=!1}=e;return t.$$set=t=>{"show"in t&&n(0,l=t.show)},[l,function(){r("close")}]}Ae=localStorage.wettr?JSON.parse(localStorage.wettr):{history:[]};class _e extends t{constructor(t){super(),e(this,t,Ve,Ge,n,{show:0})}}function Ue(t){let e,n,r,a;const o=t[2].default,d=_(o,t,t[1],null);return{c(){e=c("button"),d&&d.c(),l(e,"class","bg-transparent border-none rounded flex h-10 p-1 w-10 appearance-none clickable items-center"),l(e,"aria-label",t[0])},m(l,o){i(l,e,o),d&&d.m(e,null),n=!0,r||(a=u(e,"click",t[3]),r=!0)},p(t,[r]){d&&d.p&&(!n||2&r)&&U(d,o,t,t[1],n?K(o,t[1],r,null):Y(t[1]),null),(!n||1&r)&&l(e,"aria-label",t[0])},i(t){n||(p(d,t),n=!0)},o(t){$(d,t),n=!1},d(t){t&&s(e),d&&d.d(t),r=!1,a()}}}function Ye(t,e,n){let{$$slots:r={},$$scope:l}=e,{label:i="Button"}=e;return t.$$set=t=>{"label"in t&&n(0,i=t.label),"$$scope"in t&&n(1,l=t.$$scope)},[i,l,r,function(e){X.call(this,t,e)}]}class Ke extends t{constructor(t){super(),e(this,t,Ye,Ue,N,{label:0})}}function Xe(t){let e,n;return e=new st({props:{d:t[0],outline:t[2],strokeWidth:t[3]}}),{c(){f(e.$$.fragment)},m(t,r){m(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.d=t[0]),4&n&&(r.outline=t[2]),8&n&&(r.strokeWidth=t[3]),e.$set(r)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Je(t){let e,n;return e=new Ke({props:{label:t[1],$$slots:{default:[Xe]},$$scope:{ctx:t}}}),e.$on("click",t[4]),{c(){f(e.$$.fragment)},m(t,r){m(e,t,r),n=!0},p(t,[n]){const r={};2&n&&(r.label=t[1]),45&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ze(t,e,n){let{icon:r}=e,{label:l="Button"}=e,{outline:i=!1}=e,{strokeWidth:a=1}=e;return t.$$set=t=>{"icon"in t&&n(0,r=t.icon),"label"in t&&n(1,l=t.label),"outline"in t&&n(2,i=t.outline),"strokeWidth"in t&&n(3,a=t.strokeWidth)},[r,l,i,a,function(e){X.call(this,t,e)}]}class Qe extends t{constructor(t){super(),e(this,t,Ze,Je,N,{icon:0,label:1,outline:2,strokeWidth:3})}}function tn(t,e,n){const r=t.slice();return r[19]=e[n],r[21]=n,r}function en(t){let e,n,r,a;return n=new Qe({props:{label:"Get Current Location",icon:"M15 7a8 8 0 100.01 0M15 7v-2M15 23v2M7 15h-2M23 15h2M12 13h-2v4h2v-2M14 17v-4h2v2h-2M20 13h-2v2h2v2h-2",outline:!0}}),n.$on("click",t[9]),{c(){e=c("div"),f(n.$$.fragment),l(e,"class","z-20 absolute")},m(t,r){i(t,e,r),m(n,e,null),a=!0},p(e,n){t=e},i(t){a||(p(n.$$.fragment,t),h((()=>{r||(r=g(e,j,{duration:an},!0)),r.run(1)})),a=!0)},o(t){$(n.$$.fragment,t),r||(r=g(e,j,{duration:an},!1)),r.run(0),a=!1},d(t){t&&s(e),w(n),t&&r&&r.end()}}}function nn(t){let e,n,r,o,u=t[3],d=[];for(let l=0;u.length>l;l+=1)d[l]=rn(tn(t,u,l));return{c(){e=c("div"),n=c("div");for(let t=0;d.length>t;t+=1)d[t].c();l(n,"class","shadow-lg py-1"),l(e,"class","rounded-md outline-none bg-gray-100 shadow-lg w-full transform origin-top-right origin-top transition-transform left-0 z-20 absolute m1-2 dark:bg-dark-800")},m(t,r){i(t,e,r),a(e,n);for(let e=0;d.length>e;e+=1)d[e].m(n,null);o=!0},p(e,r){if(t=e,152&r){let e;for(u=t[3],e=0;u.length>e;e+=1){const l=tn(t,u,e);d[e]?d[e].p(l,r):(d[e]=rn(l),d[e].c(),d[e].m(n,null))}for(;d.length>e;e+=1)d[e].d(1);d.length=u.length}},i(t){o||(h((()=>{r||(r=g(e,q,{duration:an,y:-50},!0)),r.run(1)})),o=!0)},o(t){r||(r=g(e,q,{duration:an,y:-50},!1)),r.run(0),o=!1},d(t){t&&s(e),T(d,t),t&&r&&r.end()}}}function rn(t){let e,n,r,o,f,m=t[19].name+"";function p(){return t[12](t[19])}function h(){return t[13](t[21])}return{c(){e=c("a"),n=d(m),l(e,"href",r="#"),l(e,"class","font-semibold text-md text-lg py-3 px-4 text-gray-700 block no-underline dark:text-gray-400"),H(e,"selected",t[21]===t[4])},m(t,r){i(t,e,r),a(e,n),o||(f=[u(e,"click",p),u(e,"mouseenter",h)],o=!0)},p(r,l){t=r,8&l&&m!==(m=t[19].name+"")&&W(n,m),16&l&&H(e,"selected",t[21]===t[4])},d(t){t&&s(e),o=!1,J(f)}}}function ln(t){let e,n,r,o,d,h,g,x,k,M,C,D;e=new _e({props:{show:t[1]}}),e.$on("close",t[6]);let T=t[1]&&en(t),B=t[1]&&nn(t);return{c(){f(e.$$.fragment),n=v(),r=c("div"),T&&T.c(),o=v(),d=c("div"),h=c("input"),g=v(),x=c("label"),x.textContent="Ort",k=v(),B&&B.c(),l(h,"id","location"),l(h,"type","text"),l(h,"class","bg-transparent border-none h-full outline-none flex-1 text-center text-xl w-full dark:text-gray-400"),l(h,"placeholder","Ort"),l(h,"autocomplete","off"),l(x,"for","location"),l(x,"class","hidden"),l(d,"class","h-full relative"),l(r,"class","bg-white rounded-md h-10 shadow-md mx-1 mt-1 relative dark:bg-dark-600"),H(r,"z-50",t[1])},m(l,s){m(e,l,s),i(l,n,s),i(l,r,s),T&&T.m(r,null),a(r,o),a(r,d),a(d,h),t[10](h),Z(h,t[0]),a(d,g),a(d,x),a(r,k),B&&B.m(r,null),M=!0,C||(D=[u(h,"input",t[11]),u(h,"keydown",t[5]),u(h,"focus",t[8]),u(h,"click",t[8])],C=!0)},p(t,[n]){const l={};2&n&&(l.show=t[1]),e.$set(l),t[1]?T?(T.p(t,n),2&n&&p(T,1)):(T=en(t),T.c(),p(T,1),T.m(r,o)):T&&(y(),$(T,1,1,(()=>{T=null})),b()),1&n&&h.value!==t[0]&&Z(h,t[0]),t[1]?B?(B.p(t,n),2&n&&p(B,1)):(B=nn(t),B.c(),p(B,1),B.m(r,null)):B&&(y(),$(B,1,1,(()=>{B=null})),b()),2&n&&H(r,"z-50",t[1])},i(t){M||(p(e.$$.fragment,t),p(T),p(B),M=!0)},o(t){$(e.$$.fragment,t),$(T),$(B),M=!1},d(l){w(e,l),l&&s(n),l&&s(r),T&&T.d(),t[10](null),B&&B.d(),C=!1,J(D)}}}const an=250;function on(t,e,n){let r;B(t,Lt,(t=>n(14,r=t)));const l={lon:0,lat:0};let i,a="",o=[];const s=t=>async function(t,e=5){return t=t.trim().toLowerCase(),(await Tt()).filter((e=>e.search.includes(t))).slice(0,e)}(t).then((t=>n(3,o=t)));let c=!1,u=0;function d(){!a&&r&&Bt(r).then((t=>n(0,a=t))),n(1,c=!1),null==i||i.blur()}function f(t,e){E(Lt,r=e,r),function(t,{lon:e,lat:n}){const r={lon:e,lat:n},l=St(r);Ae.history=[{location:t,coordinates:r},...Ae.history.filter((t=>St(t.coordinates)!==l)).slice(0,3)],localStorage.wettr=JSON.stringify(Ae)}(t,e);const n=new URLSearchParams(window.location.search);n.set("location",t),n.set("coordinates",St(e));const l=window.location.origin+window.location.pathname+"?"+n.toString()+"#"+window.location.hash;l!==window.location.toString()&&window.history.pushState({},"",l)}async function m(t){n(0,a=t.name),f(a,{...t}),d()}return async function(){var t;const e=new URLSearchParams(window.location.search),n=Object.fromEntries(e.entries());let r=Pt(),i="";if("undefined"!=n.location&&(i=n.location),!i&&r.lat>-500)i=await Bt(r);else if(i&&-500>=r.lat)r=await async function(t){if(0===t.trim().length)return null;const e=(await Tt()).find((e=>e.name===t));return e?{lat:+e.lat,lon:+e.lon}:null}(i);else{const e=null==(t=Re())?void 0:t[0];e.location&&e.coordinates?(i=e.location,r=e.coordinates):(i="",r=l)}m({name:i,...r})}(),t.$$.update=()=>{if(3&t.$$.dirty&&c){if(a.length>0)s(a);else{const t=Re();t.length>0?n(3,o=t.map((t=>({name:t.location,lon:t.coordinates.lon,lat:t.coordinates.lat})))):s(a)}n(4,u=0)}},[a,c,i,o,u,function(t){switch(t.code){case"ArrowUp":n(4,u=Math.max(0,u-1)),t.preventDefault();break;case"ArrowDown":n(4,u=Math.min(o.length-1,u+1)),t.preventDefault();break;case"Enter":m(o[u]);break;case"Escape":d()}},d,m,function(){n(1,c=!0),n(4,u=0),n(0,a="")},function(){d(),async function(){navigator.geolocation.getCurrentPosition((async t=>{const{latitude:e,longitude:r}=t.coords,l=+e.toFixed(3),i=+r.toFixed(3);(({closestCity:t,coordinates:e})=>{n(0,a=t),f(t,e)})({closestCity:await Bt({lat:l,lon:i}),coordinates:{lat:l,lon:i}})}),(()=>alert("Ort konte nicht ermittelt werden")))}()},function(t){F[t?"unshift":"push"]((()=>{i=t,n(2,i)}))},function(){a=this.value,n(0,a)},t=>m(t),t=>n(4,u=t)]}class sn extends t{constructor(t){super(),e(this,t,on,ln,N,{})}}function cn(t){let e,n,r,a;return{c(){e=c("img"),l(e,"class","w-full rounded-md svelte-yjrf9h"),Q(e.src,n=t[2])||l(e,"src",n),l(e,"alt","")},m(t,n){i(t,e,n),a=!0},p(t,r){(!a||4&r&&!Q(e.src,n=t[2]))&&l(e,"src",n)},i(t){a||(h((()=>{r||(r=g(e,j,{duration:150},!0)),r.run(1)})),a=!0)},o(t){r||(r=g(e,j,{duration:150},!1)),r.run(0),a=!1},d(t){t&&s(e),t&&r&&r.end()}}}function un(t){let e,n,r,o,u=t[2]&&cn(t);return r=new re({props:{clouds:t[0],viewBounds:t[1]}}),{c(){e=c("div"),u&&u.c(),n=v(),f(r.$$.fragment),l(e,"class","relative svelte-yjrf9h"),l(e,"style",`min-height:${dn-22}px`)},m(t,l){i(t,e,l),u&&u.m(e,null),a(e,n),m(r,e,null),o=!0},p(t,[l]){t[2]?u?(u.p(t,l),4&l&&p(u,1)):(u=cn(t),u.c(),p(u,1),u.m(e,n)):u&&(y(),$(u,1,1,(()=>{u=null})),b());const i={};1&l&&(i.clouds=t[0]),2&l&&(i.viewBounds=t[1]),r.$set(i)},i(t){o||(p(u),p(r.$$.fragment,t),o=!0)},o(t){$(u),$(r.$$.fragment,t),o=!1},d(t){t&&s(e),u&&u.d(),w(r)}}}const dn=350;function fn(t,e,n){let r;B(t,Lt,(t=>n(3,r=t)));let l,{clouds:i}=e,{viewBounds:a}=e;return t.$$set=t=>{"clouds"in t&&n(0,i=t.clouds),"viewBounds"in t&&n(1,a=t.viewBounds)},t.$$.update=()=>{8&t.$$.dirty&&(async()=>{if(zt(r)){const t=function(t,e){return`https://sgx.geodatenzentrum.de/wms_topplus_open?service=wms&version=1.3.0&request=GetMap&Layers=web&STYLES=default&BBOX=${[t.lb.lat,t.lb.lon,t.rt.lat,t.rt.lon].map((t=>Number.parseFloat(t).toFixed(3))).join(",")}&CRS=EPSG:4326&width=${2*e}&Height=${2*e}&Format=image/jpeg`}(vt(r),dn);n(2,l=t)}})()},[i,a,l,r]}class mn extends t{constructor(t){super(),e(this,t,fn,un,n,{clouds:0,viewBounds:1})}}function pn(t){let e,n,o,h,g,x,y,b,k,M,C,D,T,B,z,S,P,L,F,j,E,N,H=gn(t[1][t[0]])+"";return o=new Qe({props:{label:"Go Back",icon:"M20 7l-10 8l10 8z",outline:!0}}),o.$on("click",t[9]),k=new Qe({props:{label:"Go Forward",icon:"M10 7l10 8l-10 8z",outline:!0}}),k.$on("click",t[12]),{c(){e=c("div"),n=c("span"),f(o.$$.fragment),h=v(),g=c("span"),x=c("input"),y=v(),b=c("span"),f(k.$$.fragment),M=v(),C=c("div"),D=c("div"),T=d(H),B=v(),z=c("div"),S=r("svg"),P=r("path"),l(x,"type","range"),l(x,"min",hn),l(x,"max",t[2]),l(g,"class","flex-grow mx-3 mt-1 w-full"),l(P,"d","m0 0h24c-12 6-12 18 0 24h-24c12-6 12-18 0-24z"),l(S,"width","100%"),l(S,"class","h-6 w-[20px] "),l(S,"viewBox","0 0 24 24"),l(S,"fill","#2663eb"),l(S,"stroke","none"),l(S,"preserveAspectRatio","none"),l(z,"class","-mt-0.5 absolute"),l(z,"style",L=`left:${t[5]/2-10}px`),l(D,"class","rounded-md bg-blue-600 text-center text-xl text-white w-full px-1 time-label relative tabular-nums"),l(D,"style",F=`transform: translateX(${t[6]}px)`),l(C,"class","-top-10 left-0 z-20 absolute"),l(e,"class","flex my-2 relative")},m(r,l){i(r,e,l),a(e,n),m(o,n,null),a(e,h),a(e,g),a(g,x),t[10](x),Z(x,t[0]),a(e,y),a(e,b),m(k,b,null),a(e,M),a(e,C),a(C,D),a(D,T),a(D,B),a(D,z),a(z,S),a(S,P),t[13](D),j=!0,E||(N=[u(x,"change",t[11]),u(x,"input",t[11])],E=!0)},p(t,[e]){(!j||4&e)&&l(x,"max",t[2]),1&e&&Z(x,t[0]),(!j||3&e)&&H!==(H=gn(t[1][t[0]])+"")&&W(T,H),(!j||32&e&&L!==(L=`left:${t[5]/2-10}px`))&&l(z,"style",L),(!j||64&e&&F!==(F=`transform: translateX(${t[6]}px)`))&&l(D,"style",F)},i(t){j||(p(o.$$.fragment,t),p(k.$$.fragment,t),j=!0)},o(t){$(o.$$.fragment,t),$(k.$$.fragment,t),j=!1},d(n){n&&s(e),w(o),t[10](null),w(k),t[13](null),E=!1,J(N)}}}let hn=0;function gn(t){return new Intl.DateTimeFormat("default",{hourCycle:"h23",hour:"numeric",minute:"numeric"}).format(t)}function $n(t,e,n){let{sliderValue:r=0}=e,{times:l=[]}=e,i=100;const a=V();let o,s,c=1,u=1,d=0,f=0;return t.$$set=t=>{"sliderValue"in t&&n(0,r=t.sliderValue),"times"in t&&n(1,l=t.times)},t.$$.update=()=>{var e,m,p;if(2&t.$$.dirty&&(n(2,i=l.length-1),p=null!=(m=null==(e=xt(l))?void 0:e.index)?m:0,n(0,r=p)),24&t.$$.dirty&&(o&&(n(7,c=o.offsetWidth),n(8,d=o.offsetLeft)),s&&n(5,u=s.offsetWidth)),423&t.$$.dirty){const t=l[r];t&&a("timeSelected",t),n(6,f=d+16-u/2+r*((c-32)/i))}},[r,l,i,o,s,u,f,c,d,()=>n(0,r=Math.max(0,r-1)),function(t){F[t?"unshift":"push"]((()=>{o=t,n(3,o)}))},function(){r=tt(this.value),n(0,r)},()=>n(0,r=Math.min(i,r+1)),function(t){F[t?"unshift":"push"]((()=>{s=t,n(4,s)}))}]}class wn extends t{constructor(t){super(),e(this,t,$n,pn,n,{sliderValue:0,times:1})}}function vn(t){let e,n,r,o,x,y,b,k,M,C,D,T,B,z,S,P,L,F,j,E,N,H,W,I;return k=new mn({props:{clouds:t[2],viewBounds:t[3]}}),D=new wn({props:{times:t[1]}}),D.$on("timeSelected",t[13]),{c(){e=c("div"),n=c("div"),r=c("div"),o=c("span"),o.textContent="Regenradar",x=v(),y=c("span"),y.textContent="×",b=v(),f(k.$$.fragment),M=v(),C=c("div"),f(D.$$.fragment),T=v(),B=c("div"),z=c("a"),S=d(t[4]),P=c("span"),P.textContent=",",L=v(),F=c("a"),j=d(t[6]),l(y,"class","font-extralight text-lg px-3 right-5 clickable absolute"),l(y,"role","button"),l(r,"class","text-size-xl text-center pt-2 pb-4"),l(n,"class","flex-col mt-2 dark:bg-dark-600"),l(z,"class","source-link"),l(z,"href",t[5]),l(F,"class","source-link"),l(F,"href",t[7]),l(B,"class","text-center leading-3 dark:bg-dark-600 dark:text-gray-500"),l(e,"class","flex flex-col space-y-2 top-0 right-0 left-0 z-20 absolute select-none children:shadow-md children:rounded-md children:max-w-sm children:p-2 children:bg-white children:mx-5 children:z-20 ")},m(l,s){i(l,e,s),a(e,n),a(n,r),a(r,o),a(r,x),a(r,y),a(n,b),m(k,n,null),a(n,M),a(n,C),m(D,C,null),a(e,T),a(e,B),a(B,z),a(z,S),a(B,P),a(B,L),a(B,F),a(F,j),H=!0,W||(I=[u(y,"click",t[9]),u(r,"click",t[9]),et(E=nt.call(null,e,{timeframe:500,minSwipeDistance:35,touchAction:"none"})),u(e,"swipe",t[14])],W=!0)},p(t,e){const n={};4&e&&(n.clouds=t[2]),8&e&&(n.viewBounds=t[3]),k.$set(n);const r={};2&e&&(r.times=t[1]),D.$set(r)},i(t){H||(p(k.$$.fragment,t),p(D.$$.fragment,t),h((()=>{N||(N=g(e,q,{y:-300},!0)),N.run(1)})),H=!0)},o(t){$(k.$$.fragment,t),$(D.$$.fragment,t),N||(N=g(e,q,{y:-300},!1)),N.run(0),H=!1},d(t){t&&s(e),w(k),w(D),t&&N&&N.end(),W=!1,J(I)}}}function xn(t){let e,n,r,l;e=new _e({props:{show:t[0]}}),e.$on("close",t[9]);let a=t[0]&&vn(t);return{c(){f(e.$$.fragment),n=v(),a&&a.c(),r=x()},m(t,o){m(e,t,o),i(t,n,o),a&&a.m(t,o),i(t,r,o),l=!0},p(t,[n]){const l={};1&n&&(l.show=t[0]),e.$set(l),t[0]?a?(a.p(t,n),1&n&&p(a,1)):(a=vn(t),a.c(),p(a,1),a.m(r.parentNode,r)):a&&(y(),$(a,1,1,(()=>{a=null})),b())},i(t){l||(p(e.$$.fragment,t),p(a),l=!0)},o(t){$(e.$$.fragment,t),$(a),l=!1},d(t){w(e,t),t&&s(n),a&&a.d(t),t&&s(r)}}}function yn(t,e,n){let r,l,i,a;B(t,Nt,(t=>n(0,r=t))),B(t,At,(t=>n(10,l=t))),B(t,Ot,(t=>n(11,i=t))),B(t,Lt,(t=>n(12,a=t)));let o,s=[],c=[],u=[],d=new Map;function f(t){n(3,o=t.viewBounds),n(1,s=t.times.slice(0,t.times.length-1)),c=t.clouds,s.forEach((t=>{d.set(t,Jt(c,t))}))}function m(t){n(2,u=d.get(t))}function p(){E(Nt,r=!1,r)}return t.$$.update=()=>{var e,n;6145&t.$$.dirty&&r&&zt(a)&&((null==(e=null==i?void 0:i.viewBounds)?void 0:e.lb)&&f(i),async function(){try{M(jt).postMessage({type:"cloudData",data:{bounds:vt(M(Lt)),onlyNow:!1}})}catch(t){console.error(t)}}()),1024&t.$$.dirty&&(null==(n=null==l?void 0:l.viewBounds)?void 0:n.lb)&&f(l)},[r,s,u,o,"Kartendarstellung: © Bundesamt für Kartographie und Geodäsie (2021)","http://www.bkg.bund.de/","Datenquellen","https://sg.geodatenzentrum.de/web_public/Datenquellen_TopPlus_Open.pdf",m,p,l,i,a,t=>m(t.detail),({detail:t})=>"top"===t.direction||"bottom"===t.direction?p():null]}class bn extends t{constructor(t){super(),e(this,t,yn,xn,N,{})}}function kn(t){let e,n,r;return n=new st({props:{d:"M9 12l6 6l6-6",fill:t[0]?null:pt(ht.warning,t[5]),outline:!0}}),{c(){e=c("div"),f(n.$$.fragment),l(e,"class","p-2 pt-3 transition-transform w-8 self-center"),H(e,"mirrored-y",!t[0])},m(t,l){i(t,e,l),m(n,e,null),r=!0},p(t,r){const l={};33&r&&(l.fill=t[0]?null:pt(ht.warning,t[5])),n.$set(l),1&r&&H(e,"mirrored-y",!t[0])},i(t){r||(p(n.$$.fragment,t),r=!0)},o(t){$(n.$$.fragment,t),r=!1},d(t){t&&s(e),w(n)}}}function Mn(t){let e,n,r,o,h,g,x,k,M,C,D,T,B,z,S,P;r=new st({props:{d:"M15 20a2 2 0 100.01 0m-2-3a 4 4 0 014 0l1-10a 4 4 0 00-6 0z",fill:pt(t[4]?ht.foreground:ht.warning,t[5])}});let L=!t[4]&&kn(t);return{c(){e=c("div"),n=c("div"),f(r.$$.fragment),o=v(),h=c("div"),g=d(t[1]),x=v(),k=c("span"),M=d(t[2]),C=v(),D=c("div"),T=d(t[3]),B=v(),L&&L.c(),l(n,"class","flex h-5 ml-2 w-5 self-center"),l(k,"class","font-light text-xs ml-1 tracking-wide tabular-nums self-center"),l(h,"class","flex flex-grow font-semibold flex-shrink-0 self-center overflow-hidden overflow-ellipsis"),l(D,"class","flex font-light text-xs text-right self-center"),H(D,"pr-6",t[4]),l(e,"class","flex space-x-1 h-14 w-full"),H(e,"shadow-md",!t[0]),H(e,"warning-sub-item-header",t[4]),H(e,"clickable",!t[4]),H(e,"rounded-md",!t[4])},m(l,s){i(l,e,s),a(e,n),m(r,n,null),a(e,o),a(e,h),a(h,g),a(h,x),a(h,k),a(k,M),a(e,C),a(e,D),a(D,T),a(e,B),L&&L.m(e,null),z=!0,S||(P=u(e,"click",t[6]),S=!0)},p(t,[n]){const l={};48&n&&(l.fill=pt(t[4]?ht.foreground:ht.warning,t[5])),r.$set(l),(!z||2&n)&&W(g,t[1]),(!z||4&n)&&W(M,t[2]),(!z||8&n)&&W(T,t[3]),16&n&&H(D,"pr-6",t[4]),t[4]?L&&(y(),$(L,1,1,(()=>{L=null})),b()):L?(L.p(t,n),16&n&&p(L,1)):(L=kn(t),L.c(),p(L,1),L.m(e,null)),1&n&&H(e,"shadow-md",!t[0]),16&n&&H(e,"warning-sub-item-header",t[4]),16&n&&H(e,"clickable",!t[4]),16&n&&H(e,"rounded-md",!t[4])},i(t){z||(p(r.$$.fragment,t),p(L),z=!0)},o(t){$(r.$$.fragment,t),$(L),z=!1},d(t){t&&s(e),w(r),L&&L.d(),S=!1,P()}}}function Cn(t,e,n){let r;B(t,Et,(t=>n(5,r=t)));let{collapsed:l=!0}=e,{title:i=""}=e,{suffix:a=""}=e,{time:o=""}=e,{subItem:s=!1}=e;return t.$$set=t=>{"collapsed"in t&&n(0,l=t.collapsed),"title"in t&&n(1,i=t.title),"suffix"in t&&n(2,a=t.suffix),"time"in t&&n(3,o=t.time),"subItem"in t&&n(4,s=t.subItem)},[l,i,a,o,s,r,function(e){X.call(this,t,e)}]}class Dn extends t{constructor(t){super(),e(this,t,Cn,Mn,n,{collapsed:0,title:1,suffix:2,time:3,subItem:4})}}function Tn(t){let e,n,r,u,f,m,p,h,g,$,w=(t[1]?t[2]:"")+"";return{c(){e=c("div"),n=c("div"),r=d(t[0]),u=v(),f=c("p"),m=c("strong"),p=d(w),h=c("br"),g=v(),$=d(t[1]),l(e,"class","p-3 pr-6 leading-4")},m(t,l){i(t,e,l),a(e,n),a(n,r),a(e,u),a(e,f),a(f,m),a(m,p),a(f,h),a(f,g),a(f,$)},p(t,[e]){1&e&&W(r,t[0]),6&e&&w!==(w=(t[1]?t[2]:"")+"")&&W(p,w),2&e&&W($,t[1])},i:o,o:o,d(t){t&&s(e)}}}function Bn(t,e,n){let{description:r}=e,{instruction:l}=e,{hintText:i}=e;return t.$$set=t=>{"description"in t&&n(0,r=t.description),"instruction"in t&&n(1,l=t.instruction),"hintText"in t&&n(2,i=t.hintText)},[r,l,i]}class zn extends t{constructor(t){super(),e(this,t,Bn,Tn,N,{description:0,instruction:1,hintText:2})}}function Sn(t,e,n){const r=t.slice();return r[1]=e[n],r}function Pn(t){let e,n,r,o,u,d,g,x,k,M,C,D;n=new Dn({props:{suffix:t[0].length>1?"+"+(t[0].length-1):"",title:t[1].title,time:t[1].time,collapsed:t[2]}}),n.$on("click",t[5]),k=new zn({props:{description:t[1].description,instruction:t[1].instruction,hintText:En}});let B=t[3],z=[];for(let l=0;B.length>l;l+=1)z[l]=Ln(Sn(t,B,l));const S=t=>$(z[t],1,1,(()=>{z[t]=null}));return{c(){e=c("div"),f(n.$$.fragment),r=v(),o=c("div"),u=c("div"),d=c("div"),g=v(),x=c("div"),f(k.$$.fragment),M=v();for(let t=0;z.length>t;t+=1)z[t].c();l(d,"class","h-7 w-full bottom-0 linear-fade absolute"),H(d,"dark",t[4]),l(x,"class","h-full text-sm overflow-y-auto box-border custom-scrollbar"),l(u,"class","h-60"),l(o,"class","rounded-b-md max-h-60 transform origin-top transition-all relative height-transition overflow-hidden dark:bg-dark-800"),H(o,"max-h-0",t[2]),H(o,"pb-2",!t[2]),l(e,"class","bg-white rounded-md shadow-md mx-1 select-none dark:bg-dark-600")},m(t,l){i(t,e,l),m(n,e,null),a(e,r),a(e,o),a(o,u),a(u,d),a(u,g),a(u,x),m(k,x,null),a(x,M);for(let e=0;z.length>e;e+=1)z[e].m(x,null);D=!0},p(t,e){const r={};1&e&&(r.suffix=t[0].length>1?"+"+(t[0].length-1):""),2&e&&(r.title=t[1].title),2&e&&(r.time=t[1].time),4&e&&(r.collapsed=t[2]),n.$set(r),16&e&&H(d,"dark",t[4]);const l={};if(2&e&&(l.description=t[1].description),2&e&&(l.instruction=t[1].instruction),k.$set(l),8&e){let n;for(B=t[3],n=0;B.length>n;n+=1){const r=Sn(t,B,n);z[n]?(z[n].p(r,e),p(z[n],1)):(z[n]=Ln(r),z[n].c(),p(z[n],1),z[n].m(x,null))}for(y(),n=B.length;z.length>n;n+=1)S(n);b()}4&e&&H(o,"max-h-0",t[2]),4&e&&H(o,"pb-2",!t[2])},i(t){if(!D){p(n.$$.fragment,t),p(k.$$.fragment,t);for(let t=0;B.length>t;t+=1)p(z[t]);C||h((()=>{C=rt(e,j,{duration:150}),C.start()})),D=!0}},o(t){$(n.$$.fragment,t),$(k.$$.fragment,t),z=z.filter(Boolean);for(let e=0;z.length>e;e+=1)$(z[e]);D=!1},d(t){t&&s(e),w(n),w(k),T(z,t)}}}function Ln(t){let e,n,r,l;return e=new Dn({props:{subItem:!0,title:t[1].title,time:t[1].time}}),r=new zn({props:{description:t[1].description,instruction:t[1].instruction,hintText:En}}),{c(){f(e.$$.fragment),n=v(),f(r.$$.fragment)},m(t,a){m(e,t,a),i(t,n,a),m(r,t,a),l=!0},p(t,n){const l={};8&n&&(l.title=t[1].title),8&n&&(l.time=t[1].time),e.$set(l);const i={};8&n&&(i.description=t[1].description),8&n&&(i.instruction=t[1].instruction),r.$set(i)},i(t){l||(p(e.$$.fragment,t),p(r.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),$(r.$$.fragment,t),l=!1},d(t){w(e,t),t&&s(n),w(r,t)}}}function Fn(t){let e,n,r=t[0].length>0&&Pn(t);return{c(){r&&r.c(),e=x()},m(t,l){r&&r.m(t,l),i(t,e,l),n=!0},p(t,[n]){t[0].length>0?r?(r.p(t,n),1&n&&p(r,1)):(r=Pn(t),r.c(),p(r,1),r.m(e.parentNode,e)):r&&(y(),$(r,1,1,(()=>{r=null})),b())},i(t){n||(p(r),n=!0)},o(t){$(r),n=!1},d(t){r&&r.d(t),t&&s(e)}}}const jn={title:"",description:"",time:"",instruction:""},En="ACHTUNG! Hinweis auf mögliche Gefahren: ";function Nn(t,{start:e,end:n}){const r=e.getDay()===n.getDay(),[l,i]=[e,n].map((e=>function(t,e){const n=t.getDay()===e.getDay(),r=new Intl.DateTimeFormat("de-DE",{weekday:"short"}).formatToParts(e)[0].value+" ";return{hour:e.getHours(),weekday:r,today:n}}(t,e)));let a="";return t>e?a+="bis ":(l.today||(a+=l.weekday),a+=l.hour+" - "),i.today||r||(a+=i.weekday),a+=i.hour+" Uhr",a}function Hn(t,e,n){let r,l,i;B(t,It,(t=>n(6,r=t))),B(t,Lt,(t=>n(7,l=t))),B(t,Et,(t=>n(4,i=t)));let a=!0,o=jn,s=[],c=[];return t.$$.update=()=>{var e;if(193&t.$$.dirty){let t=l,i=[t.lon,t.lat];if(r.length>0){const l=new Date;n(0,s=r.map((t=>({time:Nn(l,t.time),level:t.level,icon:t.type,title:t.event,description:t.description,instruction:t.instruction.replace(En,""),regions:t.regions}))).filter((e=>e.regions.some((e=>function({lon:t,lat:e},n){const r=.02;return!(n.lb.lon>t+r||t-r>n.rt.lon||n.lb.lat>e+r||e-r>n.rt.lat)}(t,e.bounds)&&lt(i,e.polygon)))))),n(1,o=null!=(e=null==s?void 0:s[0])?e:jn),n(3,c=s.slice(1))}}},[s,o,a,c,i,function(){n(2,a=!a)},r,l]}class Wn extends t{constructor(t){super(),e(this,t,Hn,Fn,n,{})}}let In=window.matchMedia("(prefers-color-scheme: dark)");const On=t=>{Et.set(t.matches),document.documentElement.classList[t.matches?"add":"remove"]("dark")};function An(){let t,e,n,c,u,d,f,m,p,h,g,$,w,v,x,y,b,k;return{c(){t=r("svg"),e=r("defs"),n=r("path"),c=r("path"),u=r("path"),d=r("path"),f=r("path"),m=r("path"),p=r("path"),h=r("path"),g=r("path"),$=r("path"),w=r("path"),v=r("path"),x=r("path"),y=r("path"),b=r("circle"),k=r("path"),l(n,"id","sun"),l(n,"d","M15 10.5a4.5 4.5 0 10.001 0"),l(c,"id","sun-rays"),l(c,"d","M15 5v2m0 18v-2M5 15h2m18 0h-2M7.75 7.75l1.4 1.4m13.1 13.1l-1.4-1.4m1.4-13.1l-1.4 1.4m-13.1 13.1l1.4-1.4"),l(u,"id","cloud-open"),l(u,"d","M7 20a4 4 0 110-8h1a4 4 0 1110-0h1.5a4 4 0 110 8"),l(d,"id","cloud"),l(d,"d","M7 20a4 4 0 110-8h1a4 4 0 1110-0h1.5a4 4 0 110 8z"),l(f,"id","sun-part"),l(f,"d","M18 7a3.8 3.8 0 116 4.5"),l(m,"id","sun-part-rays"),l(m,"d","M21.5 1.2l0 1.5M27.5 8.8l1.5 0M25.8 4.6l1.1-1.1M17 4.6l-1.1-1.1M25.8 13l1.1 1.1"),l(p,"id","cloud-part"),l(p,"d","M18.2 7.1a4 4 0 016.7 2.9h1a3.1 3 0 010 6.4h-0.2"),l(h,"id","fog"),l(h,"d","M8 13h15M10 16h16M6 19h16"),l(g,"id","wind"),l(g,"d","M8 12h13a2.5 2.5 0 10-2-4M10 14h10.5q4 0 4-2M6 16h17a2.5 2.5 0 11-2 4"),l($,"id","rain"),l($,"d","M10 20l-1 5M13.3 20l-1.4 7M16.5 20l-.8 4.2"),l(w,"id","sleet"),l(w,"d","M10 20l-.03.15m-.4 2l-.4 2M13.3 20l-.4 2m-.4 2l-.03.15m-.4 2l-.03.15M16.5 20l-.03.25m-.4 2l-.4 2"),l(v,"id","snow"),l(v,"d","M10.5 21.5l0 0m0 3l0 0M13.3 20l0 0m0 3l0 0m0 3l0 0M16 21.5l0 0m0 3l0 0"),l(x,"id","hail"),l(x,"d","M10 20l-.4 2m-.4 2l-.03.15M13.3 20l-.8 4m-.4 2l-.03.15M16.5 20l-.4 2m-.4 2l-.03.15"),l(y,"id","thunderstorm"),l(y,"stroke-width","0.3"),l(y,"fill","currentColor"),l(y,"d","M12.6 17h3.5l-2.5 4h1.8l-5 6.9l2-5.3h-2.5z"),l(b,"id","celsius-circle"),l(b,"stroke-width","0.7"),l(b,"r","1.2"),l(k,"id","wind-indicator"),l(k,"d","M8 13h13a2.5 2.5 0 10-2-4M6 16h17a2.5 2.5 0 11-2 4"),l(k,"transform","scale(0.5 0.5)"),l(t,"class","hidden svelte-127safy")},m(r,l){i(r,t,l),a(t,e),a(e,n),a(e,c),a(e,u),a(e,d),a(e,f),a(e,m),a(e,p),a(e,h),a(e,g),a(e,$),a(e,w),a(e,v),a(e,x),a(e,y),a(e,b),a(e,k)},p:o,i:o,o:o,d(e){e&&s(t)}}}On(In),In.addEventListener("change",On);class Rn extends t{constructor(t){super(),e(this,t,null,An,N,{})}}function qn(t,e,n){const r=t.slice();return r[2]=e[n].label,r[3]=e[n].name,r[4]=e[n].href,r}function Gn(t){let e,n,r,u,f,m,p,h=t[2]+"",g=t[3]+"";return{c(){e=c("div"),n=d(h),r=v(),u=c("a"),f=d(g),p=v(),l(u,"href",m=t[4]),l(u,"class","text-gray-800 no-underline dark:text-gray-300 hover:underline"),l(u,"target","_blank"),l(u,"rel","noopener noreferrer")},m(t,l){i(t,e,l),a(e,n),a(e,r),a(e,u),a(u,f),a(e,p)},p:o,d(t){t&&s(e)}}}function Vn(t){let e,n,r,o,u,d,h,g,x,y,b,k,M,C,D,B,z,S,P,L,F;o=new Rn({}),h=new sn({}),x=new he({}),b=new Wn({}),M=new Oe({}),D=new bn({}),P=new mt({});let j=t[1],E=[];for(let l=0;j.length>l;l+=1)E[l]=Gn(qn(t,j,l));return{c(){e=c("meta"),r=v(),f(o.$$.fragment),u=v(),d=c("main"),f(h.$$.fragment),g=v(),f(x.$$.fragment),y=v(),f(b.$$.fragment),k=v(),f(M.$$.fragment),C=v(),f(D.$$.fragment),B=v(),z=c("footer"),S=c("div"),f(P.$$.fragment),L=v();for(let t=0;E.length>t;t+=1)E[t].c();l(e,"name","theme-color"),l(e,"content",n=t[0]?"#000":"#fff"),l(d,"class","m-auto max-w-sm grid gap-1 grid-cols-1 relative"),l(S,"class","self-center"),l(z,"class","space-y-1 mt-1 text-sm text-center py-10 bg-gray-200 dark:bg-dark-800")},m(t,n){a(document.head,e),i(t,r,n),m(o,t,n),i(t,u,n),i(t,d,n),m(h,d,null),a(d,g),m(x,d,null),a(d,y),m(b,d,null),a(d,k),m(M,d,null),a(d,C),m(D,d,null),i(t,B,n),i(t,z,n),a(z,S),m(P,S,null),a(z,L);for(let e=0;E.length>e;e+=1)E[e].m(z,null);F=!0},p(t,[r]){if((!F||1&r&&n!==(n=t[0]?"#000":"#fff"))&&l(e,"content",n),2&r){let e;for(j=t[1],e=0;j.length>e;e+=1){const n=qn(t,j,e);E[e]?E[e].p(n,r):(E[e]=Gn(n),E[e].c(),E[e].m(z,null))}for(;E.length>e;e+=1)E[e].d(1);E.length=j.length}},i(t){F||(p(o.$$.fragment,t),p(h.$$.fragment,t),p(x.$$.fragment,t),p(b.$$.fragment,t),p(M.$$.fragment,t),p(D.$$.fragment,t),p(P.$$.fragment,t),F=!0)},o(t){$(o.$$.fragment,t),$(h.$$.fragment,t),$(x.$$.fragment,t),$(b.$$.fragment,t),$(M.$$.fragment,t),$(D.$$.fragment,t),$(P.$$.fragment,t),F=!1},d(t){s(e),t&&s(r),w(o,t),t&&s(u),t&&s(d),w(h),w(x),w(b),w(M),w(D),t&&s(B),t&&s(z),w(P),T(E,t)}}}function _n(t,e,n){let r;return B(t,Et,(t=>n(0,r=t))),[r,[{label:"Code",name:"GitHub",href:'"https://github.com/AlexRuppert/wettr'},{label:"Datenquelle",name:"Deutscher Wetterdienst",href:"https://www.dwd.de"},{label:"via",name:"brightsky.dev",href:'"https://brightsky.dev'}]]}!function(t={}){const{immediate:e=!1,onOfflineReady:n,onRegistered:r,onRegisterError:l}=t;let i;"serviceWorker"in navigator&&(i=new it("/wettr/sw.js",{scope:"/wettr/"}),i.addEventListener("activated",(t=>{t.isUpdate?window.location.reload():null==n||n()})),i.register({immediate:e}).then((t=>{null==r||r(t)})).catch((t=>{null==l||l(t)})))}({onOfflineReady(){}}),new class extends t{constructor(t){super(),e(this,t,_n,Vn,N,{})}}({target:document.getElementById("app")});
